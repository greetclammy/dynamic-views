/* @settings

name: Dynamic Views
id: dynamic-views
settings:
    -
        id: layout-heading
        title: Card layout
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-min-card-width
        title: Minimum card width
        description: Minimum width of cards in pixels
        type: variable-number-slider
        default: 400
        min: 50
        max: 800
        step: 10
        format: px
    -
        id: dynamic-views-min-masonry-columns
        title: Minimum masonry columns
        description: Minimum number of columns in masonry view
        type: variable-select
        default: '2'
        options:
            -
                label: One
                value: '1'
            -
                label: Two
                value: '2'
    -
        id: dynamic-views-min-grid-columns
        title: Minimum grid columns
        description: Minimum number of columns in grid view
        type: variable-select
        default: '1'
        options:
            -
                label: One
                value: '1'
            -
                label: Two
                value: '2'
    -
        id: dynamic-views-card-spacing
        title: Card spacing
        description: Spacing between cards
        type: variable-number-slider
        default: 8
        min: 0
        max: 32
        step: 1
        format: px
    -
        id: cards-heading
        title: Cards
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-element-spacing
        title: Card element spacing
        description: Spacing between elements within cards
        type: variable-number-slider
        default: 8
        min: 0
        max: 16
        step: 1
        format: px
    -
        id: dynamic-views-card-border-radius
        title: Card border radius
        description: Corner roundness of cards
        type: variable-number-slider
        default: 6
        min: 0
        max: 32
        step: 1
        format: px
    -
        id: dynamic-views-card-border
        title: Add card border
        description: Show border around cards
        type: class-toggle
        default: true
    -
        id: dynamic-views-card-border-color
        title: Card border color
        description: Color of card borders
        type: variable-themed-color
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-card-border-color-hover
        title: Card border color on hover
        description: Color of card borders when hovering
        type: variable-themed-color
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-card-background
        title: Card background
        description: Card background appearance
        type: class-select
        allowEmpty: false
        default: dynamic-views-card-background-tinted
        options:
            -
                label: Tinted
                value: dynamic-views-card-background-tinted
            -
                label: Transparent
                value: dynamic-views-card-background-transparent
            -
                label: Custom color
                value: dynamic-views-card-background-custom
    -
        id: dynamic-views-card-background-custom-color
        title: Custom card background
        description: Custom color for card backgrounds (only used when Card background is set to Custom color)
        type: variable-themed-color
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: datacore-heading
        title: Datacore
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-show-search
        title: Show search filter
        description: Show search input field in toolbar
        type: class-toggle
        default: true
    -
        id: dynamic-views-show-result-count
        title: Show result count
        description: Show result count and limit dropdown in toolbar
        type: class-toggle
        default: true
    -
        id: dynamic-views-show-create-note
        title: Show 'Create new note' button
        description: Show button to create new note in toolbar
        type: class-toggle
        default: true
    -
        id: dynamic-views-show-shuffle
        title: Show 'Shuffle' button
        description: Show shuffle button in toolbar
        type: class-toggle
        default: true
    -
        id: dynamic-views-show-random
        title: Show 'Open random file' button
        description: Show random file button in toolbar
        type: class-toggle
        default: true
    -
        id: dynamic-views-show-edit-query
        title: Show 'Edit query' button
        description: Show edit query button in toolbar
        type: class-toggle
        default: true
    -
        id: dynamic-views-show-pin-toolbar
        title: Show 'Pin toolbar' button
        description: Show pin toolbar button
        type: class-toggle
        default: true
    -
        id: dynamic-views-show-expand-width
        title: Show 'Expand width' button
        description: Show expand width button in toolbar
        type: class-toggle
        default: true
    -
        id: thumbnails-heading
        title: Thumbnails
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-thumbnail-size
        title: Thumbnail size
        description: Size of card thumbnails in pixels
        type: variable-select
        default: 80px
        options:
            -
                label: Compact
                value: 64px
            -
                label: Standard
                value: 80px
            -
                label: Expanded
                value: 94.5px
    -
        id: dynamic-views-thumbnail-border-radius
        title: Thumbnail border radius
        description: Corner roundness of thumbnails
        type: variable-number-slider
        default: 4
        min: 0
        max: 50
        step: 1
        format: px
    -
        id: dynamic-views-thumbnail-position
        title: Thumbnail position
        description: Position of thumbnail relative to text preview
        type: class-select
        allowEmpty: false
        default: dynamic-views-thumbnail-right
        options:
            -
                label: Left
                value: dynamic-views-thumbnail-left
            -
                label: Right
                value: dynamic-views-thumbnail-right
    -
        id: dynamic-views-thumbnail-aspect-ratio
        title: Thumbnail aspect ratio
        description: Aspect ratio for thumbnail images (1.00 = square)
        type: variable-number-slider
        default: 1.00
        min: 0.50
        max: 2.00
        step: 0.05
        format: ''
    -
        id: dynamic-views-thumbnail-crop
        title: Thumbnail crop alignment
        description: How to crop thumbnail images when aspect ratios don't match
        type: class-select
        allowEmpty: false
        default: dynamic-views-thumbnail-crop-center
        options:
            -
                label: Top
                value: dynamic-views-thumbnail-crop-top
            -
                label: Center
                value: dynamic-views-thumbnail-crop-center
            -
                label: Bottom
                value: dynamic-views-thumbnail-crop-bottom
    -
        id: covers-heading
        title: Covers
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-cover-position
        title: Cover position
        description: Position of cover image on card
        type: class-select
        allowEmpty: false
        default: dynamic-views-cover-top
        options:
            -
                label: Top
                value: dynamic-views-cover-top
            -
                label: Bottom
                value: dynamic-views-cover-bottom
            -
                label: Left
                value: dynamic-views-cover-left
            -
                label: Right
                value: dynamic-views-cover-right
    -
        id: dynamic-views-image-aspect-ratio
        title: Top/bottom cover aspect ratio
        description: Aspect ratio for top and bottom cover images (1.00 = square)
        type: variable-number-slider
        default: 0.55
        min: 0.25
        max: 2.5
        step: 0.05
        format: ''
    -
        id: dynamic-views-side-cover-ratio
        title: Left/right cover ratio
        description: Ratio of cover width to content width (1.00 = equal width)
        type: variable-number-slider
        default: 0.50
        min: 0.25
        max: 1.00
        step: 0.05
        format: ''
    -
        id: dynamic-views-cover-crop
        title: Cover crop alignment
        description: How to crop cover images when aspect ratios don't match
        type: class-select
        allowEmpty: false
        default: dynamic-views-cover-crop-center
        options:
            -
                label: Top
                value: dynamic-views-cover-crop-top
            -
                label: Center
                value: dynamic-views-cover-crop-center
            -
                label: Bottom
                value: dynamic-views-cover-crop-bottom
    -
        id: dynamic-views-cover-fit-mode-tb
        title: Cover fit mode (top/bottom)
        description: How to display cover images when position is Top or Bottom
        type: class-select
        allowEmpty: false
        default: dynamic-views-cover-crop-tb
        options:
            -
                label: Crop
                value: dynamic-views-cover-crop-tb
            -
                label: Contain
                value: dynamic-views-cover-contain-tb
    -
        id: dynamic-views-cover-fit-mode-lr
        title: Cover fit mode (left/right)
        description: How to display cover images when position is Left or Right
        type: class-select
        allowEmpty: false
        default: dynamic-views-cover-crop-lr
        options:
            -
                label: Crop
                value: dynamic-views-cover-crop-lr
            -
                label: Contain
                value: dynamic-views-cover-contain-lr
    -
        id: dynamic-views-cover-background
        title: Cover background
        description: Background style for Contain mode
        type: class-select
        allowEmpty: false
        default: dynamic-views-cover-bg-ambient
        options:
            -
                label: Blur
                value: dynamic-views-cover-bg-blur
            -
                label: Ambient
                value: dynamic-views-cover-bg-ambient
            -
                label: Transparent
                value: dynamic-views-cover-bg-transparent
            -
                label: Custom color
                value: dynamic-views-cover-bg-custom
    -
        id: bases-cards-cover-background
        title: Custom cover background
        description: Background color for "Custom color" mode
        type: variable-themed-color
        format: rgb
        opacity: false
        default-light: '#'
        default-dark: '#'
    -
        id: bases-cards-cover-background-on-zoom
        title: Show cover background on zoom
        description: When enabled, zoomed images use the same background as covers (Blur/Ambient/Custom). Transparent always uses default background.
        type: class-toggle
        default: false
    -
        id: dynamic-views-masonry-flexible-cover-height
        title: Flexible cover height
        description: Remove horizontal letterbox bars in Masonry view.
        type: class-toggle
        default: true
    -
        id: dynamic-views-show-cover-placeholder
        title: Show placeholder for cards with no image
        description: If covers are enabled but a file doesn't have an image, show an empty cover. If disabled, card content will fill all available space.
        type: class-select
        allowEmpty: false
        default: dynamic-views-show-cover-placeholder-grid
        options:
            -
                label: In Grid view
                value: dynamic-views-show-cover-placeholder-grid
            -
                label: In Masonry view
                value: dynamic-views-show-cover-placeholder-masonry
            -
                label: In both Grid and Masonry views
                value: dynamic-views-show-cover-placeholder-both
            -
                label: Don't show
                value: dynamic-views-show-cover-placeholder-none
    -
        id: dynamic-views-side-cover-min-height
        title: Minimum left/right cover height
        description: Minimum height for cards with left or right cover position
        type: variable-text
        default: 175px
    -
        id: title-heading
        title: Title
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-title-font
        title: Title font
        description: Font name as it appears on your system
        type: variable-text
        default: ''
    -
        id: dynamic-views-title-font-size
        title: Title font size
        description: Font size for card titles (e.g., 1em, 16px, 1.2rem)
        type: variable-text
        default: ''
    -
        id: dynamic-views-title-color
        title: Title text color
        description: Color of card titles
        type: variable-themed-color
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-title-lines
        title: Number of title lines
        description: Maximum number of lines for card titles
        type: variable-number-slider
        default: 2
        min: 1
        max: 5
        step: 1
        format: ''
    -
        id: text-preview-heading
        title: Text preview
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-text-preview-font
        title: Text preview font
        description: Font name as it appears on your system
        type: variable-text
        default: ''
    -
        id: dynamic-views-text-preview-font-size
        title: Text preview font size
        description: Font size for text previews (e.g., 0.9em, 14px, 0.875rem)
        type: variable-text
        default: ''
    -
        id: dynamic-views-text-preview-color
        title: Text preview color
        description: Color of text previews
        type: variable-themed-color
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-text-preview-lines
        title: Number of text preview lines
        description: Maximum number of lines for text previews
        type: variable-number-slider
        default: 5
        min: 1
        max: 10
        step: 1
        format: ''
    -
        id: properties-heading
        title: Properties
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-tag-style
        title: Tag style
        description: Visual appearance of tags in card properties
        type: class-select
        allowEmpty: false
        default: dynamic-views-tag-style-outline
        options:
            -
                label: Outline
                value: dynamic-views-tag-style-outline
            -
                label: Match theme
                value: dynamic-views-tag-style-theme
            -
                label: Minimal
                value: dynamic-views-tag-style-minimal
    -
        id: dynamic-views-fade-trimmed-content
        title: Fade trimmed content
        description: Show gradient fade on tags and paths that overflow their container
        type: class-toggle
        default: true
    -
        id: dynamic-views-timestamp-recent-time-only
        title: Only show time for recent timestamps
        description: Omit the date for timestamps in the last 24 h. Will show timestamp as-is if it has no time.
        type: class-toggle
        default: true
    -
        id: dynamic-views-timestamp-older-date-only
        title: Only show date for older timestamps
        description: Omit the time for timestamps older than a day.
        type: class-toggle
        default: true
    -
        id: dynamic-views-timestamp-icon
        title: Show timestamp icon
        description: Show icon next to timestamp to distinguish between modified and created timestamps
        type: class-select
        allowEmpty: false
        default: dynamic-views-timestamp-icon-outer
        options:
            -
                label: Show left
                value: dynamic-views-timestamp-icon-left
            -
                label: Show right
                value: dynamic-views-timestamp-icon-right
            -
                label: Show inner
                value: dynamic-views-timestamp-icon-inner
            -
                label: Show outer
                value: dynamic-views-timestamp-icon-outer
            -
                label: Don't show
                value: dynamic-views-timestamp-icon-hide
    -
        id: dynamic-views-property-master-font
        title: Property font
        description: Font name as it appears on your system. Can be overridden by individual item options below.
        type: variable-text
        default: ''
    -
        id: dynamic-views-property-master-font-size
        title: Property font size
        description: Font size for all properties (e.g., 0.8em, 13px, 0.8125rem)
        type: variable-text
        default: ''
    -
        id: dynamic-views-property-master-color
        title: Property text color
        description: Text color of all properties. Can be overridden by individual property options below.
        type: variable-themed-color
        format: hsl-split
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-property-1-font
        title: First property font
        description: Font name as it appears on your system
        type: variable-text
        default: ''
    -
        id: dynamic-views-property-1-color
        title: First property text color
        description: Color of first property text
        type: variable-themed-color
        format: hsl-split
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-property-2-font
        title: Second property font
        description: Font name as it appears on your system
        type: variable-text
        default: ''
    -
        id: dynamic-views-property-2-color
        title: Second property text color
        description: Color of second property text
        type: variable-themed-color
        format: hsl-split
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-property-3-font
        title: Third property font
        description: Font name as it appears on your system
        type: variable-text
        default: ''
    -
        id: dynamic-views-property-3-color
        title: Third property text color
        description: Color of third property text
        type: variable-themed-color
        format: hsl-split
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-property-4-font
        title: Fourth property font
        description: Font name as it appears on your system
        type: variable-text
        default: ''
    -
        id: dynamic-views-property-4-color
        title: Fourth property text color
        description: Color of fourth property text
        type: variable-themed-color
        format: hsl-split
        default-light: '#'
        default-dark: '#'

*/

/* ============================================
   COLOR VARIABLES
   ============================================ */

/* Compose property colors from HSL components */
/* When HSL components undefined, entire color becomes invalid and falls back to text-faint/text-muted */
body {
    --dynamic-views-property-master-color: hsl(var(--dynamic-views-property-master-color-h), var(--dynamic-views-property-master-color-s), var(--dynamic-views-property-master-color-l));
    --dynamic-views-property-master-color-hover: hsl(calc(var(--dynamic-views-property-master-color-h) - 3), calc(var(--dynamic-views-property-master-color-s) * 1.02), calc(var(--dynamic-views-property-master-color-l) * 1.15));

    --dynamic-views-property-1-color: hsl(var(--dynamic-views-property-1-color-h), var(--dynamic-views-property-1-color-s), var(--dynamic-views-property-1-color-l));
    --dynamic-views-property-1-color-hover: hsl(calc(var(--dynamic-views-property-1-color-h) - 3), calc(var(--dynamic-views-property-1-color-s) * 1.02), calc(var(--dynamic-views-property-1-color-l) * 1.15));

    --dynamic-views-property-2-color: hsl(var(--dynamic-views-property-2-color-h), var(--dynamic-views-property-2-color-s), var(--dynamic-views-property-2-color-l));
    --dynamic-views-property-2-color-hover: hsl(calc(var(--dynamic-views-property-2-color-h) - 3), calc(var(--dynamic-views-property-2-color-s) * 1.02), calc(var(--dynamic-views-property-2-color-l) * 1.15));

    --dynamic-views-property-3-color: hsl(var(--dynamic-views-property-3-color-h), var(--dynamic-views-property-3-color-s), var(--dynamic-views-property-3-color-l));
    --dynamic-views-property-3-color-hover: hsl(calc(var(--dynamic-views-property-3-color-h) - 3), calc(var(--dynamic-views-property-3-color-s) * 1.02), calc(var(--dynamic-views-property-3-color-l) * 1.15));

    --dynamic-views-property-4-color: hsl(var(--dynamic-views-property-4-color-h), var(--dynamic-views-property-4-color-s), var(--dynamic-views-property-4-color-l));
    --dynamic-views-property-4-color-hover: hsl(calc(var(--dynamic-views-property-4-color-h) - 3), calc(var(--dynamic-views-property-4-color-s) * 1.02), calc(var(--dynamic-views-property-4-color-l) * 1.15));
}

/* ============================================
   PLUGIN SETTINGS STYLES
   ============================================ */

/* Add border-bottom to Appearance heading */
.dynamic-views-appearance-heading {
    border-bottom: 1px solid var(--background-modifier-border);
    padding-bottom: 12px;
    margin-bottom: 12px;
}

/* ============================================
   DATACORE EXPLORER STYLES
   ============================================ */

/* ============================================
   BASES VIEW PADDING
   Match built-in Bases Cards view padding
   ============================================ */

.bases-view[data-view-type="dynamic-views-card"],
.bases-view[data-view-type="dynamic-views-masonry"] {
    --bases-view-padding: var(--size-4-3);
    --bases-embed-padding: var(--size-4-1) 1px;
}

/* ============================================
   FOCUS & ACCESSIBILITY STYLES
   ============================================ */

.dynamic-views button:not(.clickable-icon) {
    box-shadow: none !important;
}

.dynamic-views button:focus-visible,
.dynamic-views [role="button"]:focus-visible {
    outline: 2px solid var(--background-modifier-border-focus);
    outline-offset: 2px;
}

.dynamic-views [role="menuitem"]:focus-visible {
    outline: 2px solid var(--background-modifier-border-focus);
    outline-offset: -2px;
    border-radius: 0;
}

.dynamic-views [role="menuitem"]:first-child:focus-visible {
    border-radius: 5px 5px 0 0;
}

.dynamic-views [role="menuitem"]:last-child:focus-visible {
    border-radius: 0 0 5px 5px;
}

.dynamic-views [role="menuitem"]:only-child:focus-visible {
    border-radius: 5px;
}

.dynamic-views [role="checkbox"]:focus-visible {
    outline: 2px solid var(--background-modifier-border-focus);
    outline-offset: 2px;
}

.dynamic-views .writing-card:focus-visible {
    outline: 2px solid var(--background-modifier-border-focus);
    outline-offset: -2px;
}


/* ============================================
   CONTAINER & LAYOUT STYLES
   ============================================ */

/* Results container with fade effect */
.dynamic-views .results-container {
    position: relative;
}

.dynamic-views .results-container.with-fade::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 80px;
    background: linear-gradient(to bottom, transparent, var(--background-primary));
    pointer-events: none;
}

/* Enable container queries for responsive button visibility */
.markdown-preview-view,
.markdown-reading-view,
.markdown-source-view {
    container-type: inline-size;
}

/* Minimal-style width system: CSS variables control container width */
body {
    --container-datacorejsx-width: 100%;
    --container-datacorejsx-max-width: 100%;
}

/* Helper classes set width variables (applied to section) */
.dc-wide {
    --container-datacorejsx-width: min(calc(1.75 * var(--file-line-width)), 100%);
    --container-datacorejsx-max-width: min(calc(1.75 * var(--file-line-width)), 100%);
}

.dc-max {
    --container-datacorejsx-width: 100%;
    --container-datacorejsx-max-width: 100%;
}

/* Constrain element wrappers to normal width (Reading View) */
.markdown-preview-view.dc-wide .markdown-preview-sizer > *:not(.el-pre):not(:has(.block-language-datacorejsx)),
.markdown-preview-view.dc-max .markdown-preview-sizer > *:not(.el-pre):not(:has(.block-language-datacorejsx)),
.markdown-reading-view.dc-wide .markdown-reading-sizer > *:not(.el-pre):not(:has(.block-language-datacorejsx)),
.markdown-reading-view.dc-max .markdown-reading-sizer > *:not(.el-pre):not(:has(.block-language-datacorejsx)) {
    max-width: var(--file-line-width, 45rem) !important;
    margin-left: auto !important;
    margin-right: auto !important;
}

/* Expand sizer in wide and max modes (Reading View) */
.markdown-preview-view.dc-wide .markdown-preview-sizer,
.markdown-reading-view.dc-wide .markdown-reading-sizer {
    max-width: min(calc(1.75 * var(--file-line-width)), 96vw) !important;
}

.markdown-preview-view.dc-max .markdown-preview-sizer,
.markdown-reading-view.dc-max .markdown-reading-sizer {
    max-width: 96vw !important;
}

/* Live Preview: DON'T expand cm-sizer/cm-content (would affect whole note) */
/* Only expand the specific code block wrapper below */

/* Allow code block to overflow in wide/max modes */
.markdown-source-view.dc-wide .cm-contentContainer,
.markdown-source-view.dc-max .cm-contentContainer,
.markdown-source-view.dc-wide .cm-content,
.markdown-source-view.dc-max .cm-content {
    overflow: visible !important;
}

/* Reading View wrappers */
/* Wide mode: expand wrapper (sizer already expanded above) */
.markdown-preview-view.dc-wide .el-pre:has(.block-language-datacorejsx),
.markdown-reading-view.dc-wide .el-pre:has(.block-language-datacorejsx) {
    max-width: var(--container-datacorejsx-max-width) !important;
    width: var(--container-datacorejsx-width) !important;
    margin-left: auto !important;
    margin-right: auto !important;
}

/* Max mode: expand sizer, then expand wrapper */
.markdown-preview-view.dc-max .el-pre:has(.block-language-datacorejsx),
.markdown-reading-view.dc-max .el-pre:has(.block-language-datacorejsx) {
    max-width: var(--container-datacorejsx-max-width) !important;
    width: var(--container-datacorejsx-width) !important;
}

/* Live Preview: .cm-preview-code-block - use positioning to break out */
.markdown-source-view.dc-wide .cm-preview-code-block:has(.block-language-datacorejsx) {
    width: min(calc(1.75 * var(--file-line-width)), 96vw) !important;
    max-width: min(calc(1.75 * var(--file-line-width)), 96vw) !important;
    position: relative !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
}

.markdown-source-view.dc-max .cm-preview-code-block:has(.block-language-datacorejsx) {
    width: 96vw !important;
    max-width: 96vw !important;
    position: relative !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
}

/* Expand datacore block when wide/max active */
.markdown-preview-view.dc-wide .block-language-datacorejsx,
.markdown-preview-view.dc-max .block-language-datacorejsx,
.markdown-reading-view.dc-wide .block-language-datacorejsx,
.markdown-reading-view.dc-max .block-language-datacorejsx,
.markdown-source-view.dc-wide .block-language-datacorejsx,
.markdown-source-view.dc-max .block-language-datacorejsx {
    width: var(--container-datacorejsx-width) !important;
    max-width: var(--container-datacorejsx-max-width) !important;
    margin: 0 auto !important;
}

/* Default width for datacorejsx blocks (readable line width) */
.markdown-source-view.is-readable-line-width .cm-content > .block-language-datacorejsx,
.markdown-preview-view.is-readable-line-width .block-language-datacorejsx,
.markdown-reading-view.is-readable-line-width .block-language-datacorejsx {
    width: var(--container-datacorejsx-width);
    max-width: var(--container-datacorejsx-max-width);
    margin: 0 auto;
    transition: width 0.3s ease, max-width 0.3s ease;
}

.dynamic-views {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    min-height: 270px;
    overflow: visible;
}


/* ============================================
   TOOLBAR & CONTROLS STYLES
   ============================================ */

.dynamic-views .controls-wrapper {
    display: flex;
    flex-direction: column;
    gap: 8px;
    max-width: 100%;
    padding: 3px 0;
    position: relative;
    background-color: var(--background-primary);
    padding-bottom: 8px;
}

.dynamic-views .controls-wrapper.pinned {
    position: fixed !important;
    top: var(--sticky-top, 0);
    z-index: 1000 !important;
    background-color: var(--background-primary);
    box-shadow: 0 2px 8px var(--background-modifier-box-shadow);
    box-sizing: border-box;
    padding: 3px 0;
    will-change: transform;
    transform: translate3d(0, 0, 0);
}

.dynamic-views .controls-wrapper.scrolled::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    height: 20px;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.08) 0%, rgba(0, 0, 0, 0.04) 40%, rgba(0, 0, 0, 0.01) 70%, transparent 100%);
    mask-image: linear-gradient(to right, transparent 0px, black 40px, black calc(100% - 40px), transparent 100%);
    -webkit-mask-image: linear-gradient(to right, transparent 0px, black 40px, black calc(100% - 40px), transparent 100%);
    pointer-events: none;
    z-index: 10;
}

.theme-dark .dynamic-views .controls-wrapper.scrolled::after {
    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 40%, rgba(255, 255, 255, 0.01) 70%, transparent 100%);
}

.dynamic-views .bottom-controls {
    display: flex;
    align-items: center;
    gap: 8px;
    box-sizing: border-box;
}

.dynamic-views .view-controls-wrapper {
    display: flex;
    align-items: center;
    gap: 8px;
}


/* ============================================
   VIEW DROPDOWN
   ============================================ */

.dynamic-views .view-dropdown-wrapper {
    position: relative;
}

.dynamic-views .view-dropdown-btn {
    padding: 6px 12px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    background-color: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.2s;
    font-size: 0.9em;
    color: var(--text-normal);
    box-shadow: none;
    height: 30px;
    box-sizing: border-box;
}

.dynamic-views .view-dropdown-btn .chevron {
    opacity: 0.6;
}

.view-dropdown-btn:hover {
    background-color: var(--background-modifier-hover);
    border-color: var(--text-faint);
}

.dynamic-views .view-dropdown-menu {
    position: absolute;
    top: calc(100% + 4px);
    left: 0;
    background-color: var(--background-primary);
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    box-shadow: 0 4px 12px var(--background-modifier-box-shadow);
    z-index: 1000;
    min-width: 120px;
    overflow: hidden;
}

.dynamic-views .view-option {
    padding: 8px 12px;
    cursor: pointer;
    transition: background-color 0.2s;
    font-size: 0.9em;
    display: flex;
    align-items: center;
    gap: 8px;
}

.view-option:hover {
    background-color: var(--background-modifier-hover);
}


/* ============================================
   SORT DROPDOWN
   ============================================ */

.dynamic-views .sort-dropdown-wrapper {
    position: relative;
}

.dynamic-views .sort-dropdown-btn {
    padding: 6px 8px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    background-color: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 4px;
    transition: all 0.2s;
    color: var(--text-normal);
    box-shadow: none;
    height: 30px;
    box-sizing: border-box;
}

.dynamic-views .sort-dropdown-btn svg {
    flex-shrink: 0;
    width: 16px;
    height: 16px;
}

.dynamic-views .sort-dropdown-btn .chevron {
    width: 12px;
    height: 12px;
    opacity: 0.6;
}

.sort-dropdown-btn:hover {
    background-color: var(--background-modifier-hover);
    border-color: var(--text-faint);
}

.dynamic-views .sort-dropdown-menu {
    position: absolute;
    top: calc(100% + 4px);
    left: 0;
    background-color: var(--background-primary);
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    box-shadow: 0 4px 12px var(--background-modifier-box-shadow);
    z-index: 1000;
    min-width: 240px;
    overflow: hidden;
}

.dynamic-views .sort-option {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    cursor: pointer;
    transition: background-color 0.2s;
    font-size: 0.9em;
}

.sort-option:hover {
    background-color: var(--background-modifier-hover);
}

.dynamic-views .sort-option svg {
    flex-shrink: 0;
}


/* ============================================
   RESULTS COUNT & LIMIT CONTROLS
   ============================================ */

.dynamic-views .results-count-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 6px 8px;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s, opacity 0.2s, transform 0.2s ease, margin 0.3s ease;
}

@media (hover: hover) {
    .results-count-wrapper:hover {
        background-color: var(--background-modifier-hover);
        opacity: var(--icon-opacity-hover);
    }
}

.results-count-wrapper.active,
.results-count-wrapper-compact.active {
    background-color: var(--background-modifier-hover);
    opacity: var(--icon-opacity-hover);
}

.dynamic-views .results-count {
    font-size: 0.85em;
    color: var(--text-muted);
    white-space: nowrap;
}

.dynamic-views .results-count.limited {
    color: var(--interactive-accent);
}

.dynamic-views .results-count-chevron {
    color: var(--text-muted);
    opacity: 0.6;
    flex-shrink: 0;
}

.dynamic-views .limit-dropdown-menu {
    position: absolute;
    top: calc(100% + 4px);
    right: 0;
    background-color: var(--background-primary);
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    box-shadow: 0 4px 12px var(--background-modifier-box-shadow);
    z-index: 1000;
    min-width: 200px;
    padding: 8px 12px;
    display: flex;
    flex-direction: column;
    gap: 0;
    cursor: default;
}

.dynamic-views .limit-dropdown-menu > *:not(:last-child) {
    margin-bottom: 8px;
}

.dynamic-views .limit-dropdown-menu .limit-reset-button {
    margin-bottom: 0 !important;
}

.dynamic-views .limit-dropdown-label {
    font-size: 0.85em;
    color: var(--text-normal);
    font-weight: 500;
    cursor: default;
}

.dynamic-views .limit-dropdown-input {
    padding: 6px 10px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    background-color: var(--background-primary);
    color: var(--text-normal);
    font-size: 0.9em;
}

.limit-dropdown-input:focus {
    outline: none;
    border-color: var(--interactive-accent);
}

.dynamic-views .limit-reset-button {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px;
    cursor: pointer;
    border-radius: 6px;
    transition: background-color 0.2s;
}

.limit-reset-button:hover {
    background-color: var(--background-modifier-hover);
}

.limit-reset-button.disabled {
    opacity: 0.5;
    cursor: default;
}

.dynamic-views .limit-reset-button-icon {
    display: flex;
    align-items: center;
    color: var(--text-muted);
}

.dynamic-views .limit-reset-button-icon svg {
    width: 16px;
    height: 16px;
}

.dynamic-views .limit-reset-button-text {
    font-size: 0.9em;
    color: var(--text-normal);
}

.dynamic-views .limit-dropdown-menu .bases-toolbar-menu-item {
    margin: 0;
    padding: 8px;
    cursor: pointer;
    border-radius: 6px;
    transition: background-color 0.2s;
}

.dynamic-views .limit-dropdown-menu .bases-toolbar-menu-item:hover {
    background-color: var(--background-modifier-hover);
}


/* ============================================
   TOOLBAR BUTTONS
   ============================================ */

.dynamic-views .create-note-button {
    padding: 6px !important;
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    background-color: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    height: 30px;
    width: 30px;
    box-sizing: border-box;
}

.dynamic-views .create-note-button svg {
    width: 16px;
    height: 16px;
    color: var(--text-normal);
}

.dynamic-views .create-note-button:hover {
    border-color: var(--text-faint);
    background-color: var(--background-modifier-hover);
}

.dynamic-views .meta-controls {
    display: flex;
    gap: 8px;
    align-items: center;
    margin-left: auto;
}

.dynamic-views .settings-btn {
    padding: 6px !important;
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    background-color: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    box-shadow: none;
    height: 30px;
    width: 30px;
    box-sizing: border-box;
}

.dynamic-views .settings-btn svg {
    width: 16px;
    height: 16px;
    color: var(--text-normal);
}

.settings-btn:hover {
    background-color: var(--background-modifier-hover);
    border-color: var(--text-faint);
}

.dynamic-views .query-toggle-btn {
    padding: 6px !important;
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    background-color: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    box-shadow: none;
    height: 30px;
    width: 30px;
    box-sizing: border-box;
}

.dynamic-views .query-toggle-btn svg {
    width: 16px;
    height: 16px;
    color: var(--text-normal);
}

.query-toggle-btn:hover {
    border-color: var(--text-faint);
    background-color: var(--background-modifier-hover);
}

.dynamic-views .shuffle-btn {
    padding: 6px !important;
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    background-color: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    height: 30px;
    width: 30px;
    box-sizing: border-box;
}

.dynamic-views .shuffle-btn svg {
    width: 16px;
    height: 16px;
    color: var(--text-normal);
}

.shuffle-btn:hover {
    border-color: var(--text-faint);
    background-color: var(--background-modifier-hover);
}

.dynamic-views .open-random-btn {
    padding: 6px !important;
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    background-color: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    height: 30px;
    width: 30px;
    box-sizing: border-box;
}

.dynamic-views .open-random-btn svg {
    width: 16px;
    height: 16px;
    color: var(--text-normal);
}

.open-random-btn:hover {
    border-color: var(--text-faint);
    background-color: var(--background-modifier-hover);
}

.dynamic-views .width-toggle-btn {
    padding: 6px !important;
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    background-color: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    height: 30px;
    width: 30px;
    box-sizing: border-box;
}

.dynamic-views .width-toggle-btn svg {
    width: 16px;
    height: 16px;
    color: var(--text-normal);
}

.width-toggle-btn:hover {
    border-color: var(--text-faint);
    background-color: var(--background-modifier-hover);
}

.dynamic-views .pin-btn {
    padding: 6px !important;
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    background-color: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    height: 30px;
    width: 30px;
    box-sizing: border-box;
}

.dynamic-views .pin-btn svg {
    width: 16px;
    height: 16px;
    color: var(--text-normal);
}

.pin-btn:hover {
    border-color: var(--text-faint);
    background-color: var(--background-modifier-hover);
}

/* ============================================
   TOOLBAR VISIBILITY CONTROLS
   ============================================ */

/* Hide search filter when toggle is off */
body:not(.dynamic-views-show-search) .dynamic-views .search-controls,
body:not(.dynamic-views-show-search) .search-controls-compact {
    display: none !important;
}

/* Hide result count when toggle is off */
body:not(.dynamic-views-show-result-count) .dynamic-views .results-count-wrapper,
body:not(.dynamic-views-show-result-count) .results-count-wrapper-compact {
    display: none !important;
}

/* Hide create note button when toggle is off */
body:not(.dynamic-views-show-create-note) .dynamic-views .create-note-button,
body:not(.dynamic-views-show-create-note) .create-note-button-compact {
    display: none !important;
}

/* Hide shuffle button when toggle is off */
body:not(.dynamic-views-show-shuffle) .dynamic-views .shuffle-btn {
    display: none !important;
}

/* Hide random button when toggle is off */
body:not(.dynamic-views-show-random) .dynamic-views .open-random-btn {
    display: none !important;
}

/* Hide edit query button when toggle is off */
body:not(.dynamic-views-show-edit-query) .dynamic-views .query-toggle-btn {
    display: none !important;
}

/* Hide pin toolbar button when toggle is off */
body:not(.dynamic-views-show-pin-toolbar) .dynamic-views .pin-btn {
    display: none !important;
}

/* Hide expand width button when toggle is off */
body:not(.dynamic-views-show-expand-width) .dynamic-views .width-toggle-btn {
    display: none !important;
}


/* ============================================
   QUERY EDITOR
   ============================================ */

.dynamic-views .query-dropdown-wrapper {
    position: relative;
}

.dynamic-views .query-dropdown-menu {
    position: absolute;
    top: calc(100% + 4px);
    right: 0;
    background-color: var(--background-primary);
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    box-shadow: 0 4px 12px var(--background-modifier-box-shadow);
    z-index: 1000;
    width: 675px;
    max-width: calc(100vw - 16px);
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    box-sizing: border-box;
}

.dynamic-views .query-editor {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 12px;
    background-color: var(--background-primary-alt);
    border-radius: 8px;
    border: 1px solid var(--background-modifier-border);
    max-width: 900px;
    margin-left: auto;
    margin-right: 0;
    box-sizing: border-box;
}

.dynamic-views .query-input {
    width: 100%;
    padding: 6px 10px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    background-color: var(--background-primary);
    color: var(--text-normal);
    font-size: 0.9em;
    font-family: var(--font-monospace);
    resize: none;
    overflow: hidden;
    min-height: 32px;
}

.dynamic-views .query-footer {
    display: flex;
    align-items: center;
    gap: 12px;
    justify-content: space-between;
}

.dynamic-views .query-btn {
    padding: 6px 16px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    background-color: var(--background-primary);
    color: var(--text-normal);
    cursor: pointer;
    font-size: 0.9em;
    transition: background-color 0.2s, border-color 0.2s;
}

.query-btn:hover {
    background-color: var(--background-modifier-hover);
}

.dynamic-views .query-apply-btn {
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
    border-color: var(--interactive-accent);
}

.dynamic-views .query-apply-btn:hover {
    background-color: var(--interactive-accent-hover);
}

.dynamic-views .query-clear-btn {
    background-color: var(--background-secondary);
    color: var(--text-muted);
    border-color: var(--background-modifier-border);
}

.dynamic-views .query-clear-btn:hover {
    background-color: var(--background-modifier-hover);
    color: var(--text-normal);
}

.dynamic-views .query-tip {
    font-size: 0.8em;
    color: var(--text-faint);
    flex: 1;
    text-align: left;
}

.dynamic-views .query-error {
    font-family: var(--font-monospace);
    font-size: 0.85em;
    white-space: pre-wrap;
    word-wrap: break-word;
    margin: 16px 0;
    padding: 0;
    color: var(--text-muted);
    overflow-x: auto;
}


/* ============================================
   SETTINGS PANEL
   ============================================ */

.dynamic-views .settings-dropdown-wrapper {
    position: relative;
}

.dynamic-views .settings-dropdown-menu {
    position: absolute;
    top: calc(100% + 4px);
    right: 0;
    background-color: var(--background-primary);
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    box-shadow: 0 4px 12px var(--background-modifier-box-shadow);
    z-index: 1000;
    width: 500px;
    max-width: calc(100vw - 16px);
    max-height: min(500px, calc(100vh - 100px));
    overflow-y: auto;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    box-sizing: border-box;
}

.dynamic-views .settings-panel {
    display: flex !important;
    flex-direction: column !important;
    gap: 12px;
    padding: 16px;
    background-color: var(--background-primary-alt);
    border-radius: 8px;
    border: 1px solid var(--background-modifier-border);
    text-align: left !important;
    align-items: flex-start !important;
    max-width: 900px;
    box-sizing: border-box;
    margin-left: auto;
    margin-right: 0;
}

.dynamic-views .setting-item {
    display: flex !important;
    flex-direction: column !important;
    gap: 4px;
    align-items: flex-start !important;
    width: 100%;
    max-width: 100%;
    text-align: left !important;
    box-sizing: border-box;
}

.dynamic-views .setting-item-toggle {
    flex-direction: row !important;
    justify-content: space-between !important;
    align-items: center !important;
}

.dynamic-views .setting-item-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
    text-align: left !important;
}

.dynamic-views .setting-item label {
    font-size: 0.9em;
    color: var(--text-normal);
    font-weight: 500;
    text-align: left !important;
}

.dynamic-views .setting-item input[type="text"] {
    padding: 6px 10px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    background-color: var(--background-primary);
    color: var(--text-normal);
    font-size: 0.9em;
    box-sizing: border-box;
}

.dynamic-views .setting-item select {
    padding: 6px 10px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    background-color: var(--background-primary);
    color: var(--text-normal);
    cursor: pointer;
    font-size: 0.9em;
    box-sizing: border-box;
}

.dynamic-views .setting-desc {
    font-size: 0.8em;
    color: var(--text-faint);
    text-align: left !important;
}

.dynamic-views .setting-item-text {
    flex-direction: row !important;
    gap: 16px;
    align-items: flex-start !important;
}

.dynamic-views .setting-item-text .setting-item-info {
    flex: 1;
    min-width: 150px;
}

.dynamic-views .setting-text-input {
    width: 180px;
    max-width: 180px;
    flex-shrink: 1;
    padding: 6px 10px;
    border: 1px solid var(--background-modifier-border);
    box-sizing: border-box;
    border-radius: 4px;
    background-color: var(--background-primary);
    color: var(--text-normal);
    font-size: 0.9em;
}

.dynamic-views .dropdown {
    width: 180px;
    max-width: 180px;
    flex-shrink: 1;
}

.dynamic-views .toggle-switch {
    position: relative;
    display: inline-block;
    width: 44px;
    height: 24px;
    flex-shrink: 0;
}

.dynamic-views .toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.dynamic-views .toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--background-modifier-border);
    transition: 0.3s;
    border-radius: 24px;
}

.toggle-slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: var(--background-primary);
    transition: 0.3s;
    border-radius: 50%;
}

label.toggle-switch input[type="checkbox"]:checked + span.toggle-slider {
    background-color: var(--interactive-accent) !important;
}

.dynamic-views .toggle-switch input:checked + .toggle-slider:before {
    transform: translateX(20px);
}

.toggle-switch:hover .toggle-slider {
    opacity: 0.9;
}


/* ============================================
   SEARCH CONTROLS
   ============================================ */

.dynamic-views .search-controls {
    flex: 1;
    transition: opacity 0.3s ease, flex 0.3s ease, margin 0.3s ease;
    overflow: hidden;
    margin: 0 -3px;
    max-width: 400px;
}

.dynamic-views .search-input-container {
    position: relative;
    flex: 1;
    --search-icon-size: 16px;
    --search-icon-color: var(--text-normal);
    padding: 2px 3px;
}

.dynamic-views .search-input-container:before {
    display: none;
}

.dynamic-views .search-input-loupe-icon {
    position: absolute;
    left: 8px;
    top: 50%;
    transform: translateY(-50%);
    width: 16px;
    height: 16px;
    color: var(--text-muted);
    opacity: 0.7;
    pointer-events: none;
    z-index: 1;
}

.dynamic-views .desktop-search {
    width: 100%;
    padding: 6px 28px 6px 32px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    background-color: transparent;
    color: var(--text-normal);
    font-size: 0.9em;
    transition: all 0.2s;
    height: 30px;
    box-sizing: border-box;
    line-height: 1;
}

.dynamic-views .search-input-clear-button {
    position: absolute;
    right: 6px;
    top: 50%;
    transform: translateY(-50%);
    width: 16px;
    height: 16px;
    cursor: pointer;
    color: var(--text-muted);
    opacity: 0.7;
    transition: opacity 0.2s, color 0.2s;
    display: block;
}

.search-input-clear-button:hover {
    opacity: 1;
    color: var(--text-normal);
}

.desktop-search:hover {
    border-color: var(--text-muted);
}

.desktop-search:focus {
    border-color: var(--interactive-accent);
}

.dynamic-views .desktop-search::placeholder {
    color: var(--text-faint);
}


/* ============================================
   VIEW-SPECIFIC STYLES: CARD VIEW
   ============================================ */

/* Unified grid layout for all grid views (all width modes) */
.bases-view[data-view-type="dynamic-views-card"] .cards-feed,
.dynamic-views .cards-feed {
    display: grid;
    grid-template-columns: repeat(var(--grid-columns, 1), 1fr);
    gap: 8px;
    align-items: stretch;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
}

/* Grid mode: remove margins (gap handles spacing) and set flexbox layout */
.bases-view[data-view-type="dynamic-views-card"] .cards-feed .writing-card,
.dynamic-views .cards-feed .writing-card {
    margin: 0 !important;
    display: flex;
    flex-direction: column;
    height: 100%;
    min-width: 0;
    overflow: hidden;
}

/* Grid mode: push properties to bottom of card */
.bases-view[data-view-type="dynamic-views-card"] .cards-feed .writing-card .snippet-container ~ .card-properties,
.dynamic-views .cards-feed .writing-card .snippet-container ~ .card-properties,
.bases-view[data-view-type="dynamic-views-card"] .cards-feed .writing-card .writing-title ~ .card-properties,
.dynamic-views .cards-feed .writing-card .writing-title ~ .card-properties {
    margin-top: auto;
    padding-top: var(--dynamic-views-element-spacing, 8px);
}

.dynamic-views .writing-card {
    border: 1px solid var(--dynamic-views-card-border-color, var(--background-modifier-border));
    border-radius: var(--dynamic-views-card-border-radius, 6px);
    padding: 12px;
    margin: var(--dynamic-views-card-spacing, 8px) 0;
    background-color: var(--background-primary-alt);
    break-inside: avoid;
    page-break-inside: avoid;
    transition: border-color 0.2s;
}

/* Global spacing between card elements */
.dynamic-views .writing-card > * + * {
    margin-top: var(--dynamic-views-element-spacing, 8px);
}

/* Card background options */
body.dynamic-views-card-background-transparent .dynamic-views .writing-card {
    background-color: transparent;
}

body.dynamic-views-card-background-custom .dynamic-views .writing-card {
    background-color: var(--dynamic-views-card-background-custom-color, #1e1e1e);
}

/* Snippet container flexbox in grid mode to push properties to bottom */
.dc-wide .dynamic-views .cards-feed .snippet-container,
.dc-max .dynamic-views .cards-feed .snippet-container {
    flex-grow: 1;
}

@media (hover: hover) {
    .writing-card:hover {
        border-color: var(--dynamic-views-card-border-color-hover, var(--text-faint));
    }
}

/* No border when toggle is off */
body:not(.dynamic-views-card-border) .dynamic-views .writing-card {
    border-color: transparent;
}

@media (hover: hover) {
    body:not(.dynamic-views-card-border) .writing-card:hover {
        border-color: transparent;
    }
}

.dynamic-views .writing-title {
    font-weight: calc(var(--font-weight) + var(--bold-modifier));
    color: var(--dynamic-views-title-color, var(--bold-color));
    font-family: var(--dynamic-views-title-font, inherit);
    font-size: var(--dynamic-views-title-font-size, var(--font-ui-medium));
    max-width: 100%;
    word-break: break-word;
}

.dynamic-views .card-title-link {
    text-decoration: none !important;
    color: var(--dynamic-views-title-color, var(--bold-color)) !important;
    font-weight: calc(var(--font-weight) + var(--bold-modifier));
    display: block;
    width: 100%;
}

.dynamic-views .card-title-link .title-text {
    display: -webkit-box;
    -webkit-line-clamp: var(--dynamic-views-title-lines, 2);
    -webkit-box-orient: vertical;
    overflow: hidden;
    word-break: break-word;
}

@media (hover: hover) {
    .dynamic-views .card-title-link:hover {
        color: var(--text-normal) !important;
    }
    body.dynamic-views-open-on-title .dynamic-views .card-title-link:hover .title-text {
        text-decoration: underline !important;
    }
}

.dynamic-views .snippet-container {
    display: flex;
    flex-direction: row;
    gap: var(--dynamic-views-element-spacing, 8px);
}

/* Thumbnail positioning (controlled by body class from Style Settings) */
body.dynamic-views-thumbnail-left .dynamic-views .snippet-container {
    flex-direction: row-reverse;
}

body.dynamic-views-thumbnail-right .dynamic-views .snippet-container {
    flex-direction: row;
}

.dynamic-views .writing-snippet {
    color: var(--dynamic-views-text-preview-color, var(--text-muted));
    font-family: var(--dynamic-views-text-preview-font, inherit);
    font-size: var(--dynamic-views-text-preview-font-size, var(--bases-table-font-size));
    flex: 1;
    min-width: 0;
    display: -webkit-box;
    -webkit-line-clamp: var(--dynamic-views-text-preview-lines, 5);
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.4;
    word-break: break-word;
    overflow-wrap: break-word;
}

.dynamic-views .card-thumbnail {
    flex-shrink: 0;
    width: var(--dynamic-views-thumbnail-size, 80px);
    height: calc(var(--dynamic-views-thumbnail-size, 80px) / var(--dynamic-views-thumbnail-aspect-ratio, 1.00));
    overflow: hidden;
    border-radius: var(--dynamic-views-thumbnail-border-radius, 4px);
    pointer-events: none;
}

.dynamic-views .card-thumbnail-placeholder {
    flex-shrink: 0;
    width: var(--dynamic-views-thumbnail-size, 80px);
    height: calc(var(--dynamic-views-thumbnail-size, 80px) / var(--dynamic-views-thumbnail-aspect-ratio, 1.00));
    border-radius: var(--dynamic-views-thumbnail-border-radius, 4px);
    background-color: var(--background-modifier-border);
}

.dynamic-views .card-thumbnail.multi-image,
.dynamic-views .card-thumbnail-placeholder.multi-image {
    box-shadow: 0 3px 16px rgba(0, 0, 0, 0.4);
}

.theme-dark .dynamic-views .card-thumbnail.multi-image,
.theme-dark .dynamic-views .card-thumbnail-placeholder.multi-image {
    box-shadow: 0 3px 18px rgba(255, 255, 255, 0.45);
}

.is-mobile .dynamic-views .card-thumbnail.multi-image,
.is-mobile .dynamic-views .card-thumbnail-placeholder.multi-image,
.is-mobile.theme-dark .dynamic-views .card-thumbnail.multi-image,
.is-mobile.theme-dark .dynamic-views .card-thumbnail-placeholder.multi-image {
    box-shadow: none;
    pointer-events: none;
}

.dynamic-views .card-thumbnail .image-embed {
    width: 100%;
    height: 100%;
}

.dynamic-views .card-thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    pointer-events: auto;
}

/* Thumbnail expand on click */
body.dynamic-views-thumbnail-expand-click .dynamic-views .card-thumbnail img {
    cursor: zoom-in;
}

body.dynamic-views-thumbnail-expand-click .dynamic-views .image-embed:active {
    background: var(--background-primary);
    cursor: zoom-out;
    display: block;
    z-index: 200;
    position: fixed;
    max-height: 100%;
    max-width: 100%;
    height: auto;
    width: auto;
    object-fit: contain;
    margin: 0 auto;
    text-align: center;
    padding: 0;
    left: 0;
    right: 0;
    top: 0%;
    bottom: 0;
}

body.dynamic-views-thumbnail-expand-click .dynamic-views .image-embed:active img {
    top: 50%;
    transform: translateY(-50%);
    padding: 0;
    margin: 0 auto;
    width: auto;
    height: auto;
    max-height: min(100%, 100vh);
    max-width: min(100%, 100vw);
    object-fit: contain;
    left: 0;
    right: 0;
    bottom: 0;
    position: absolute;
    opacity: 1;
}

/* Cover-specific zoom override (higher specificity needed) */
body.dynamic-views-thumbnail-expand-click .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed:active {
    background: var(--background-primary);
    cursor: zoom-out;
    display: block;
    z-index: 200;
    position: fixed;
    max-height: 100%;
    max-width: 100%;
    height: auto;
    width: auto;
    object-fit: contain;
    margin: 0 auto;
    text-align: center;
    padding: 0;
    left: 0;
    right: 0;
    top: 0%;
    bottom: 0;
}

body.dynamic-views-thumbnail-expand-click .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed:active img {
    top: 50%;
    transform: translateY(-50%);
    padding: 0;
    margin: 0 auto;
    width: auto;
    height: auto;
    max-height: min(100%, 100vh);
    max-width: min(100%, 100vw);
    object-fit: contain;
    left: 0;
    right: 0;
    bottom: 0;
    position: absolute;
    opacity: 1;
}

/* Zoom with cover background: Blur */
body.dynamic-views-thumbnail-expand-click.dynamic-views-bases-cards-cover-background-on-zoom.dynamic-views-cover-bg-blur .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed:active::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: var(--cover-image-url);
    background-size: cover;
    background-position: center;
    filter: blur(20px) brightness(0.7);
    transform: scale(1.1);
    z-index: 0;
}

.theme-dark body.dynamic-views-thumbnail-expand-click.dynamic-views-bases-cards-cover-background-on-zoom.dynamic-views-cover-bg-blur .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed:active::before {
    filter: blur(20px) brightness(0.5);
}

/* Zoom with cover background: Ambient */
body.dynamic-views-thumbnail-expand-click.dynamic-views-bases-cards-cover-background-on-zoom.dynamic-views-cover-bg-ambient .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed:active {
    background: var(--ambient-color, var(--background-secondary)) !important;
}

/* Zoom with cover background: Custom color */
body.dynamic-views-thumbnail-expand-click.dynamic-views-bases-cards-cover-background-on-zoom.dynamic-views-cover-bg-custom .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed:active {
    background: var(--bases-cards-cover-background, var(--background-secondary)) !important;
}

/* Zoom with Transparent background: Always use default (override toggle) */
body.dynamic-views-thumbnail-expand-click.dynamic-views-cover-bg-transparent .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed:active {
    background: var(--background-primary) !important;
}

/* Thumbnail crop alignment (controlled by body class from Style Settings) */
body.dynamic-views-thumbnail-crop-top .dynamic-views .card-thumbnail img {
    object-position: center top;
}

body.dynamic-views-thumbnail-crop-center .dynamic-views .card-thumbnail img {
    object-position: center center;
}

body.dynamic-views-thumbnail-crop-bottom .dynamic-views .card-thumbnail img {
    object-position: center bottom;
}

/* Cover crop alignment (controlled by body class from Style Settings) */
body.dynamic-views-cover-crop-top .dynamic-views .writing-card.image-format-cover .card-thumbnail img {
    object-position: center top;
}

body.dynamic-views-cover-crop-center .dynamic-views .writing-card.image-format-cover .card-thumbnail img {
    object-position: center center;
}

body.dynamic-views-cover-crop-bottom .dynamic-views .writing-card.image-format-cover .card-thumbnail img {
    object-position: center bottom;
}

/* Cover fit mode (top/bottom): Contain mode - all images use object-fit: contain */
body.dynamic-views-cover-top.dynamic-views-cover-contain-tb .dynamic-views .writing-card.image-format-cover .card-thumbnail img,
body.dynamic-views-cover-bottom.dynamic-views-cover-contain-tb .dynamic-views .writing-card.image-format-cover .card-thumbnail img {
    object-fit: contain;
    object-position: center;
    position: relative;
    z-index: 1;
}

/* Cover background: Blur */
body.dynamic-views-cover-top.dynamic-views-cover-contain-tb.dynamic-views-cover-bg-blur .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed::before,
body.dynamic-views-cover-bottom.dynamic-views-cover-contain-tb.dynamic-views-cover-bg-blur .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: var(--cover-image-url);
    background-size: cover;
    background-position: center;
    filter: blur(20px) brightness(0.7);
    transform: scale(1.1);
    z-index: 0;
}

.theme-dark body.dynamic-views-cover-top.dynamic-views-cover-contain-tb.dynamic-views-cover-bg-blur .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed::before,
.theme-dark body.dynamic-views-cover-bottom.dynamic-views-cover-contain-tb.dynamic-views-cover-bg-blur .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed::before {
    filter: blur(20px) brightness(0.5);
}

/* Cover background: Ambient */
body.dynamic-views-cover-top.dynamic-views-cover-contain-tb.dynamic-views-cover-bg-ambient .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed,
body.dynamic-views-cover-bottom.dynamic-views-cover-contain-tb.dynamic-views-cover-bg-ambient .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed {
    background: var(--ambient-color, var(--background-secondary));
}

/* Cover background: Transparent (no background) */
body.dynamic-views-cover-top.dynamic-views-cover-contain-tb.dynamic-views-cover-bg-transparent .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed,
body.dynamic-views-cover-bottom.dynamic-views-cover-contain-tb.dynamic-views-cover-bg-transparent .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed {
    background: transparent;
}

/* Cover background: Custom color */
body.dynamic-views-cover-top.dynamic-views-cover-contain-tb.dynamic-views-cover-bg-custom .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed,
body.dynamic-views-cover-bottom.dynamic-views-cover-contain-tb.dynamic-views-cover-bg-custom .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed {
    background: var(--bases-cards-cover-background, var(--background-secondary));
}

/* Cover fit mode (left/right): Contain mode - all images use object-fit: contain */
body.dynamic-views-cover-left.dynamic-views-cover-contain-lr .dynamic-views .writing-card.image-format-cover .card-thumbnail img,
body.dynamic-views-cover-right.dynamic-views-cover-contain-lr .dynamic-views .writing-card.image-format-cover .card-thumbnail img {
    object-fit: contain;
    object-position: center;
    position: relative;
    z-index: 1;
}

/* Cover background: Blur (left/right) */
body.dynamic-views-cover-left.dynamic-views-cover-contain-lr.dynamic-views-cover-bg-blur .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed::before,
body.dynamic-views-cover-right.dynamic-views-cover-contain-lr.dynamic-views-cover-bg-blur .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: var(--cover-image-url);
    background-size: cover;
    background-position: center;
    filter: blur(20px) brightness(0.7);
    transform: scale(1.1);
    z-index: 0;
}

.theme-dark body.dynamic-views-cover-left.dynamic-views-cover-contain-lr.dynamic-views-cover-bg-blur .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed::before,
.theme-dark body.dynamic-views-cover-right.dynamic-views-cover-contain-lr.dynamic-views-cover-bg-blur .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed::before {
    filter: blur(20px) brightness(0.5);
}

/* Cover background: Ambient (left/right) */
body.dynamic-views-cover-left.dynamic-views-cover-contain-lr.dynamic-views-cover-bg-ambient .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed,
body.dynamic-views-cover-right.dynamic-views-cover-contain-lr.dynamic-views-cover-bg-ambient .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed {
    background: var(--ambient-color, var(--background-secondary));
}

/* Cover background: Transparent (left/right) */
body.dynamic-views-cover-left.dynamic-views-cover-contain-lr.dynamic-views-cover-bg-transparent .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed,
body.dynamic-views-cover-right.dynamic-views-cover-contain-lr.dynamic-views-cover-bg-transparent .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed {
    background: transparent;
}

/* Cover background: Custom color (left/right) */
body.dynamic-views-cover-left.dynamic-views-cover-contain-lr.dynamic-views-cover-bg-custom .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed,
body.dynamic-views-cover-right.dynamic-views-cover-contain-lr.dynamic-views-cover-bg-custom .dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed {
    background: var(--bases-cards-cover-background, var(--background-secondary));
}

/* Flexible cover height for masonry (remove letterbox for wide images) - top/bottom contain mode only */
body.dynamic-views-masonry-flexible-cover-height.dynamic-views-cover-top.dynamic-views-cover-contain-tb [data-view-type="dynamic-views-masonry"] .writing-card.image-format-cover .card-thumbnail,
body.dynamic-views-masonry-flexible-cover-height.dynamic-views-cover-bottom.dynamic-views-cover-contain-tb [data-view-type="dynamic-views-masonry"] .writing-card.image-format-cover .card-thumbnail {
    padding-top: calc(var(--actual-aspect-ratio, var(--dynamic-views-image-aspect-ratio, 0.55)) * (100% + 2px)) !important;
}

/* Only apply flexible height margin-top to TOP covers with thumbnails */
body.dynamic-views-masonry-flexible-cover-height.dynamic-views-cover-top.dynamic-views-cover-contain-tb [data-view-type="dynamic-views-masonry"] .writing-card.image-format-cover:has(.card-thumbnail) .writing-title {
    margin-top: calc(var(--actual-aspect-ratio, var(--dynamic-views-image-aspect-ratio, 0.55)) * (100% + 26px) - 1px) !important;
}

/* Apply flexible height margin-bottom to BOTTOM covers with thumbnails */
body.dynamic-views-masonry-flexible-cover-height.dynamic-views-cover-bottom.dynamic-views-cover-contain-tb [data-view-type="dynamic-views-masonry"] .writing-card.image-format-cover:has(.card-thumbnail) .card-properties {
    margin-bottom: calc(var(--actual-aspect-ratio, var(--dynamic-views-image-aspect-ratio, 0.55)) * (100% + 26px) - 1px) !important;
}

/* Cover image format */
.dynamic-views .writing-card.image-format-cover {
    position: relative;
    overflow: hidden;
}

.dynamic-views .writing-card.image-format-cover .snippet-container {
    flex-direction: row;
    gap: var(--dynamic-views-element-spacing, 8px);
}

.dynamic-views .writing-card.image-format-cover:has(.card-thumbnail) .writing-title,
body.dynamic-views-show-cover-placeholder-grid .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-both .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-masonry .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-both .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title {
    margin-top: calc(var(--dynamic-views-image-aspect-ratio, 0.55) * (100% + 26px) - 1px);
}

.dynamic-views .writing-card.image-format-cover .card-thumbnail {
    position: absolute;
    top: -13px;
    left: -1px;
    width: calc(100% + 2px) !important;
    height: 0;
    padding-top: calc(var(--dynamic-views-image-aspect-ratio, 0.55) * (100% + 2px)) !important;
    border-radius: var(--dynamic-views-card-border-radius, 6px) var(--dynamic-views-card-border-radius, 6px) 0 0;
    margin: 0;
    overflow: hidden;
}

/* Hide placeholder by default, reset thumbnail mode styles for cover format */
.dynamic-views .writing-card.image-format-cover .card-thumbnail-placeholder {
    display: none;
    width: auto;
    height: auto;
    background-color: transparent;
}

/* Show placeholder for top/bottom covers in grid view */
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-top .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-top .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-bottom .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bottom .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder {
    display: block;
    position: absolute;
    top: -13px;
    left: -1px;
    width: calc(100% + 2px) !important;
    height: 0 !important;
    padding-top: calc(var(--dynamic-views-image-aspect-ratio, 0.55) * (100% + 2px)) !important;
    border-radius: var(--dynamic-views-card-border-radius, 6px) var(--dynamic-views-card-border-radius, 6px) 0 0;
    margin: 0;
    overflow: hidden;
}

/* Show placeholder for top/bottom covers in masonry view */
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-top .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-top .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-bottom .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bottom .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder {
    display: block;
    position: absolute;
    top: -13px;
    left: -1px;
    width: calc(100% + 2px) !important;
    height: 0 !important;
    padding-top: calc(var(--dynamic-views-image-aspect-ratio, 0.55) * (100% + 2px)) !important;
    border-radius: var(--dynamic-views-card-border-radius, 6px) var(--dynamic-views-card-border-radius, 6px) 0 0;
    margin: 0;
    overflow: hidden;
}

/* Show placeholder for left/right covers in grid view */
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-left .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-left .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-right .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-right .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder {
    display: block;
}

/* Show placeholder for left/right covers in masonry view */
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-left .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-left .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-right .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-right .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder {
    display: block;
}

/* Placeholder color mappings - simplified by grouping similar outcomes */

/* Blur/Ambient cover + Tinted card = --background-primary */
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-bg-blur.dynamic-views-card-background-tinted .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-blur.dynamic-views-card-background-tinted .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-bg-ambient.dynamic-views-card-background-tinted .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-ambient.dynamic-views-card-background-tinted .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-bg-blur.dynamic-views-card-background-tinted .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-blur.dynamic-views-card-background-tinted .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-bg-ambient.dynamic-views-card-background-tinted .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-ambient.dynamic-views-card-background-tinted .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder {
    background-color: var(--background-primary);
}

/* Blur/Ambient/Custom cover (non-Tinted card) = --bases-cards-cover-background */
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-bg-blur .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-blur .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-bg-ambient .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-ambient .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-bg-custom .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-custom .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-bg-blur .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-blur .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-bg-ambient .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-ambient .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-bg-custom .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-custom .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder {
    background-color: var(--bases-cards-cover-background);
}

/* Transparent cover = match card background */
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-bg-transparent.dynamic-views-card-background-tinted .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-transparent.dynamic-views-card-background-tinted .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-bg-transparent.dynamic-views-card-background-tinted .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-transparent.dynamic-views-card-background-tinted .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder {
    background-color: var(--background-primary-alt);
}

body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-bg-transparent.dynamic-views-card-background-transparent .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-transparent.dynamic-views-card-background-transparent .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-bg-transparent.dynamic-views-card-background-ambient .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-transparent.dynamic-views-card-background-ambient .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-bg-transparent.dynamic-views-card-background-transparent .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-transparent.dynamic-views-card-background-transparent .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-bg-transparent.dynamic-views-card-background-ambient .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-transparent.dynamic-views-card-background-ambient .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder {
    background-color: transparent;
}

body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-bg-transparent.dynamic-views-card-background-custom .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-transparent.dynamic-views-card-background-custom .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-bg-transparent.dynamic-views-card-background-custom .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bg-transparent.dynamic-views-card-background-custom .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder {
    background-color: var(--dynamic-views-card-background-custom-color, #1e1e1e);
}

.dynamic-views .writing-card.image-format-cover .card-thumbnail .image-embed {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.dynamic-views .writing-card.image-format-cover .card-thumbnail img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Cover position: bottom */
body.dynamic-views-cover-bottom .dynamic-views .writing-card.image-format-cover .writing-title {
    margin-top: 0;
}

/* Override placeholder title margin-top for bottom covers to match image cards in grid */
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-bottom .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bottom .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title {
    margin-top: 0;
}

body.dynamic-views-cover-bottom .dynamic-views .writing-card.image-format-cover .card-thumbnail,
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-bottom .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bottom .dynamic-views .cards-feed .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-bottom .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bottom .dynamic-views .cards-masonry .writing-card.image-format-cover .card-thumbnail-placeholder {
    top: auto;
    bottom: -13px;
    border-radius: 0 0 var(--dynamic-views-card-border-radius, 6px) var(--dynamic-views-card-border-radius, 6px);
}

/* Bottom covers: margin-bottom on properties to reserve space for cover/placeholder in grid */
body.dynamic-views-cover-bottom .dynamic-views .writing-card.image-format-cover:has(.card-thumbnail) .card-properties,
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-bottom .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .card-properties,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-bottom .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .card-properties {
    margin-bottom: calc(var(--dynamic-views-image-aspect-ratio, 0.55) * (100% + 26px) - 1px);
}

/* Cover position: left */
body.dynamic-views-cover-left .dynamic-views .writing-card.image-format-cover:has(.card-thumbnail),
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-left .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder),
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-left .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder),
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-left .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder),
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-left .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) {
    min-height: var(--dynamic-views-side-cover-min-height, 175px);
}

body.dynamic-views-cover-left .dynamic-views .writing-card.image-format-cover:has(.card-thumbnail) .writing-title,
body.dynamic-views-cover-left .dynamic-views .writing-card.image-format-cover:has(.card-thumbnail) .snippet-container,
body.dynamic-views-cover-left .dynamic-views .writing-card.image-format-cover:has(.card-thumbnail) .card-properties,
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-left .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-left .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-left .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .snippet-container,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-left .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .snippet-container,
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-left .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .card-properties,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-left .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .card-properties,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-left .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-left .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-left .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .snippet-container,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-left .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .snippet-container,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-left .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .card-properties,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-left .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .card-properties {
    margin-left: calc((var(--dynamic-views-side-cover-ratio, 0.50) / (var(--dynamic-views-side-cover-ratio, 0.50) + 1) * 100%) + var(--dynamic-views-element-spacing, 8px));
}

body.dynamic-views-cover-left .dynamic-views .writing-card.image-format-cover .writing-title {
    margin-top: 0;
}

/* Override placeholder title margin-top for left covers to match image cards */
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-left .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-left .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-left .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-left .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title {
    margin-top: 0;
}

body.dynamic-views-cover-left .dynamic-views .writing-card.image-format-cover .card-properties {
    margin-bottom: 0;
}

body.dynamic-views-cover-left .dynamic-views .writing-card.image-format-cover .card-thumbnail,
body.dynamic-views-cover-left .dynamic-views .writing-card.image-format-cover .card-thumbnail-placeholder {
    position: absolute;
    top: 0 !important;
    left: 0 !important;
    width: calc(var(--dynamic-views-side-cover-ratio, 0.50) / (var(--dynamic-views-side-cover-ratio, 0.50) + 1) * 100%) !important;
    height: 100% !important;
    padding: 0 !important;
    padding-top: 0 !important;
    margin: 0;
    border-radius: 0 !important;
}

/* Cover position: right */
body.dynamic-views-cover-right .dynamic-views .writing-card.image-format-cover:has(.card-thumbnail),
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-right .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder),
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-right .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder),
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-right .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder),
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-right .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) {
    min-height: var(--dynamic-views-side-cover-min-height, 175px);
}

body.dynamic-views-cover-right .dynamic-views .writing-card.image-format-cover:has(.card-thumbnail) .writing-title,
body.dynamic-views-cover-right .dynamic-views .writing-card.image-format-cover:has(.card-thumbnail) .snippet-container,
body.dynamic-views-cover-right .dynamic-views .writing-card.image-format-cover:has(.card-thumbnail) .card-properties,
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-right .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-right .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-right .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .snippet-container,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-right .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .snippet-container,
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-right .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .card-properties,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-right .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .card-properties,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-right .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-right .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-right .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .snippet-container,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-right .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .snippet-container,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-right .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .card-properties,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-right .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .card-properties {
    margin-right: calc((var(--dynamic-views-side-cover-ratio, 0.50) / (var(--dynamic-views-side-cover-ratio, 0.50) + 1) * 100%) + var(--dynamic-views-element-spacing, 8px));
}

body.dynamic-views-cover-right .dynamic-views .writing-card.image-format-cover .writing-title {
    margin-top: 0;
}

/* Override placeholder title margin-top for right covers to match image cards */
body.dynamic-views-show-cover-placeholder-grid.dynamic-views-cover-right .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-right .dynamic-views .cards-feed .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-masonry.dynamic-views-cover-right .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title,
body.dynamic-views-show-cover-placeholder-both.dynamic-views-cover-right .dynamic-views .cards-masonry .writing-card.image-format-cover:has(.card-thumbnail-placeholder) .writing-title {
    margin-top: 0;
}

body.dynamic-views-cover-right .dynamic-views .writing-card.image-format-cover .card-properties {
    margin-bottom: 0;
}

body.dynamic-views-cover-right .dynamic-views .writing-card.image-format-cover .card-thumbnail,
body.dynamic-views-cover-right .dynamic-views .writing-card.image-format-cover .card-thumbnail-placeholder {
    position: absolute;
    top: 0 !important;
    left: auto !important;
    right: 0 !important;
    width: calc(var(--dynamic-views-side-cover-ratio, 0.50) / (var(--dynamic-views-side-cover-ratio, 0.50) + 1) * 100%) !important;
    height: 100% !important;
    padding: 0 !important;
    padding-top: 0 !important;
    margin: 0;
    border-radius: 0 !important;
}

/* Base properties container styles */
.dynamic-views .card-properties {
    font-size: var(--dynamic-views-property-master-font-size, var(--font-smaller));
    color: var(--text-faint);
    min-height: 24px;
    line-height: 1.4;
    white-space: nowrap;
}

/* Individual property field styles */
.dynamic-views .property-field-1 {
    color: var(--dynamic-views-property-1-color, var(--dynamic-views-property-master-color, var(--text-faint)));
    font-family: var(--dynamic-views-property-1-font, var(--dynamic-views-property-master-font, inherit));
}

.dynamic-views .property-field-2 {
    color: var(--dynamic-views-property-2-color, var(--dynamic-views-property-master-color, var(--text-faint)));
    font-family: var(--dynamic-views-property-2-font, var(--dynamic-views-property-master-font, inherit));
}

.dynamic-views .property-field-3 {
    color: var(--dynamic-views-property-3-color, var(--dynamic-views-property-master-color, var(--text-faint)));
    font-family: var(--dynamic-views-property-3-font, var(--dynamic-views-property-master-font, inherit));
}

.dynamic-views .property-field-4 {
    color: var(--dynamic-views-property-4-color, var(--dynamic-views-property-master-color, var(--text-faint)));
    font-family: var(--dynamic-views-property-4-font, var(--dynamic-views-property-master-font, inherit));
}

/* Timestamp wrapper - flex container for icon positioning */
.dynamic-views .property-content > span:has(.timestamp-icon) {
    display: inline-flex;
    align-items: center;
    gap: 0.3em;
}

.dynamic-views .timestamp-icon {
    display: none; /* Hidden by default */
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    opacity: 0.7;
    width: 1.4em;
    height: 1.4em;
    vertical-align: middle;
}

/* Show icon when left, right, inner, or outer position is selected */
body.dynamic-views-timestamp-icon-left .dynamic-views .timestamp-icon,
body.dynamic-views-timestamp-icon-right .dynamic-views .timestamp-icon,
body.dynamic-views-timestamp-icon-inner .dynamic-views .timestamp-icon,
body.dynamic-views-timestamp-icon-outer .dynamic-views .timestamp-icon {
    display: inline-flex;
}

/* Show left - icon timestamp (all fields) */
/* Default behavior - no override needed */

/* Show right - timestamp icon (all fields) */
body.dynamic-views-timestamp-icon-right .dynamic-views .timestamp-icon {
    order: 2;
}

/* Show inner - left fields show icon on right, right fields show icon on left */
body.dynamic-views-timestamp-icon-inner .dynamic-views .property-field-1 .timestamp-icon,
body.dynamic-views-timestamp-icon-inner .dynamic-views .property-field-3 .timestamp-icon {
    order: 2; /* Right side of left fields */
}

body.dynamic-views-timestamp-icon-inner .dynamic-views .property-field-2 .timestamp-icon,
body.dynamic-views-timestamp-icon-inner .dynamic-views .property-field-4 .timestamp-icon {
    order: 0; /* Left side of right fields */
}

/* Show outer - left fields show icon on left, right fields show icon on right */
body.dynamic-views-timestamp-icon-outer .dynamic-views .property-field-1 .timestamp-icon,
body.dynamic-views-timestamp-icon-outer .dynamic-views .property-field-3 .timestamp-icon {
    order: 0; /* Left side of left fields */
}

body.dynamic-views-timestamp-icon-outer .dynamic-views .property-field-2 .timestamp-icon,
body.dynamic-views-timestamp-icon-outer .dynamic-views .property-field-4 .timestamp-icon {
    order: 2; /* Right side of right fields */
}

.dynamic-views .timestamp-icon svg {
    width: 1em !important;
    height: 1em !important;
    display: block;
}

.dynamic-views .tags-wrapper {
    display: flex;
    align-items: center;
    gap: 4px;
    white-space: nowrap;
    flex-shrink: 0;
    min-width: 0;
    height: 20px;
}

.dynamic-views .path-wrapper {
    display: inline-flex;
    align-items: center;
    white-space: nowrap;
    flex-shrink: 0;
    height: 20px;
}

.dynamic-views .text-wrapper {
    display: inline-flex;
    align-items: center;
    white-space: nowrap;
    flex-shrink: 0;
    height: 20px;
}

/* Path segments must be inline for ellipsis to work across the whole path */
.dynamic-views .path-wrapper > span {
    display: inline;
}

/* Base tag styles */
.dynamic-views .card-properties .tag,
.dynamic-views .list-meta .tag {
    text-decoration: none;
    white-space: nowrap;
    flex-shrink: 0;
}

.dynamic-views .list-meta .tag {
    display: inline-block;
    cursor: pointer;
    font-size: 0.85em;
}

/* Tag style: Outline */
body.dynamic-views-tag-style-outline .dynamic-views .card-properties .tag,
body.dynamic-views-tag-style-outline .dynamic-views .list-meta .tag {
    background-color: transparent;
    border-radius: var(--tag-radius);
    border: 1px solid var(--background-modifier-border);
    color: var(--text-faint);
    opacity: 0.7;
}

body.dynamic-views-tag-style-outline .dynamic-views .card-properties .tag:hover,
body.dynamic-views-tag-style-outline .dynamic-views .list-meta .tag:hover {
    color: var(--text-muted);
    border-color: var(--background-modifier-border-hover);
    opacity: 1;
}

/* Cascading colors: field-specific  master  default */
body.dynamic-views-tag-style-outline .dynamic-views .property-field-1 .tag {
    color: var(--dynamic-views-property-1-color, var(--dynamic-views-property-master-color, var(--text-faint)));
    border-color: var(--dynamic-views-property-1-color, var(--dynamic-views-property-master-color, var(--background-modifier-border)));
}

body.dynamic-views-tag-style-outline .dynamic-views .property-field-1 .tag:hover {
    color: var(--dynamic-views-property-1-color-hover, var(--dynamic-views-property-master-color-hover, var(--text-muted)));
    border-color: var(--dynamic-views-property-1-color, var(--dynamic-views-property-master-color, var(--background-modifier-border-hover)));
}

body.dynamic-views-tag-style-outline .dynamic-views .property-field-2 .tag {
    color: var(--dynamic-views-property-2-color, var(--dynamic-views-property-master-color, var(--text-faint)));
    border-color: var(--dynamic-views-property-2-color, var(--dynamic-views-property-master-color, var(--background-modifier-border)));
}

body.dynamic-views-tag-style-outline .dynamic-views .property-field-2 .tag:hover {
    color: var(--dynamic-views-property-2-color-hover, var(--dynamic-views-property-master-color-hover, var(--text-muted)));
    border-color: var(--dynamic-views-property-2-color, var(--dynamic-views-property-master-color, var(--background-modifier-border-hover)));
}

body.dynamic-views-tag-style-outline .dynamic-views .property-field-3 .tag {
    color: var(--dynamic-views-property-3-color, var(--dynamic-views-property-master-color, var(--text-faint)));
    border-color: var(--dynamic-views-property-3-color, var(--dynamic-views-property-master-color, var(--background-modifier-border)));
}

body.dynamic-views-tag-style-outline .dynamic-views .property-field-3 .tag:hover {
    color: var(--dynamic-views-property-3-color-hover, var(--dynamic-views-property-master-color-hover, var(--text-muted)));
    border-color: var(--dynamic-views-property-3-color, var(--dynamic-views-property-master-color, var(--background-modifier-border-hover)));
}

body.dynamic-views-tag-style-outline .dynamic-views .property-field-4 .tag {
    color: var(--dynamic-views-property-4-color, var(--dynamic-views-property-master-color, var(--text-faint)));
    border-color: var(--dynamic-views-property-4-color, var(--dynamic-views-property-master-color, var(--background-modifier-border)));
}

body.dynamic-views-tag-style-outline .dynamic-views .property-field-4 .tag:hover {
    color: var(--dynamic-views-property-4-color-hover, var(--dynamic-views-property-master-color-hover, var(--text-muted)));
    border-color: var(--dynamic-views-property-4-color, var(--dynamic-views-property-master-color, var(--background-modifier-border-hover)));
}

/* Tag style: Match theme */
body.dynamic-views-tag-style-theme .dynamic-views .card-properties .tag,
body.dynamic-views-tag-style-theme .dynamic-views .list-meta .tag {
    background-color: var(--tag-background);
    color: var(--tag-color);
    border: none;
    border-radius: var(--tag-radius);
}

body.dynamic-views-tag-style-theme .dynamic-views .card-properties .tag:hover,
body.dynamic-views-tag-style-theme .dynamic-views .list-meta .tag:hover {
    background-color: var(--tag-background-hover);
    color: var(--tag-color);
    opacity: 1;
}

/* Tag style: Minimal */
body.dynamic-views-tag-style-minimal .dynamic-views .card-properties .tag,
body.dynamic-views-tag-style-minimal .dynamic-views .list-meta .tag {
    background-color: transparent;
    color: var(--text-faint);
    border: none;
    padding: 0;
    border-radius: 0;
    font-size: inherit;
}

/* Cascading colors for minimal tags */
body.dynamic-views-tag-style-minimal .dynamic-views .property-field-1 .tag {
    color: var(--dynamic-views-property-1-color, var(--dynamic-views-property-master-color, var(--text-faint)));
}

body.dynamic-views-tag-style-minimal .dynamic-views .property-field-1 .tag:hover {
    color: var(--dynamic-views-property-1-color-hover, var(--dynamic-views-property-master-color-hover, var(--text-muted)));
    text-decoration: underline;
}

body.dynamic-views-tag-style-minimal .dynamic-views .property-field-2 .tag {
    color: var(--dynamic-views-property-2-color, var(--dynamic-views-property-master-color, var(--text-faint)));
}

body.dynamic-views-tag-style-minimal .dynamic-views .property-field-2 .tag:hover {
    color: var(--dynamic-views-property-2-color-hover, var(--dynamic-views-property-master-color-hover, var(--text-muted)));
    text-decoration: underline;
}

body.dynamic-views-tag-style-minimal .dynamic-views .property-field-3 .tag {
    color: var(--dynamic-views-property-3-color, var(--dynamic-views-property-master-color, var(--text-faint)));
}

body.dynamic-views-tag-style-minimal .dynamic-views .property-field-3 .tag:hover {
    color: var(--dynamic-views-property-3-color-hover, var(--dynamic-views-property-master-color-hover, var(--text-muted)));
    text-decoration: underline;
}

body.dynamic-views-tag-style-minimal .dynamic-views .property-field-4 .tag {
    color: var(--dynamic-views-property-4-color, var(--dynamic-views-property-master-color, var(--text-faint)));
}

body.dynamic-views-tag-style-minimal .dynamic-views .property-field-4 .tag:hover {
    color: var(--dynamic-views-property-4-color-hover, var(--dynamic-views-property-master-color-hover, var(--text-muted)));
    text-decoration: underline;
}

.dynamic-views .file-path-segment,
.dynamic-views .folder-segment,
.dynamic-views .filename-segment {
    color: inherit;
    white-space: nowrap;
    cursor: pointer;
}

.dynamic-views .property-field-1 .file-path-segment:hover,
.dynamic-views .property-field-1 .folder-segment:hover,
.dynamic-views .property-field-1 .filename-segment:hover {
    color: var(--dynamic-views-property-1-color-hover, var(--dynamic-views-property-master-color-hover, var(--text-muted)));
    text-decoration: underline;
}

.dynamic-views .property-field-2 .file-path-segment:hover,
.dynamic-views .property-field-2 .folder-segment:hover,
.dynamic-views .property-field-2 .filename-segment:hover {
    color: var(--dynamic-views-property-2-color-hover, var(--dynamic-views-property-master-color-hover, var(--text-muted)));
    text-decoration: underline;
}

.dynamic-views .property-field-3 .file-path-segment:hover,
.dynamic-views .property-field-3 .folder-segment:hover,
.dynamic-views .property-field-3 .filename-segment:hover {
    color: var(--dynamic-views-property-3-color-hover, var(--dynamic-views-property-master-color-hover, var(--text-muted)));
    text-decoration: underline;
}

.dynamic-views .property-field-4 .file-path-segment:hover,
.dynamic-views .property-field-4 .folder-segment:hover,
.dynamic-views .property-field-4 .filename-segment:hover {
    color: var(--dynamic-views-property-4-color-hover, var(--dynamic-views-property-master-color-hover, var(--text-muted)));
    text-decoration: underline;
}

.dynamic-views .path-separator {
    color: inherit;
    margin: 0 2px;
    user-select: none;
}


/* ============================================
   4-FIELD PROPERTIES SYSTEM
   ============================================ */

.dynamic-views .card-properties.properties-4field {
    display: flex;
    flex-direction: column;
    gap: 4px;
    grid-template-columns: unset;
    min-height: auto;
}

.dynamic-views .property-row {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.dynamic-views .property-row.property-row-sidebyside {
    flex-direction: row;
    gap: var(--dynamic-views-element-spacing, 8px);
}

/* Meta-field: scrollable container */
.dynamic-views .property-field {
    display: flex;
    align-items: center;
    min-width: 0;
    overflow-x: auto;
    scrollbar-width: none;
    position: relative;
    direction: ltr;
}

/* Default state: fields split space equally with 50% max */
.dynamic-views .property-row.property-row-sidebyside .property-field {
    flex: 1 1 0;
    max-width: 50%;
}

/* Solo field: leave 50px gap where vacant field would be (alignment indicates identity) */
/* EXPERIMENT: Commented out - using "" placeholder instead
.dynamic-views .property-row.property-row-sidebyside .property-field.property-field-solo {
    flex: 0 0 calc(100% - 50px);
    max-width: calc(100% - 50px);
}
*/

/* Push solo right fields (2, 4) to the right side when left field is empty/hidden */
/* EXPERIMENT: Commented out - using "" placeholder instead
.dynamic-views .property-row.property-row-sidebyside .property-field-2.property-field-solo,
.dynamic-views .property-row.property-row-sidebyside .property-field-4.property-field-solo {
    margin-left: auto;
}
*/

/* Measured state: use calculated widths from CSS variables, remove 50% cap */
.dynamic-views .property-row.property-row-sidebyside.property-measured .property-field-1,
.dynamic-views .property-row.property-row-sidebyside.property-measured .property-field-3 {
    width: var(--field1-width);
    flex: 0 0 auto;
    max-width: none;
}

.dynamic-views .property-row.property-row-sidebyside.property-measured .property-field-2,
.dynamic-views .property-row.property-row-sidebyside.property-measured .property-field-4 {
    width: var(--field2-width);
    flex: 0 0 auto;
    max-width: none;
}

/* Universal meta-content wrapper */
.dynamic-views .property-content {
    display: flex;
    align-items: center;
    gap: 4px;
    min-width: 100%; /* Fills field, triggers scroll when content > field */
    flex-shrink: 0;
    white-space: nowrap;
    height: 20px;
}

/* Measurement state: remove min-width to allow natural sizing */
.dynamic-views .property-row.property-row-sidebyside.property-measuring .property-content {
    min-width: 0 !important;
}

/* Alignment via justify-content on meta-content wrapper */
/* Left fields (1, 3) */
.dynamic-views .property-row-sidebyside .property-field-1 .property-content,
.dynamic-views .property-row-sidebyside .property-field-3 .property-content {
    justify-content: flex-start;
}

/* Right fields (2, 4) - align right when not scrollable */
.dynamic-views .property-row-sidebyside .property-field-2:not(.is-scrollable),
.dynamic-views .property-row-sidebyside .property-field-4:not(.is-scrollable) {
    justify-content: flex-end;
}

.dynamic-views .property-row-sidebyside .property-field-2:not(.is-scrollable) .property-content,
.dynamic-views .property-row-sidebyside .property-field-4:not(.is-scrollable) .property-content {
    justify-content: flex-end;
}

/* Left alignment for scrollable fields */
.dynamic-views .property-row-sidebyside .property-field-2.is-scrollable,
.dynamic-views .property-row-sidebyside .property-field-4.is-scrollable {
    justify-content: flex-start;
}

.dynamic-views .property-row-sidebyside .property-field-2.is-scrollable .property-content,
.dynamic-views .property-row-sidebyside .property-field-4.is-scrollable .property-content {
    justify-content: flex-start;
}

/* Stacked layout */
.dynamic-views .property-row:not(.property-row-sidebyside) .property-content {
    justify-content: flex-start;
}

/* Hide scrollbar for side-by-side fields */
.dynamic-views .property-row-sidebyside .property-field::-webkit-scrollbar {
    display: none;
}

/* Gradient masks for all fields when content is scrollable */
body.dynamic-views-fade-trimmed-content .dynamic-views .property-field.scroll-gradient-left {
    mask-image: linear-gradient(to right, rgba(0,0,0,0) 0, rgba(0,0,0,0.3) 4px, black 28px, black 100%);
    -webkit-mask-image: linear-gradient(to right, rgba(0,0,0,0) 0, rgba(0,0,0,0.3) 4px, black 28px, black 100%);
}

body.dynamic-views-fade-trimmed-content .dynamic-views .property-field.scroll-gradient-right {
    mask-image: linear-gradient(to right, black 0, black calc(100% - 28px), rgba(0,0,0,0.3) calc(100% - 4px), rgba(0,0,0,0) 100%);
    -webkit-mask-image: linear-gradient(to right, black 0, black calc(100% - 28px), rgba(0,0,0,0.3) calc(100% - 4px), rgba(0,0,0,0) 100%);
}

body.dynamic-views-fade-trimmed-content .dynamic-views .property-field.scroll-gradient-both {
    mask-image: linear-gradient(to right, rgba(0,0,0,0) 0, rgba(0,0,0,0.3) 4px, black 28px, black calc(100% - 28px), rgba(0,0,0,0.3) calc(100% - 4px), rgba(0,0,0,0) 100%);
    -webkit-mask-image: linear-gradient(to right, rgba(0,0,0,0) 0, rgba(0,0,0,0.3) 4px, black 28px, black calc(100% - 28px), rgba(0,0,0,0.3) calc(100% - 4px), rgba(0,0,0,0) 100%);
}

/* Hide empty fields */
.dynamic-views .property-field:empty {
    display: none;
}


/* ============================================
   VIEW-SPECIFIC STYLES: MASONRY VIEW
   ============================================ */

.dynamic-views .cards-masonry {
    position: relative;
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
}

.dynamic-views .cards-masonry .writing-card {
    position: absolute;
    max-width: 100%;
    margin-top: 0;
    display: flex;
    flex-direction: column;
}

.dynamic-views .cards-masonry .writing-card .snippet-container {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}

.dynamic-views .cards-masonry .writing-card .writing-snippet {
    flex: 0 0 auto;
    min-width: 0;
}

.dynamic-views .cards-masonry .writing-card .snippet-container ~ .card-properties,
.dynamic-views .cards-masonry .writing-card .writing-title ~ .card-properties {
    margin-top: auto;
    padding-top: var(--dynamic-views-element-spacing, 8px);
}


/* ============================================
   VIEW-SPECIFIC STYLES: LIST VIEW
   ============================================ */

.dynamic-views .list-view {
    margin: 0;
    padding-left: 0;
}

.dynamic-views .list-view.marker-bullet {
    list-style-type: disc !important;
    list-style-position: outside;
    padding-left: 20px;
}

.dynamic-views .list-view.marker-bullet .list-item {
    display: list-item !important;
}

.dynamic-views .list-view.marker-number {
    list-style-type: decimal !important;
    list-style-position: outside;
    padding-left: 20px;
}

.dynamic-views .list-view.marker-number .list-item {
    display: list-item !important;
}

.dynamic-views .list-view.marker-none {
    list-style-type: none !important;
    padding-left: 0 !important;
}

.dynamic-views .list-view.marker-none .list-item {
    display: list-item !important;
}

.dynamic-views .list-item {
    margin-bottom: 8px;
    line-height: 1.6;
}

.dynamic-views .list-link {
    color: var(--link-color);
    text-decoration: none;
}

.list-link:hover {
    color: var(--link-color-hover);
}

.dynamic-views .list-meta {
    display: inline-flex;
    gap: 4px;
    align-items: center;
    flex-wrap: wrap;
    font-size: 0.9em;
    margin-left: 8px;
}


.dynamic-views .list-meta.list-path {
    color: var(--text-faint);
}


/* ============================================
   RESPONSIVE STYLES - COMPACT VIEWPORT
   ============================================ */

/* Compact viewport - search below toolbar */
.search-controls-compact {
    display: none;
}

.compact-bottom-row {
    display: none;
}

.results-count-wrapper-compact {
    display: none;
}

.create-note-button-compact {
    display: none;
}

@container (max-width: 700px) {
    .dynamic-views .controls-wrapper {
        padding: 3px 8px 8px;
    }

    .dynamic-views .width-toggle-btn {
        display: none;
    }

    .dynamic-views.wide,
    .dynamic-views.max {
        width: 100%;
        max-width: 100%;
        margin-left: 0;
        margin-right: 0;
    }

    .search-controls-compact {
        display: block;
        width: 100%;
        padding: 0;
        margin-top: 8px;
    }

    .search-controls-compact .search-input-container {
        width: 100%;
        max-width: 100%;
        padding: 0;
        margin-bottom: 8px;
    }

    .search-controls-compact .desktop-search {
        width: 100%;
    }

    .compact-bottom-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
    }

    .results-count-wrapper-compact {
        display: flex;
        align-items: center;
        gap: 4px;
        cursor: pointer;
        padding: 6px 8px;
        position: relative;
        border-radius: 6px;
        transition: background-color 0.2s, opacity 0.2s;
    }

    .results-count-wrapper-compact .limit-dropdown-menu {
        left: 0;
        right: auto;
    }

    .create-note-button-compact {
        display: flex;
        padding: 6px !important;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        background-color: transparent;
        cursor: pointer;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
        height: 30px;
        width: 30px;
        box-sizing: border-box;
    }

    .create-note-button-compact svg {
        width: 16px;
        height: 16px;
        color: var(--text-normal);
    }

    .create-note-button-compact:hover {
        border-color: var(--text-faint);
        background-color: var(--background-modifier-hover);
    }

    .dynamic-views .search-controls {
        display: none !important;
    }

    .dynamic-views .results-count-wrapper {
        display: none !important;
    }

    .dynamic-views .create-note-button {
        display: none !important;
    }

    .dynamic-views .settings-panel {
        max-width: 100%;
    }

    /* Switch to single column at narrow widths */
    .dc-wide .dynamic-views .cards-feed,
    .dc-max .dynamic-views .cards-feed,
    .bases-view[data-view-type="dynamic-views-card"] .cards-feed {
        display: flex;
        flex-direction: column;
    }

    /* Stack properties on narrow cards */
    .dynamic-views .card-properties,

    .dynamic-views .tags-wrapper,
    .dynamic-views .path-wrapper,
    .bases-view .tags-wrapper,
    .bases-view .path-wrapper {
        justify-content: flex-start !important;
        flex-wrap: wrap;
    }

    /* Compact breakpoint: move thumbnails below text snippets */
    .dynamic-views .snippet-container,
    .bases-view .snippet-container {
        flex-direction: column;
    }

    /* Settings panel responsive */
    .dynamic-views .setting-item-text {
        flex-direction: column !important;
        gap: 4px;
    }

    .dynamic-views .setting-item-text .setting-item-info {
        min-width: 0;
    }

    .dynamic-views .setting-text-input,
    .dynamic-views .dropdown {
        width: 100%;
    }
}


/* ============================================
   UTILITY CLASSES
   ============================================ */

@media (hover: hover) {
    .markdown-source-view.mod-cm6 .cm-embed-block:not(.cm-table-widget, .cm-lang-base):has(.dynamic-views):hover {
        box-shadow: none;
    }
    .markdown-source-view.mod-cm6 .cm-embed-block:not(.cm-table-widget, .cm-lang-base):has(.dynamic-views):hover .edit-block-button {
        display: none;
    }
}

/* Settings tab indentation - FLIT style */
.smart-timestamp-sub-settings {
    margin-inline-start: 20px;
    padding-left: 1em;
    position: relative;
}

.smart-timestamp-sub-settings::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 10px;
    width: 2px;
    background-color: var(--background-modifier-border);
}
