/* @settings

name: Dynamic Views
id: dynamic-views
settings:
    -
        id: backdrop-heading
        title: Backdrop
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-backdrop-overlay-tint
        title: Overlay tint
        description: Color of the backdrop overlay
        type: class-select
        allowEmpty: false
        default: dynamic-views-backdrop-theme-match
        options:
            -
                label: Light
                value: dynamic-views-backdrop-theme-light
            -
                label: Dark
                value: dynamic-views-backdrop-theme-dark
            -
                label: Match theme
                value: dynamic-views-backdrop-theme-match
            -
                label: Disable
                value: dynamic-views-backdrop-theme-disable
    -
        id: dynamic-views-backdrop-overlay-light
        title: Light overlay strength
        description: Opacity of the light overlay
        type: variable-number-slider
        default: 70
        min: 0
        max: 100
        step: 1
    -
        id: dynamic-views-backdrop-overlay-dark
        title: Dark overlay strength
        description: Opacity of the dark overlay
        type: variable-number-slider
        default: 40
        min: 0
        max: 100
        step: 1
    -
        id: dynamic-views-backdrop-overlay-blur
        title: Overlay blur
        type: variable-number-slider
        default: 0
        min: 0
        max: 20
        step: 1
        format: px
    -
        id: dynamic-views-backdrop-no-adaptive-text
        title: Disable adaptive text colors
        description: Do not adjust text colors for readability
        type: class-toggle
    -
        id: dynamic-views-backdrop-hover-reveal
        title: Reveal content on hover
        description: Hide card content and overlay until hovering over card
        type: class-toggle
    -
        id: dynamic-views-backdrop-height
        title: Card height set by
        description: What determines card height
        type: class-select
        allowEmpty: false
        default: dynamic-views-backdrop-height-content
        options:
            -
                label: Card content
                value: dynamic-views-backdrop-height-content
            -
                label: Image ratio setting
                value: dynamic-views-backdrop-height-ratio
    -
        id: layout-heading
        title: Card layout
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-min-masonry-columns
        title: Minimum masonry columns
        description: Minimum number of columns in masonry view
        type: variable-select
        default: '2'
        options:
            -
                label: One
                value: '1'
            -
                label: Two
                value: '2'
    -
        id: dynamic-views-min-grid-columns
        title: Minimum grid columns
        description: Minimum number of columns in grid view
        type: variable-select
        default: '1'
        options:
            -
                label: One
                value: '1'
            -
                label: Two
                value: '2'
    -
        id: dynamic-views-card-spacing-desktop
        title: Card spacing (desktop)
        description: Spacing between cards on desktop
        type: variable-number-slider
        default: 8
        min: 0
        max: 32
        step: 1
        format: px
    -
        id: dynamic-views-card-spacing-mobile
        title: Card spacing (mobile)
        description: Spacing between cards on mobile
        type: variable-number-slider
        default: 6
        min: 0
        max: 32
        step: 1
        format: px
    -
        id: dynamic-views-view-background
        title: View background
        description: Background color for card views
        type: variable-themed-color
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-hide-end-indicator
        title: Hide end of view indicator
        description: Do not show the horizontal rule at view bottom
        type: class-toggle
        default: false
    -
        id: cards-heading
        title: Cards
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-card-padding
        title: Card padding
        description: Padding from card edges to content
        type: variable-number-slider
        default: 8
        min: 0
        max: 24
        step: 1
        format: px
    -
        id: dynamic-views-card-border-radius
        title: Card border radius
        description: Corner roundness of cards
        type: variable-number-slider
        default: 8
        min: 0
        max: 32
        step: 1
        format: px
    -
        id: dynamic-views-card-border
        title: Card border
        description: Show border around cards
        type: variable-boolean
        default: true
    -
        id: dynamic-views-card-border-color
        title: Card border color
        description: Color of card borders
        type: variable-themed-color
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-card-border-color-hover
        title: Card border color on hover
        description: Color of card borders when hovering
        type: variable-themed-color
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-hide-card-border
        title: Hide card border
        description: Remove borders from cards
        type: class-toggle
    -
        id: dynamic-views-card-background
        title: Card background
        description: Card background appearance
        type: class-select
        allowEmpty: false
        default: dynamic-views-card-background-tinted
        options:
            -
                label: Tinted
                value: dynamic-views-card-background-tinted
            -
                label: Transparent
                value: dynamic-views-card-background-transparent
            -
                label: Custom color
                value: dynamic-views-card-background-custom
    -
        id: dynamic-views-card-background-custom-color
        title: Custom card background
        description: Custom color for card backgrounds (only used when Card background is set to Custom color)
        type: variable-themed-color
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-card-background-hover
        title: Card background on hover
        type: class-select
        allowEmpty: false
        default: dynamic-views-card-background-hover-none
        options:
            -
                label: No change
                value: dynamic-views-card-background-hover-none
            -
                label: Tinted
                value: dynamic-views-card-background-hover-tinted
            -
                label: Transparent
                value: dynamic-views-card-background-hover-transparent
            -
                label: Custom color
                value: dynamic-views-card-background-hover-custom
    -
        id: dynamic-views-card-background-hover-custom-color
        title: Custom card background on hover
        description: Custom color for card backgrounds on hover (only used when Card background on hover is set to Custom color)
        type: variable-themed-color
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-no-fade-truncated-text
        title: Hide scroll gradient
        description: Hide gradient fade effect on titles, subtitles and properties when they can be scrolled horizontally
        type: class-toggle
    -
        id: dynamic-views-ambient-background
        title: Ambient background
        description: Use image ambient color as card background (local images only)
        type: class-select
        allowEmpty: false
        default: dynamic-views-ambient-bg-off
        options:
            -
                label: Subtle
                value: dynamic-views-ambient-bg-subtle
            -
                label: Dramatic
                value: dynamic-views-adaptive-text
            -
                label: Disable
                value: dynamic-views-ambient-bg-off
    -
        id: covers-heading
        title: Covers
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-cover-crop
        title: Cover crop alignment
        description: How to crop cover images when aspect ratios don't match
        type: class-select
        allowEmpty: false
        default: dynamic-views-cover-crop-center
        options:
            -
                label: Top
                value: dynamic-views-cover-crop-top
            -
                label: Center
                value: dynamic-views-cover-crop-center
            -
                label: Bottom
                value: dynamic-views-cover-crop-bottom
    -
        id: dynamic-views-cover-background
        title: Cover background
        description: Background style for Contain fit and placeholders
        type: class-select
        allowEmpty: false
        default: dynamic-views-cover-bg-ambient
        options:
            -
                label: Ambient
                value: dynamic-views-cover-bg-ambient
            -
                label: Plain
                value: dynamic-views-cover-bg-plain
            -
                label: Transparent
                value: dynamic-views-cover-bg-transparent
            -
                label: Custom color
                value: dynamic-views-cover-bg-custom
    -
        id: dynamic-views-cover-background-custom-color
        title: Custom cover background
        description: Background color for "Custom color" mode
        type: variable-themed-color
        format: rgb
        opacity: false
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-masonry-fixed-cover-height
        title: Fixed cover height
        description: Keep top/bottom letterbox bars visible in contain mode in Masonry.
        type: class-toggle
        default: false
    -
        id: dynamic-views-show-cover-placeholder
        title: Show placeholder for cards with no image
        description: If covers are enabled but a file doesn't have an image, show an empty cover. If disabled, card content will fill all available space.
        type: class-select
        allowEmpty: false
        default: dynamic-views-show-cover-placeholder-grid
        options:
            -
                label: In Grid view
                value: dynamic-views-show-cover-placeholder-grid
            -
                label: In Masonry view
                value: dynamic-views-show-cover-placeholder-masonry
            -
                label: In Grid and Masonry views
                value: dynamic-views-show-cover-placeholder-both
            -
                label: Don't show
                value: dynamic-views-show-cover-placeholder-none
    -
        id: dynamic-views-side-cover-min-height
        title: Minimum left/right cover height
        description: Minimum height for cards with left or right cover position
        type: variable-text
        default: 150px
    -
        id: dynamic-views-cover-border-radius
        title: Cover border radius
        description: Corner roundness of cover images
        type: variable-number-slider
        default: 0
        min: 0
        max: 48
        step: 1
        format: px
    -
        id: dynamic-views-cover-circular
        title: Round covers
        description: Make cover corners perfectly rounded
        type: class-toggle
    -
        id: dynamic-views-cover-inset
        title: Cover inset
        description: Distance from card edge to cover
        type: variable-number-slider
        default: 0
        min: 0
        max: 32
        step: 1
        format: px
    -
        id: dynamic-views-cover-hover-zoom
        title: Hover zoom
        description: Subtle zoom effect when hovering over covers
        type: class-select
        allowEmpty: false
        default: dynamic-views-cover-hover-zoom-card
        options:
            -
                label: On hover over cover
                value: dynamic-views-cover-hover-zoom-cover
            -
                label: On hover over card
                value: dynamic-views-cover-hover-zoom-card
            -
                label: Disabled
                value: dynamic-views-cover-hover-zoom-off
    -
        id: dynamic-views-show-cover-border
        title: Show border between cover and card content
        description: Show divider line between cover and card content
        type: class-toggle
    -
        id: datacore-heading
        title: Datacore
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-hide-search
        title: Hide search filter
        description: Hide search input field in toolbar
        type: class-toggle
    -
        id: dynamic-views-hide-result-count
        title: Hide result count
        description: Hide result count and limit dropdown in toolbar
        type: class-toggle
    -
        id: dynamic-views-hide-create-note
        title: Hide 'Create new note' button
        description: Hide button to create new note in toolbar
        type: class-toggle
    -
        id: dynamic-views-hide-shuffle
        title: Hide 'Shuffle' button
        description: Hide shuffle button in toolbar
        type: class-toggle
    -
        id: dynamic-views-hide-random
        title: Hide 'Open random file' button
        description: Hide random file button in toolbar
        type: class-toggle
    -
        id: dynamic-views-hide-edit-query
        title: Hide 'Edit query' button
        description: Hide edit query button in toolbar
        type: class-toggle
    -
        id: dynamic-views-hide-pin-toolbar
        title: Hide 'Pin toolbar' button
        description: Hide pin toolbar button
        type: class-toggle
    -
        id: dynamic-views-hide-expand-width
        title: Hide 'Expand' button
        description: Hide expand button in toolbar
        type: class-toggle
    -
        id: dynamic-views-disable-toolbar-shadow
        title: Disable toolbar shadow
        description: Hide shadow below toolbar when results are scrolled (applies when View height > 0)
        type: class-toggle
    -
        id: dynamic-views-disable-fade-gradient
        title: Disable fade gradient at query bottom
        description: Hide fade-out gradient at bottom of scrollable results (applies when View height > 0)
        type: class-toggle
    -
        id: dates-heading
        title: Dates
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-date-format
        title: Date format
        description: Moment.js format for date-only properties.
        type: variable-text
        default: YYYY-MM-DD
    -
        id: dynamic-views-time-format
        title: Time format
        description: Moment.js format for time-only display.
        type: variable-text
        default: HH:mm
    -
        id: dynamic-views-datetime-format
        title: Datetime format
        description: Moment.js format for datetime properties.
        type: variable-text
        default: YYYY-MM-DD, HH:mm
    -
        id: dynamic-views-timestamp-recent-full
        title: Show full recent timestamps
        description: Show date for today's created and modified timestamps
        type: class-toggle
    -
        id: dynamic-views-timestamp-past-full
        title: Show full past timestamps
        description: Show time for created and modified timestamps older than today.
        type: class-toggle
    -
        id: dynamic-views-timestamp-icon
        title: Timestamp icon
        description: Show icon next to timestamp to distinguish between modified and created time when property labels hidden.
        type: class-select
        allowEmpty: false
        default: dynamic-views-timestamp-icon-edge
        options:
            -
                label: Align left
                value: dynamic-views-timestamp-icon-left
            -
                label: Align right
                value: dynamic-views-timestamp-icon-right
            -
                label: Align to card center
                value: dynamic-views-timestamp-icon-center
            -
                label: Align to card edge
                value: dynamic-views-timestamp-icon-edge
            -
                label: Hide
                value: dynamic-views-timestamp-icon-hide
    -
        id: header-heading
        title: Header
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-hidden-file-extensions
        title: Hide file formats
        description: Comma-separated list of formats to hide (e.g., md, base, canvas)
        type: variable-text
        default: md
    -
        id: dynamic-views-file-type-indicator
        title: File format indicator
        type: class-select
        allowEmpty: false
        default: dynamic-views-file-type-badge
        options:
            -
                label: Extension
                value: dynamic-views-file-type-ext
            -
                label: Badge
                value: dynamic-views-file-type-badge
            -
                label: Icon
                value: dynamic-views-file-type-icon
            -
                label: None
                value: dynamic-views-file-type-none
    -
        id: dynamic-views-url-icon
        title: "'Open URL' button icon"
        description: Lucide icon name
        type: variable-text
        default: 'square-arrow-out-up-right'
    -
        id: image-viewer-heading
        title: Image viewer
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-image-viewer-disabled
        title: Disable image viewer
        description: Disable image viewer feature
        type: class-toggle
    -
        id: dynamic-views-zoom-disabled
        title: Disable pan & zoom
        description: Disable pinch-to-zoom and pan gestures
        type: class-toggle
    -
        id: dynamic-views-image-viewer-disable-dismiss-on-click
        title: Don't dismiss on press
        description: Prevent image viewer from closing when pressing on image
        type: class-toggle
    -
        id: dynamic-views-image-viewer-fullscreen
        title: Open in fullscreen (desktop)
        description: Open images in fullscreen on desktop
        type: class-toggle
        default: true
    -
        id: dynamic-views-zoom-sensitivity-desktop
        title: Zoom sensitivity (desktop)
        description: Set how quickly images zoom on desktop
        type: variable-number-slider
        default: 0.08
        min: 0.01
        max: 1
        step: 0.01
        format: ''
    -
        id: properties-heading
        title: Properties
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-list-separator
        title: List item separator
        description: Separator between items in list-type properties. Whitespace preserved.
        type: variable-text
        default: ", "
        quotes: true
    -
        id: dynamic-views-empty-value-marker
        title: Empty value marker
        description: What to show for empty property values. Whitespace preserved.
        type: variable-text
        default: "—"
        quotes: true
    -
        id: dynamic-views-property-font
        title: Property font
        description: Font name as it appears on your system
        type: variable-text
        default: ''
    -
        id: dynamic-views-property-font-size
        title: Property font size
        description: Font size of property values (e.g., 0.8em, 13px, 0.8125rem)
        type: variable-text
        default: ''
    -
        id: dynamic-views-property-color-with-labels
        title: Text color (labels shown)
        description: Theme color preset for property text when property labels are shown
        type: class-select
        allowEmpty: false
        default: dynamic-views-property-color-with-labels-muted
        options:
            -
                label: Faint
                value: dynamic-views-property-color-with-labels-faint
            -
                label: Muted
                value: dynamic-views-property-color-with-labels-muted
            -
                label: Normal
                value: dynamic-views-property-color-with-labels-normal
            -
                label: Accent
                value: dynamic-views-property-color-with-labels-accent
            -
                label: Red
                value: dynamic-views-property-color-with-labels-red
            -
                label: Orange
                value: dynamic-views-property-color-with-labels-orange
            -
                label: Yellow
                value: dynamic-views-property-color-with-labels-yellow
            -
                label: Green
                value: dynamic-views-property-color-with-labels-green
            -
                label: Cyan
                value: dynamic-views-property-color-with-labels-cyan
            -
                label: Blue
                value: dynamic-views-property-color-with-labels-blue
            -
                label: Purple
                value: dynamic-views-property-color-with-labels-purple
            -
                label: Pink
                value: dynamic-views-property-color-with-labels-pink
            -
                label: Custom
                value: dynamic-views-property-color-with-labels-custom
    -
        id: dynamic-views-property-color-with-labels-custom
        title: Custom text color (labels shown)
        description: Custom color for property text when property labels are shown
        type: variable-themed-color
        format: hsl-split
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-property-color-without-labels
        title: Text color (labels hidden)
        description: Theme color preset for property text when property labels are hidden
        type: class-select
        allowEmpty: false
        default: dynamic-views-property-color-without-labels-faint
        options:
            -
                label: Faint
                value: dynamic-views-property-color-without-labels-faint
            -
                label: Muted
                value: dynamic-views-property-color-without-labels-muted
            -
                label: Normal
                value: dynamic-views-property-color-without-labels-normal
            -
                label: Accent
                value: dynamic-views-property-color-without-labels-accent
            -
                label: Red
                value: dynamic-views-property-color-without-labels-red
            -
                label: Orange
                value: dynamic-views-property-color-without-labels-orange
            -
                label: Yellow
                value: dynamic-views-property-color-without-labels-yellow
            -
                label: Green
                value: dynamic-views-property-color-without-labels-green
            -
                label: Cyan
                value: dynamic-views-property-color-without-labels-cyan
            -
                label: Blue
                value: dynamic-views-property-color-without-labels-blue
            -
                label: Purple
                value: dynamic-views-property-color-without-labels-purple
            -
                label: Pink
                value: dynamic-views-property-color-without-labels-pink
            -
                label: Custom
                value: dynamic-views-property-color-without-labels-custom
    -
        id: dynamic-views-property-color-without-labels-custom
        title: Custom text color (labels hidden)
        description: Custom color for property text when property labels are hidden
        type: variable-themed-color
        format: hsl-split
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-hide-missing-properties
        title: Hide missing properties
        description: Hide properties that don't exist in note frontmatter
        type: class-toggle
        default: false
    -
        id: dynamic-views-hide-empty-properties
        title: Empty properties
        description: How to display properties with empty values
        type: class-select
        allowEmpty: false
        default: dynamic-views-hide-empty-labels-hidden
        options:
            -
				label: Show empty value markers
                value: dynamic-views-hide-empty-show
            -
                label: Hide if labels hidden
                value: dynamic-views-hide-empty-labels-hidden
            -
                label: Hide all
                value: dynamic-views-hide-empty-all
    -
        id: dynamic-views-full-row-property-alignment
        title: Full-row property alignment
        description: How to align values with inline property labels when not shown side-by-side
        type: class-select
        allowEmpty: false
        default: dynamic-views-full-row-align-left
        options:
            -
                label: Left
                value: dynamic-views-full-row-align-left
            -
                label: Right
                value: dynamic-views-full-row-align-right
    -
        id: dynamic-views-paired-property-alignment
        title: Paired property alignment
        description: How to align right-side properties when properties are shown side-by-side
        type: class-select
        allowEmpty: false
        default: dynamic-views-paired-property-align-right
        options:
            -
                label: Left
                value: dynamic-views-paired-property-align-left
            -
                label: Right
                value: dynamic-views-paired-property-align-right
    -
        id: dynamic-views-property-width-allocation
        title: Property width allocation
        description: How much space each side-by-side property should take
        type: class-select
        allowEmpty: false
        default: dynamic-views-property-width-flexible
        options:
            -
                label: Flexible
                value: dynamic-views-property-width-flexible
            -
                label: 50-50
                value: dynamic-views-property-width-50-50
    -
        id: dynamic-views-compact-breakpoint
        title: Compact breakpoint
        description: Card width in pixels at which side-by-side properties stack vertically. Set to 0 to disable.
        type: variable-number
        default: 390
        format: px
    -
        id: property-labels-heading
        title: Property labels
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-property-label-font
        title: Property label font
        description: Font name as it appears on your system
        type: variable-text
        default: ''
    -
        id: dynamic-views-property-label-font-size
        title: Property label text size
        description: Font size for property labels (e.g., 0.8em, 13px, 0.8125rem)
        type: variable-text
        default: ''
    -
        id: dynamic-views-property-label-color
        title: Text color
        description: Theme color preset for property labels
        type: class-select
        allowEmpty: false
        default: dynamic-views-property-label-color-faint
        options:
            -
                label: Faint
                value: dynamic-views-property-label-color-faint
            -
                label: Muted
                value: dynamic-views-property-label-color-muted
            -
                label: Normal
                value: dynamic-views-property-label-color-normal
            -
                label: Accent
                value: dynamic-views-property-label-color-accent
            -
                label: Red
                value: dynamic-views-property-label-color-red
            -
                label: Orange
                value: dynamic-views-property-label-color-orange
            -
                label: Yellow
                value: dynamic-views-property-label-color-yellow
            -
                label: Green
                value: dynamic-views-property-label-color-green
            -
                label: Cyan
                value: dynamic-views-property-label-color-cyan
            -
                label: Blue
                value: dynamic-views-property-label-color-blue
            -
                label: Purple
                value: dynamic-views-property-label-color-purple
            -
                label: Pink
                value: dynamic-views-property-label-color-pink
            -
                label: Custom
                value: dynamic-views-property-label-color-custom
    -
        id: dynamic-views-property-label-color-custom
        title: Custom text color
        description: Color of property labels (when Text color is set to Custom)
        type: variable-themed-color
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-property-label-case
        title: Property label case
        description: Text case transformation for property labels
        type: class-select
        allowEmpty: false
        default: dynamic-views-property-label-case-preserve
        options:
            -
                label: Preserve case
                value: dynamic-views-property-label-case-preserve
            -
                label: Lowercase
                value: dynamic-views-property-label-case-lowercase
            -
                label: Uppercase
                value: dynamic-views-property-label-case-uppercase
    -
        id: dynamic-views-property-label-bold
        title: Bold
        description: Make property labels bold
        type: class-toggle
        default: false
    -
        id: dynamic-views-property-label-small-caps
        title: Small caps
        description: Use small caps for property labels
        type: class-toggle
        default: false
    -
        id: slideshow
        title: Slideshow
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-slideshow-disabled
        title: Disable slideshow
        description: Don't cycle through images on cards with multiple images
        type: class-toggle
    -
        id: dynamic-views-hide-slideshow-indicator
        title: Hide slideshow indicator
        description: Hide indicator icon when card has multiple images
        type: class-toggle
    -
        id: dynamic-views-hide-slideshow-arrows
        title: Hide navigation arrows
        description: Hide left/right arrows on slideshow covers (use swipe gestures instead)
        type: class-toggle
        default: false
    -
        id: dynamic-views-slideshow-max-images
        title: Maximum slideshow images
        description: Limit number of images in cover slideshows
        type: variable-number-slider
        default: 10
        min: 2
        max: 24
        step: 1
        format: ''
    -
        id: subtitle
        title: Subtitle
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-subtitle-font
        title: Subtitle font
        description: Font name as it appears on your system
        type: variable-text
        default: ''
    -
        id: dynamic-views-subtitle-font-size
        title: Subtitle font size
        description: Font size for subtitles (e.g., 0.9em, 14px)
        type: variable-text
        default: ''
    -
        id: dynamic-views-subtitle-color
        title: Text color
        description: Theme color preset for subtitles
        type: class-select
        allowEmpty: false
        default: dynamic-views-subtitle-color-faint
        options:
            -
                label: Faint
                value: dynamic-views-subtitle-color-faint
            -
                label: Muted
                value: dynamic-views-subtitle-color-muted
            -
                label: Normal
                value: dynamic-views-subtitle-color-normal
            -
                label: Accent
                value: dynamic-views-subtitle-color-accent
            -
                label: Red
                value: dynamic-views-subtitle-color-red
            -
                label: Orange
                value: dynamic-views-subtitle-color-orange
            -
                label: Yellow
                value: dynamic-views-subtitle-color-yellow
            -
                label: Green
                value: dynamic-views-subtitle-color-green
            -
                label: Cyan
                value: dynamic-views-subtitle-color-cyan
            -
                label: Blue
                value: dynamic-views-subtitle-color-blue
            -
                label: Purple
                value: dynamic-views-subtitle-color-purple
            -
                label: Pink
                value: dynamic-views-subtitle-color-pink
            -
                label: Custom
                value: dynamic-views-subtitle-color-custom
    -
        id: dynamic-views-subtitle-color-custom
        title: Custom text color
        description: Custom color for subtitles (when Text color is set to Custom)
        type: variable-themed-color
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-subtitle-position
        title: Subtitle position
        type: class-select
        allowEmpty: false
        default: dynamic-views-subtitle-below
        options:
            -
                label: Above title
                value: dynamic-views-subtitle-above
            -
                label: Below title
                value: dynamic-views-subtitle-below
    -
        id: dynamic-views-subtitle-alignment
        title: Subtitle alignment
        description: Horizontal alignment of subtitles
        type: class-select
        allowEmpty: false
        default: dynamic-views-subtitle-align-left
        options:
            -
                label: Left
                value: dynamic-views-subtitle-align-left
            -
                label: Center
                value: dynamic-views-subtitle-align-center
            -
                label: Right
                value: dynamic-views-subtitle-align-right
    -
        id: dynamic-views-subtitle-overflow
        title: Overflow behavior
        description: How to handle long subtitle text
        type: class-select
        allowEmpty: false
        default: dynamic-views-subtitle-overflow-wrap
        options:
            -
                label: Wrap
                value: dynamic-views-subtitle-overflow-wrap
            -
                label: Scroll
                value: dynamic-views-subtitle-overflow-scroll
    -
        id: dynamic-views-subtitle-divider
        title: Divider line
        description: Show a horizontal rule below subtitle
        type: class-toggle
        default: false
    -
        id: tags-heading
        title: Tags
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-tag-style
        title: Tag style
        description: Visual appearance of tags
        type: class-select
        allowEmpty: false
        default: dynamic-views-tag-style-outline
        options:
            -
                label: Outline
                value: dynamic-views-tag-style-outline
            -
                label: Fill
                value: dynamic-views-tag-style-fill
            -
                label: Plaintext
                value: dynamic-views-tag-style-plaintext
            -
                label: Theme style
                value: dynamic-views-tag-style-theme
    -
        id: dynamic-views-show-tag-hash
        title: Show hash
        description: Show hash prefix (#)
        type: class-toggle
        default: false
    -
        id: dynamic-views-tag-color
        title: Tag color
        description: Theme color preset for Outline, Fill, and Plaintext tag styles
        type: class-select
        allowEmpty: false
        default: dynamic-views-tag-color-faint
        options:
            -
                label: Faint
                value: dynamic-views-tag-color-faint
            -
                label: Muted
                value: dynamic-views-tag-color-muted
            -
                label: Normal
                value: dynamic-views-tag-color-normal
            -
                label: Accent
                value: dynamic-views-tag-color-accent
            -
                label: Red
                value: dynamic-views-tag-color-red
            -
                label: Orange
                value: dynamic-views-tag-color-orange
            -
                label: Yellow
                value: dynamic-views-tag-color-yellow
            -
                label: Green
                value: dynamic-views-tag-color-green
            -
                label: Cyan
                value: dynamic-views-tag-color-cyan
            -
                label: Blue
                value: dynamic-views-tag-color-blue
            -
                label: Purple
                value: dynamic-views-tag-color-purple
            -
                label: Pink
                value: dynamic-views-tag-color-pink
            -
                label: Custom
                value: dynamic-views-tag-color-custom
    -
        id: dynamic-views-tag-color-custom
        title: Custom tag color
        description: Applied when Tag color is set to Custom
        type: variable-themed-color
        format: hsl-split
        default-light: '#'
        default-dark: '#'
    -
        id: text-preview-heading
        title: Text preview
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-text-preview-font
        title: Text preview font
        description: Font name as it appears on your system
        type: variable-text
        default: ''
    -
        id: dynamic-views-text-preview-font-size
        title: Text preview font size
        description: Font size for text previews (e.g., 0.9em, 14px, 0.875rem)
        type: variable-text
        default: ''
    -
        id: dynamic-views-text-preview-color
        title: Text color
        description: Theme color preset for text previews
        type: class-select
        allowEmpty: false
        default: dynamic-views-text-preview-color-muted
        options:
            -
                label: Faint
                value: dynamic-views-text-preview-color-faint
            -
                label: Muted
                value: dynamic-views-text-preview-color-muted
            -
                label: Normal
                value: dynamic-views-text-preview-color-normal
            -
                label: Accent
                value: dynamic-views-text-preview-color-accent
            -
                label: Red
                value: dynamic-views-text-preview-color-red
            -
                label: Orange
                value: dynamic-views-text-preview-color-orange
            -
                label: Yellow
                value: dynamic-views-text-preview-color-yellow
            -
                label: Green
                value: dynamic-views-text-preview-color-green
            -
                label: Cyan
                value: dynamic-views-text-preview-color-cyan
            -
                label: Blue
                value: dynamic-views-text-preview-color-blue
            -
                label: Purple
                value: dynamic-views-text-preview-color-purple
            -
                label: Pink
                value: dynamic-views-text-preview-color-pink
            -
                label: Custom
                value: dynamic-views-text-preview-color-custom
    -
        id: dynamic-views-text-preview-color-custom
        title: Custom text color
        description: Custom color for text previews (when Text color is set to Custom)
        type: variable-themed-color
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-text-preview-lines
        title: Number of text preview lines
        description: Maximum number of lines for text previews
        type: variable-number-slider
        default: 5
        min: 1
        max: 10
        step: 1
        format: ''
    -
        id: thumbnails-heading
        title: Thumbnails
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-thumbnail-size
        title: Thumbnail size
        description: Size of card thumbnails in pixels
        type: variable-select
        default: 80px
        options:
            -
                label: Compact
                value: 64px
            -
                label: Standard
                value: 80px
            -
                label: Expanded
                value: 94.5px
    -
        id: dynamic-views-thumbnail-border-radius
        title: Thumbnail border radius
        description: Corner roundness of thumbnails
        type: variable-number-slider
        default: 4
        min: 0
        max: 48
        step: 1
        format: px
    -
        id: dynamic-views-thumbnail-crop
        title: Thumbnail crop alignment
        description: How to crop thumbnail images when aspect ratios don't match
        type: class-select
        allowEmpty: false
        default: dynamic-views-thumbnail-crop-center
        options:
            -
                label: Top
                value: dynamic-views-thumbnail-crop-top
            -
                label: Center
                value: dynamic-views-thumbnail-crop-center
            -
                label: Bottom
                value: dynamic-views-thumbnail-crop-bottom
    -
        id: dynamic-views-show-thumbnail-placeholder
        title: Show placeholder for files with no images
        description: Show empty thumbnail placeholder for files without images
        type: class-toggle
        default: false
    -
        id: dynamic-views-disable-thumbnail-scrubbing
        title: Disable thumbnail scrubbing
        description: Disable scrubbing through multiple images on hover
        type: class-toggle
        default: false
    -
        id: dynamic-views-hide-thumbnail-shadow
        title: Hide scrubbing shadow
        description: Hide the shadow below thumbnails with multiple images
        type: class-toggle
        default: false
    -
        id: title-heading
        title: Title
        type: heading
        level: 2
        collapsed: true
    -
        id: dynamic-views-title-font
        title: Title font
        description: Font name as it appears on your system
        type: variable-text
        default: ''
    -
        id: dynamic-views-title-font-size
        title: Title font size
        description: Font size for card titles (e.g., 1em, 16px, 1.2rem)
        type: variable-text
        default: ''
    -
        id: dynamic-views-title-color
        title: Text color
        description: Theme color preset for titles
        type: class-select
        allowEmpty: false
        default: dynamic-views-title-color-normal
        options:
            -
                label: Faint
                value: dynamic-views-title-color-faint
            -
                label: Muted
                value: dynamic-views-title-color-muted
            -
                label: Normal
                value: dynamic-views-title-color-normal
            -
                label: Accent
                value: dynamic-views-title-color-accent
            -
                label: Red
                value: dynamic-views-title-color-red
            -
                label: Orange
                value: dynamic-views-title-color-orange
            -
                label: Yellow
                value: dynamic-views-title-color-yellow
            -
                label: Green
                value: dynamic-views-title-color-green
            -
                label: Cyan
                value: dynamic-views-title-color-cyan
            -
                label: Blue
                value: dynamic-views-title-color-blue
            -
                label: Purple
                value: dynamic-views-title-color-purple
            -
                label: Pink
                value: dynamic-views-title-color-pink
            -
                label: Custom
                value: dynamic-views-title-color-custom
    -
        id: dynamic-views-title-color-custom
        title: Custom text color
        description: Custom color for titles (when Text color is set to Custom)
        type: variable-themed-color
        format: hex
        default-light: '#'
        default-dark: '#'
    -
        id: dynamic-views-title-lines
        title: Title lines
        description: Maximum number of card title lines
        type: variable-number-slider
        default: 2
        min: 1
        max: 5
        step: 1
        format: ''
    -
        id: dynamic-views-title-alignment
        title: Title alignment
        description: Horizontal alignment of card titles
        type: class-select
        allowEmpty: false
        default: dynamic-views-title-align-left
        options:
            -
                label: Left
                value: dynamic-views-title-align-left
            -
                label: Center
                value: dynamic-views-title-align-center
            -
                label: Right
                value: dynamic-views-title-align-right
    -
        id: dynamic-views-title-overflow
        title: Overflow behavior
        description: How to handle long title text
        type: class-select
        allowEmpty: false
        default: dynamic-views-title-overflow-wrap
        options:
            -
                label: Wrap
                value: dynamic-views-title-overflow-wrap
            -
                label: Scroll
                value: dynamic-views-title-overflow-scroll

*/

/* ============================================
   COLOR VARIABLES
   ============================================ */

/* Derived CSS variables and custom color compositions */
body {
  /* Clamp thumbnail aspect ratio to 0.5-2.0 range */
  --dynamic-views-thumbnail-aspect-ratio: clamp(
    0.5,
    var(--dynamic-views-image-aspect-ratio, 1),
    2
  );
  --dynamic-views-list-separator: ", ";
  --dynamic-views-empty-value-marker: "—";
  /* Custom colors from HSL components (when undefined, falls back) */
  --dynamic-views-property-color-with-labels-custom: hsl(
    var(--dynamic-views-property-color-with-labels-custom-h),
    var(--dynamic-views-property-color-with-labels-custom-s),
    var(--dynamic-views-property-color-with-labels-custom-l)
  );
  --dynamic-views-property-color-with-labels-custom-hover: hsl(
    calc(var(--dynamic-views-property-color-with-labels-custom-h) - 3),
    calc(var(--dynamic-views-property-color-with-labels-custom-s) * 1.02),
    calc(var(--dynamic-views-property-color-with-labels-custom-l) * 1.15)
  );
  --dynamic-views-property-color-without-labels-custom: hsl(
    var(--dynamic-views-property-color-without-labels-custom-h),
    var(--dynamic-views-property-color-without-labels-custom-s),
    var(--dynamic-views-property-color-without-labels-custom-l)
  );
  --dynamic-views-property-color-without-labels-custom-hover: hsl(
    calc(var(--dynamic-views-property-color-without-labels-custom-h) - 3),
    calc(var(--dynamic-views-property-color-without-labels-custom-s) * 1.02),
    calc(var(--dynamic-views-property-color-without-labels-custom-l) * 1.15)
  );
  --dynamic-views-tag-color-custom: hsl(
    var(--dynamic-views-tag-color-custom-h),
    var(--dynamic-views-tag-color-custom-s),
    var(--dynamic-views-tag-color-custom-l)
  );
  --dynamic-views-tag-color-custom-hover: hsl(
    calc(var(--dynamic-views-tag-color-custom-h) - 3),
    calc(var(--dynamic-views-tag-color-custom-s) * 1.02),
    calc(var(--dynamic-views-tag-color-custom-l) * 1.15)
  );
  /* Adaptive text colors: "light" = light text, "dark" = dark text */
  --dynamic-views-adaptive-text-light-normal: #fafafa;
  --dynamic-views-adaptive-text-light-muted: #f5f5f5;
  --dynamic-views-adaptive-text-light-faint: #d0d0d0;
  --dynamic-views-adaptive-text-dark-normal: #222222;
  --dynamic-views-adaptive-text-dark-muted: #333333;
  --dynamic-views-adaptive-text-dark-faint: #666666;
  /* Plain background for covers/thumbnails without images */
  --dynamic-views-image-background-plain: #eeeeee;
}

/* Appearance section description styling */
.dynamic-views-appearance-group .setting-item-description {
  padding-top: 0;
}

.dynamic-views-appearance-group .setting-item-description:first-child {
  margin-top: 0;
}

.dynamic-views-appearance-group .setting-item-description:last-child {
  margin-bottom: 0;
}

.dynamic-views-appearance-group .setting-items {
  margin-bottom: 0;
  background-color: transparent;
  border: none;
  box-shadow: inset 0 0 0 1px var(--background-modifier-border);
}

/* ============================================
   DATACORE & BASES VIEW STYLES
   ============================================ */

/* ============================================
   FOCUS & ACCESSIBILITY STYLES
   ============================================ */

.dynamic-views button:not(.clickable-icon) {
  box-shadow: none !important;
}

.dynamic-views button:focus-visible,
.dynamic-views [role="button"]:focus-visible {
  outline: 2px solid var(--background-modifier-border-focus);
  outline-offset: 2px;
}

.dynamic-views [role="menuitem"]:focus-visible {
  outline: 2px solid var(--background-modifier-border-focus);
  outline-offset: -2px;
  border-radius: 0;
}

.dynamic-views [role="menuitem"]:first-child:focus-visible {
  border-radius: 5px 5px 0 0;
}

.dynamic-views [role="menuitem"]:last-child:focus-visible {
  border-radius: 0 0 5px 5px;
}

.dynamic-views [role="menuitem"]:only-child:focus-visible {
  border-radius: 5px;
}

.dynamic-views [role="checkbox"]:focus-visible {
  outline: 2px solid var(--background-modifier-border-focus);
  outline-offset: 2px;
}

.dynamic-views .card:focus-visible {
  outline: none;
}

/* ============================================
   CONTAINER & LAYOUT STYLES
   ============================================ */

/* Title alignment (left is default in base CSS) */
body.dynamic-views-title-align-center .dynamic-views .card-title {
  text-align: center;
}

body.dynamic-views-title-align-right .dynamic-views .card-title {
  text-align: right;
}

/* Title scroll mode */
body.dynamic-views-title-overflow-scroll .dynamic-views .card-title {
  display: block;
  -webkit-line-clamp: unset;
  -webkit-box-orient: unset;
  white-space: nowrap;
  overflow-x: auto;
  scrollbar-width: none;
}

/* Results container with fade effect */
.dynamic-views .results-container {
  position: relative;
}

.dynamic-views .results-container::after {
  content: "";
  position: sticky;
  bottom: 0;
  z-index: 1;
  display: block;
  height: 80px;
  margin-top: -80px;
  background: linear-gradient(
    to bottom,
    transparent,
    var(--background-primary)
  );
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--anim-duration-fast, 140ms);
}

.dynamic-views .results-container.with-fade::after {
  opacity: 1;
}

/* Style Settings: disable fade gradient */
body.dynamic-views-disable-fade-gradient
  .dynamic-views
  .results-container::after {
  display: none;
}

/* Enable container queries for responsive button visibility */
.markdown-preview-view,
.markdown-reading-view,
.markdown-source-view {
  container-type: inline-size;
}

/* Minimal-style width system: CSS variables control container width */
body {
  --container-datacorejsx-width: 100%;
  --container-datacorejsx-max-width: 100%;
  /* Wide mode expansion multiplier (default: 1.75x line width) */
  --datacore-wide-multiplier: 1.75;
  /* Transform offset for centering: (multiplier - 1) / 2 */
  --datacore-wide-offset: calc(
    (var(--datacore-wide-multiplier) - 1) / 2 * var(--file-line-width, 700px)
  );
}

/* Helper classes set width variables (applied to section) */
.datacore-wide {
  --container-datacorejsx-width: min(
    calc(var(--datacore-wide-multiplier) * var(--file-line-width, 700px)),
    100%
  );
  --container-datacorejsx-max-width: min(
    calc(var(--datacore-wide-multiplier) * var(--file-line-width, 700px)),
    100%
  );
}

.datacore-max {
  --container-datacorejsx-width: 100%;
  --container-datacorejsx-max-width: 100%;
}

/* Constrain element wrappers to normal width (Reading View) */
.markdown-preview-view.datacore-wide
  .markdown-preview-sizer
  > *:not(.el-pre):not(:has(.block-language-datacorejsx)),
.markdown-preview-view.datacore-max
  .markdown-preview-sizer
  > *:not(.el-pre):not(:has(.block-language-datacorejsx)),
.markdown-reading-view.datacore-wide
  .markdown-reading-sizer
  > *:not(.el-pre):not(:has(.block-language-datacorejsx)),
.markdown-reading-view.datacore-max
  .markdown-reading-sizer
  > *:not(.el-pre):not(:has(.block-language-datacorejsx)) {
  max-width: var(--file-line-width, 45rem) !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Expand sizer in wide and max modes (Reading View) */
.markdown-preview-view.datacore-wide .markdown-preview-sizer,
.markdown-reading-view.datacore-wide .markdown-reading-sizer {
  max-width: min(
    calc(var(--datacore-wide-multiplier) * var(--file-line-width, 700px)),
    96vw
  ) !important;
}

.markdown-preview-view.datacore-max .markdown-preview-sizer,
.markdown-reading-view.datacore-max .markdown-reading-sizer {
  max-width: 96vw !important;
}

/* Live Preview: DON'T expand cm-sizer/cm-content (would affect whole note) */
/* Only expand the specific code block wrapper below */

/* Allow code block to overflow in wide/max modes */
.markdown-source-view.datacore-wide .cm-contentContainer,
.markdown-source-view.datacore-max .cm-contentContainer,
.markdown-source-view.datacore-wide .cm-content,
.markdown-source-view.datacore-max .cm-content {
  overflow: visible !important;
}

/* Reading View wrappers */
/* Wide mode: expand wrapper (sizer already expanded above) */
.markdown-preview-view.datacore-wide .el-pre:has(.block-language-datacorejsx),
.markdown-reading-view.datacore-wide .el-pre:has(.block-language-datacorejsx) {
  max-width: var(--container-datacorejsx-max-width) !important;
  width: var(--container-datacorejsx-width) !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Max mode: expand sizer, then expand wrapper */
.markdown-preview-view.datacore-max .el-pre:has(.block-language-datacorejsx),
.markdown-reading-view.datacore-max .el-pre:has(.block-language-datacorejsx) {
  max-width: var(--container-datacorejsx-max-width) !important;
  width: var(--container-datacorejsx-width) !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Live Preview: .cm-preview-code-block - use transform to center since parent is narrower */
.markdown-source-view.datacore-wide
  .cm-preview-code-block:has(.block-language-datacorejsx) {
  width: min(
    calc(var(--datacore-wide-multiplier) * var(--file-line-width, 700px)),
    96vw
  ) !important;
  max-width: min(
    calc(var(--datacore-wide-multiplier) * var(--file-line-width, 700px)),
    96vw
  ) !important;
  /* Center with transform using pre-calculated offset */
  transform: translateX(calc(-1 * var(--datacore-wide-offset))) !important;
}

/* Max mode in Live Preview: JS handles width/transform dynamically based on pane size */
/* CSS fallback for when JS hasn't run yet */
.markdown-source-view.datacore-max
  .cm-preview-code-block:has(.block-language-datacorejsx) {
  /* Will be overridden by JS with pane-aware values */
  width: calc(100vw - var(--file-margins, 32px) * 2) !important;
  max-width: calc(100vw - var(--file-margins, 32px) * 2) !important;
  transform: translateX(
    calc(
      (var(--file-line-width, 700px) - 100vw + var(--file-margins, 32px) * 2) /
        2
    )
  ) !important;
}

/* Expand datacore block when wide/max active */
.markdown-preview-view.datacore-wide .block-language-datacorejsx,
.markdown-preview-view.datacore-max .block-language-datacorejsx,
.markdown-reading-view.datacore-wide .block-language-datacorejsx,
.markdown-reading-view.datacore-max .block-language-datacorejsx,
.markdown-source-view.datacore-wide .block-language-datacorejsx,
.markdown-source-view.datacore-max .block-language-datacorejsx {
  width: var(--container-datacorejsx-width) !important;
  max-width: var(--container-datacorejsx-max-width) !important;
  margin: 0 auto !important;
}

/* Default width for datacorejsx blocks (readable line width) */
.markdown-source-view.is-readable-line-width
  .cm-content
  > .block-language-datacorejsx,
.markdown-preview-view.is-readable-line-width .block-language-datacorejsx,
.markdown-reading-view.is-readable-line-width .block-language-datacorejsx {
  width: var(--container-datacorejsx-width);
  max-width: var(--container-datacorejsx-max-width);
  margin: 0 auto;
}

.dynamic-views {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  min-height: 270px;
  overflow: visible;
  --shadow-l-light-mode:
    0px 0px 8px rgba(0, 0, 0, 0.12), 0px 0px 20px rgba(0, 0, 0, 0.15),
    0px 0px 32px rgba(0, 0, 0, 0.12);
  --shadow-l-dark-mode:
    0px 0px 8px rgba(255, 255, 255, 0.12),
    0px 0px 20px rgba(255, 255, 255, 0.15),
    0px 0px 32px rgba(255, 255, 255, 0.12);
  --drop-shadow-l-light-mode: drop-shadow(0 0 4px rgba(0, 0, 0, 0.12))
    drop-shadow(0 0 10px rgba(0, 0, 0, 0.15))
    drop-shadow(0 0 16px rgba(0, 0, 0, 0.12));
  --drop-shadow-l-dark-mode: drop-shadow(0 0 4px rgba(255, 255, 255, 0.12))
    drop-shadow(0 0 10px rgba(255, 255, 255, 0.15))
    drop-shadow(0 0 16px rgba(255, 255, 255, 0.12));
}

/* ============================================
   TOOLBAR & CONTROLS STYLES
   ============================================ */

.dynamic-views .controls-wrapper {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-width: 100%;
  padding: 3px 0 8px;
  position: relative;
  background-color: var(--background-primary);
}

.dynamic-views .controls-wrapper.scrolled::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  height: 20px;
  background: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 0.08) 0%,
    rgba(0, 0, 0, 0.04) 40%,
    rgba(0, 0, 0, 0.01) 70%,
    transparent 100%
  );
  mask-image: linear-gradient(
    to right,
    transparent 0px,
    black 40px,
    black calc(100% - 40px),
    transparent 100%
  );
  -webkit-mask-image: linear-gradient(
    to right,
    transparent 0px,
    black 40px,
    black calc(100% - 40px),
    transparent 100%
  );
  pointer-events: none;
  z-index: 10;
}

.theme-dark .dynamic-views .controls-wrapper.scrolled::after {
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.08) 0%,
    rgba(255, 255, 255, 0.04) 40%,
    rgba(255, 255, 255, 0.01) 70%,
    transparent 100%
  );
}

/* Style Settings: disable toolbar shadow */
body.dynamic-views-disable-toolbar-shadow
  .dynamic-views
  .controls-wrapper.scrolled::after {
  display: none;
}

.dynamic-views .bottom-controls {
  display: flex;
  align-items: center;
  gap: 8px;
  box-sizing: border-box;
}

.dynamic-views .view-controls-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* ============================================
   VIEW DROPDOWN
   ============================================ */

.dynamic-views .view-dropdown-wrapper {
  position: relative;
}

.dynamic-views .view-dropdown-btn {
  padding: 6px 12px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background-color: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: all var(--anim-duration-fast, 140ms);
  font-size: 0.9em;
  color: var(--text-normal);
  box-shadow: none;
  height: 30px;
  box-sizing: border-box;
}

.dynamic-views .view-dropdown-btn svg {
  color: var(--icon-color);
}

.dynamic-views .view-dropdown-btn .chevron {
  opacity: 0.6;
}

.view-dropdown-btn:hover {
  background-color: var(--background-modifier-hover);
  border-color: var(--text-faint);
}

.dynamic-views .view-dropdown-menu {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  background-color: var(--background-primary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  box-shadow: 0 4px 12px var(--background-modifier-box-shadow);
  z-index: 1000;
  min-width: 120px;
  overflow: hidden;
}

.dynamic-views .view-option {
  padding: 8px 12px;
  cursor: pointer;
  transition: background-color var(--anim-duration-fast, 140ms);
  font-size: 0.9em;
  display: flex;
  align-items: center;
  gap: 8px;
}

.view-option:hover {
  background-color: var(--background-modifier-hover);
}

/* ============================================
   SORT DROPDOWN
   ============================================ */

.dynamic-views .sort-dropdown-wrapper {
  position: relative;
}

.dynamic-views .sort-dropdown-btn {
  padding: 6px 8px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background-color: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: var(--size-2-2);
  transition: all var(--anim-duration-fast, 140ms);
  color: var(--text-normal);
  box-shadow: none;
  height: 30px;
  box-sizing: border-box;
}

.dynamic-views .sort-dropdown-btn svg {
  flex-shrink: 0;
  width: 16px;
  height: 16px;
  color: var(--icon-color);
}

.dynamic-views .sort-dropdown-btn .chevron {
  width: 12px;
  height: 12px;
  opacity: 0.6;
}

.sort-dropdown-btn:hover {
  background-color: var(--background-modifier-hover);
  border-color: var(--text-faint);
}

.dynamic-views .sort-dropdown-menu {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  background-color: var(--background-primary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  box-shadow: 0 4px 12px var(--background-modifier-box-shadow);
  z-index: 1000;
  min-width: 240px;
  overflow: hidden;
}

.dynamic-views .sort-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  cursor: pointer;
  transition: background-color var(--anim-duration-fast, 140ms);
  font-size: 0.9em;
}

.sort-option:hover {
  background-color: var(--background-modifier-hover);
}

.dynamic-views .view-option svg,
.dynamic-views .sort-option svg {
  flex-shrink: 0;
  color: var(--icon-color);
}

.view-option.active,
.sort-option.active {
  font-weight: var(--font-semibold);
}

.view-option.active svg,
.sort-option.active svg {
  color: var(--text-normal);
}

/* ============================================
   RESULTS COUNT & LIMIT CONTROLS
   ============================================ */

.dynamic-views .results-count-wrapper,
.dynamic-views .results-count-wrapper-compact {
  position: relative;
  display: flex;
  align-items: center;
  gap: var(--size-2-2);
  padding: 6px 8px;
  border-radius: 6px;
  cursor: pointer;
  transition:
    background-color var(--anim-duration-fast, 140ms),
    opacity var(--anim-duration-fast, 140ms);
}

/* Normal variant has additional transitions for search animation */
.dynamic-views .results-count-wrapper {
  transition:
    background-color var(--anim-duration-fast, 140ms),
    opacity var(--anim-duration-fast, 140ms),
    transform var(--anim-duration-fast, 140ms) ease,
    margin var(--anim-duration-moderate, 300ms) ease;
}

/* Hide compact variant by default (shown via container query) */
.dynamic-views .results-count-wrapper-compact {
  display: none;
}

@media (hover: hover) {
  .results-count-wrapper:hover,
  .results-count-wrapper-compact:hover {
    background-color: var(--background-modifier-hover);
    opacity: var(--icon-opacity-hover);
  }

  .results-count-wrapper:has(.limited):hover,
  .results-count-wrapper-compact:has(.limited):hover {
    background-color: var(--background-modifier-active-hover);
  }
}

.results-count-wrapper.active,
.results-count-wrapper-compact.active {
  background-color: var(--background-modifier-hover);
  opacity: var(--icon-opacity-hover);
}

.dynamic-views .results-count {
  font-size: 0.85em;
  color: var(--text-muted);
  white-space: nowrap;
}

.dynamic-views .results-count.limited {
  color: var(--interactive-accent);
}

.dynamic-views .results-count-chevron {
  color: var(--text-muted);
  opacity: 0.6;
  flex-shrink: 0;
}

.dynamic-views .limit-dropdown-menu {
  position: absolute;
  top: calc(100% + 4px);
  right: 0;
  background-color: var(--background-primary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  box-shadow: 0 4px 12px var(--background-modifier-box-shadow);
  z-index: 1000;
  min-width: 200px;
  padding: 8px 12px;
  display: flex;
  flex-direction: column;
  gap: 0;
  cursor: default;
}

.dynamic-views .limit-dropdown-menu > *:not(:last-child) {
  margin-bottom: 8px;
}

.dynamic-views .limit-dropdown-menu .limit-reset-button {
  margin-bottom: 0 !important;
}

.dynamic-views .limit-dropdown-label {
  font-size: 0.85em;
  color: var(--text-normal);
  font-weight: 500;
  cursor: default;
}

.dynamic-views .limit-dropdown-input {
  padding: 6px 10px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background-color: var(--background-primary);
  color: var(--text-normal);
  font-size: 0.9em;
}

.limit-dropdown-input:focus {
  outline: none;
  border-color: var(--interactive-accent);
}

.dynamic-views .limit-reset-button {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  cursor: pointer;
  border-radius: 6px;
  transition: background-color var(--anim-duration-fast, 140ms);
  font-size: 0.9em;
}

.limit-reset-button:hover {
  background-color: var(--background-modifier-hover);
}

.limit-reset-button.disabled {
  opacity: 0.5;
  cursor: default;
}

.dynamic-views .limit-reset-button svg {
  flex-shrink: 0;
  color: var(--icon-color);
}

.dynamic-views .limit-dropdown-menu .bases-toolbar-menu-item {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0;
  padding: 8px 12px;
  cursor: pointer;
  border-radius: 6px;
  transition: background-color var(--anim-duration-fast, 140ms);
  font-size: 0.9em;
}

.dynamic-views .limit-dropdown-menu .bases-toolbar-menu-item:hover {
  background-color: var(--background-modifier-hover);
}

.dynamic-views .bases-toolbar-menu-item svg {
  flex-shrink: 0;
  color: var(--icon-color);
}

/* ============================================
   TOOLBAR BUTTONS
   ============================================ */

.dynamic-views .create-note-button,
.dynamic-views .create-note-button-compact {
  padding: 6px !important;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background-color: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--anim-duration-fast, 140ms);
  height: 30px;
  width: 30px;
  box-sizing: border-box;
}

.dynamic-views .create-note-button svg,
.dynamic-views .create-note-button-compact svg {
  width: 16px;
  height: 16px;
  color: var(--icon-color);
}

.dynamic-views .create-note-button:hover,
.dynamic-views .create-note-button-compact:hover {
  border-color: var(--text-faint);
  background-color: var(--background-modifier-hover);
}

/* Hide compact variant by default (shown via container query) */
.dynamic-views .create-note-button-compact {
  display: none;
}

.dynamic-views .property-controls {
  display: flex;
  gap: 8px;
  align-items: center;
  margin-left: auto;
}

.dynamic-views .settings-btn {
  padding: 6px !important;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background-color: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--anim-duration-fast, 140ms);
  box-shadow: none;
  height: 30px;
  width: 30px;
  box-sizing: border-box;
}

.dynamic-views .settings-btn svg {
  width: 16px;
  height: 16px;
  color: var(--icon-color);
}

.settings-btn:hover {
  background-color: var(--background-modifier-hover);
  border-color: var(--text-faint);
}

.dynamic-views .query-toggle-btn {
  padding: 6px !important;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background-color: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--anim-duration-fast, 140ms);
  box-shadow: none;
  height: 30px;
  width: 30px;
  box-sizing: border-box;
}

.dynamic-views .query-toggle-btn svg {
  width: 16px;
  height: 16px;
  color: var(--icon-color);
}

.query-toggle-btn:hover {
  border-color: var(--text-faint);
  background-color: var(--background-modifier-hover);
}

.dynamic-views .shuffle-btn {
  padding: 6px !important;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background-color: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--anim-duration-fast, 140ms);
  height: 30px;
  width: 30px;
  box-sizing: border-box;
}

.dynamic-views .shuffle-btn svg {
  width: 16px;
  height: 16px;
  color: var(--icon-color);
}

.shuffle-btn:hover {
  border-color: var(--text-faint);
  background-color: var(--background-modifier-hover);
}

.dynamic-views .open-random-btn {
  padding: 6px !important;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background-color: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--anim-duration-fast, 140ms);
  height: 30px;
  width: 30px;
  box-sizing: border-box;
}

.dynamic-views .open-random-btn svg {
  width: 16px;
  height: 16px;
  color: var(--icon-color);
}

.open-random-btn:hover {
  border-color: var(--text-faint);
  background-color: var(--background-modifier-hover);
}

.dynamic-views .width-toggle-btn {
  padding: 6px !important;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background-color: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--anim-duration-fast, 140ms);
  height: 30px;
  width: 30px;
  box-sizing: border-box;
}

.dynamic-views .width-toggle-btn svg {
  width: 16px;
  height: 16px;
  color: var(--icon-color);
}

.width-toggle-btn:hover {
  border-color: var(--text-faint);
  background-color: var(--background-modifier-hover);
}

.dynamic-views .pin-btn {
  padding: 6px !important;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background-color: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--anim-duration-fast, 140ms);
  height: 30px;
  width: 30px;
  box-sizing: border-box;
}

.dynamic-views .pin-btn svg {
  width: 16px;
  height: 16px;
  color: var(--icon-color);
}

.pin-btn:hover {
  border-color: var(--text-faint);
  background-color: var(--background-modifier-hover);
}

/* ============================================
   TOOLBAR VISIBILITY CONTROLS
   ============================================ */

/* Hide search filter when toggle is on */
body.dynamic-views-hide-search .dynamic-views .search-controls,
body.dynamic-views-hide-search .search-controls-compact {
  display: none !important;
}

/* Hide result count when toggle is on */
body.dynamic-views-hide-result-count .dynamic-views .results-count-wrapper,
body.dynamic-views-hide-result-count .results-count-wrapper-compact {
  display: none !important;
}

/* Hide create note button when toggle is on */
body.dynamic-views-hide-create-note .dynamic-views .create-note-button,
body.dynamic-views-hide-create-note .create-note-button-compact {
  display: none !important;
}

/* Hide shuffle button when toggle is on */
body.dynamic-views-hide-shuffle .dynamic-views .shuffle-btn {
  display: none !important;
}

/* Hide random button when toggle is on */
body.dynamic-views-hide-random .dynamic-views .open-random-btn {
  display: none !important;
}

/* Hide edit query button when toggle is on */
body.dynamic-views-hide-edit-query .dynamic-views .query-toggle-btn {
  display: none !important;
}

/* Hide pin toolbar button when toggle is on */
body.dynamic-views-hide-pin-toolbar .dynamic-views .pin-btn {
  display: none !important;
}

/* Hide expand width button when toggle is on */
body.dynamic-views-hide-expand-width .dynamic-views .width-toggle-btn {
  display: none !important;
}

/* ============================================
   QUERY EDITOR
   ============================================ */

.dynamic-views .query-dropdown-wrapper {
  position: relative;
}

.dynamic-views .query-dropdown-menu {
  position: absolute;
  top: calc(100% + 4px);
  right: 0;
  background-color: var(--background-primary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  box-shadow: 0 4px 12px var(--background-modifier-box-shadow);
  z-index: 1000;
  min-width: 400px;
  max-width: min(675px, calc(100vw - 16px));
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  box-sizing: border-box;
}

.dynamic-views .query-editor {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px;
  background-color: var(--background-primary-alt);
  border-radius: 8px;
  border: 1px solid var(--background-modifier-border);
  max-width: 900px;
  margin-left: auto;
  margin-right: 0;
  box-sizing: border-box;
}

.dynamic-views .query-input {
  width: 100%;
  padding: 6px 10px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  background-color: var(--background-primary);
  color: var(--text-normal);
  font-size: 0.9em;
  font-family: var(--font-monospace);
  resize: none;
  overflow: hidden;
  min-height: 32px;
}

.dynamic-views .query-footer {
  display: flex;
  align-items: center;
  gap: 12px;
  justify-content: space-between;
}

.dynamic-views .query-btn {
  padding: 6px 16px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  background-color: var(--background-primary);
  color: var(--text-normal);
  cursor: pointer;
  font-size: 0.9em;
  transition:
    background-color var(--anim-duration-fast, 140ms),
    border-color var(--anim-duration-fast, 140ms);
}

.query-btn:hover {
  background-color: var(--background-modifier-hover);
}

.dynamic-views .query-apply-btn {
  background-color: var(--interactive-accent);
  color: var(--text-on-accent);
  border-color: var(--interactive-accent);
}

.dynamic-views .query-apply-btn:hover {
  background-color: var(--interactive-accent-hover);
}

.dynamic-views .query-clear-btn {
  background-color: var(--background-secondary);
  color: var(--text-muted);
  border-color: var(--background-modifier-border);
}

.dynamic-views .query-clear-btn:hover {
  background-color: var(--background-modifier-hover);
  color: var(--text-normal);
}

.dynamic-views .query-tip {
  font-size: 0.8em;
  color: var(--text-faint);
  flex: 1;
  text-align: left;
}

.dynamic-views .query-error {
  font-family: var(--font-monospace);
  font-size: 0.85em;
  white-space: pre-wrap;
  word-wrap: break-word;
  margin: 16px 0;
  padding: 0;
  color: var(--text-muted);
  overflow-x: auto;
}

/* ============================================
   SETTINGS PANEL
   ============================================ */

.dynamic-views .settings-dropdown-wrapper {
  position: relative;
}

.dynamic-views .settings-dropdown-menu {
  position: absolute;
  top: calc(100% + 4px);
  right: 0;
  background-color: var(--background-primary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  box-shadow: 0 4px 12px var(--background-modifier-box-shadow);
  z-index: 1000;
  min-width: 300px;
  max-width: min(500px, calc(100vw - 16px));
  max-height: min(500px, calc(100vh - 100px));
  overflow-y: auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  box-sizing: border-box;
}

.dynamic-views .settings-panel {
  display: flex !important;
  flex-direction: column !important;
  gap: 12px;
  padding: 16px;
  background-color: var(--background-primary-alt);
  border-radius: 8px;
  border: 1px solid var(--background-modifier-border);
  text-align: left !important;
  align-items: flex-start !important;
  max-width: 900px;
  box-sizing: border-box;
  margin-left: auto;
  margin-right: 0;
}

.dynamic-views .setting-item {
  display: flex !important;
  flex-direction: column !important;
  gap: var(--size-2-2);
  align-items: flex-start !important;
  width: 100%;
  max-width: 100%;
  text-align: left !important;
  box-sizing: border-box;
}

.dynamic-views .setting-item-toggle {
  flex-direction: row !important;
  justify-content: space-between !important;
  align-items: center !important;
}

.dynamic-views .setting-item-info {
  display: flex;
  flex-direction: column;
  gap: var(--size-2-2);
  text-align: left !important;
}

.dynamic-views .setting-item label {
  font-size: 0.9em;
  color: var(--text-normal);
  font-weight: 500;
  text-align: left !important;
}

.dynamic-views .setting-item input[type="text"] {
  padding: 6px 10px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  background-color: var(--background-primary);
  color: var(--text-normal);
  font-size: 0.9em;
  box-sizing: border-box;
}

.dynamic-views .setting-item select {
  padding: 6px 10px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  background-color: var(--background-primary);
  color: var(--text-normal);
  cursor: pointer;
  font-size: 0.9em;
  box-sizing: border-box;
}

.dynamic-views .setting-desc {
  font-size: 0.8em;
  color: var(--text-faint);
  text-align: left !important;
}

/* Collapsible settings sections */
.dynamic-views .settings-section {
  width: 100%;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
}

.dynamic-views .settings-section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background-color: var(--background-secondary);
  cursor: pointer;
  user-select: none;
  font-weight: 500;
  font-size: 0.9em;
  color: var(--text-normal);
  border-radius: 5px 5px 0 0;
}

.dynamic-views .settings-section-header.collapsed {
  border-radius: 5px;
}

.dynamic-views .settings-section-header:hover {
  background-color: var(--background-modifier-hover);
}

.dynamic-views .settings-section-header .chevron {
  width: 16px;
  height: 16px;
  transition: transform var(--anim-duration-fast, 140ms) ease;
  color: var(--text-muted);
  flex-shrink: 0;
}

.dynamic-views .settings-section-header.collapsed .chevron {
  transform: rotate(-90deg);
}

.dynamic-views .settings-section-content {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 12px;
  background-color: var(--background-primary);
  border-radius: 0 0 5px 5px;
}

.dynamic-views .settings-section-content.collapsed {
  display: none;
}

.dynamic-views .slider-value {
  min-width: 32px;
}

.dynamic-views .setting-item-text {
  flex-direction: row !important;
  gap: 16px;
  align-items: flex-start !important;
}

.dynamic-views .setting-item-text .setting-item-info {
  flex: 1;
  min-width: 150px;
}

.dynamic-views .setting-text-input {
  width: 180px;
  max-width: 180px;
  flex-shrink: 1;
  padding: 6px 10px;
  border: 1px solid var(--background-modifier-border);
  box-sizing: border-box;
  border-radius: 4px;
  background-color: var(--background-primary);
  color: var(--text-normal);
  font-size: 0.9em;
}

.dynamic-views .dropdown {
  width: 180px;
  max-width: 180px;
  flex-shrink: 1;
}

.dynamic-views .toggle-switch {
  position: relative;
  display: inline-block;
  width: 44px;
  height: 24px;
  flex-shrink: 0;
}

.dynamic-views .toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.dynamic-views .toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--background-modifier-border);
  transition: var(--anim-duration-moderate, 300ms);
  border-radius: 24px;
}

.toggle-slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: var(--background-primary);
  transition: var(--anim-duration-moderate, 300ms);
  border-radius: 50%;
}

label.toggle-switch input[type="checkbox"]:checked + span.toggle-slider {
  background-color: var(--interactive-accent) !important;
}

.dynamic-views .toggle-switch input:checked + .toggle-slider:before {
  transform: translateX(20px);
}

.toggle-switch:hover .toggle-slider {
  opacity: 0.9;
}

/* ============================================
   SEARCH CONTROLS
   ============================================ */

.dynamic-views .search-controls {
  flex: 1;
  transition:
    opacity var(--anim-duration-moderate, 300ms) ease,
    flex var(--anim-duration-moderate, 300ms) ease,
    margin var(--anim-duration-moderate, 300ms) ease;
  overflow: hidden;
  margin: 0 -3px;
  max-width: 400px;
}

.dynamic-views .search-input-container {
  position: relative;
  flex: 1;
  --search-icon-size: 16px;
  --search-icon-color: var(--text-normal);
  padding: 2px 3px;
}

.dynamic-views .search-input-container:before {
  display: none;
}

.dynamic-views .search-input-loupe-icon {
  position: absolute;
  left: 8px;
  top: 50%;
  transform: translateY(-50%);
  width: 16px;
  height: 16px;
  color: var(--text-muted);
  opacity: 0.7;
  pointer-events: none;
  z-index: 1;
}

.dynamic-views .desktop-search {
  width: 100%;
  padding: 6px 28px 6px 32px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background-color: transparent;
  color: var(--text-normal);
  font-size: 0.9em;
  transition: all var(--anim-duration-fast, 140ms);
  height: 30px;
  box-sizing: border-box;
  line-height: 1;
}

.dynamic-views .search-input-clear-button {
  position: absolute;
  right: 6px;
  top: 50%;
  transform: translateY(-50%);
  width: 16px;
  height: 16px;
  cursor: pointer;
  color: var(--text-muted);
  opacity: 0.7;
  transition:
    opacity var(--anim-duration-fast, 140ms),
    color var(--anim-duration-fast, 140ms);
  display: block;
}

.search-input-clear-button:hover {
  opacity: 1;
  color: var(--text-normal);
}

.desktop-search:hover {
  border-color: var(--text-muted);
}

.desktop-search:focus {
  border-color: var(--interactive-accent);
}

.dynamic-views .desktop-search::placeholder {
  color: var(--text-faint);
}

/* ============================================
   VIEW-SPECIFIC STYLES: CARD VIEW
   ============================================ */

/* Enable container queries and set view padding variable for Obsidian's default .bases-view */
.bases-view[data-view-type="dynamic-views-grid"],
.bases-view[data-view-type="dynamic-views-masonry"] {
  container-type: inline-size;
  --bases-view-padding: var(--size-4-3);
}

/* View background - Bases files only (not embeds) */
.workspace-leaf-content[data-type="bases"]
  .bases-view[data-view-type="dynamic-views-grid"],
.workspace-leaf-content[data-type="bases"]
  .bases-view[data-view-type="dynamic-views-masonry"] {
  background-color: var(--dynamic-views-view-background);
}

/* Unified grid layout for all grid views (all width modes) */
.bases-view[data-view-type="dynamic-views-grid"] .dynamic-views-grid,
.dynamic-views .dynamic-views-grid {
  display: grid;
  grid-template-columns: repeat(var(--grid-columns, 1), 1fr);
  gap: var(--size-4-2);
  align-items: stretch;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* Card spacing setting - Bases files only */
.workspace-leaf-content[data-type="bases"] .dynamic-views .dynamic-views-grid {
  gap: var(--dynamic-views-card-spacing-desktop, 8px);
}

.is-mobile
  .workspace-leaf-content[data-type="bases"]
  .dynamic-views
  .dynamic-views-grid {
  gap: var(--dynamic-views-card-spacing-mobile, 6px);
}

/* Grid mode: remove margins (gap handles spacing) and set flexbox layout */
.bases-view[data-view-type="dynamic-views-grid"] .dynamic-views-grid .card,
.dynamic-views .dynamic-views-grid .card,
.workspace-leaf-content[data-type="bases"]
  .dynamic-views
  .dynamic-views-grid
  .card {
  margin: 0;
  display: flex;
  flex-direction: column;
  height: 100%;
  min-width: 0;
  overflow: hidden;
}

/* Card element ordering for flexbox layout
   Order hierarchy: -100 (title/header) → -50 (properties-top) → 0 (content) → 50 (properties-bottom) */
.dynamic-views .card .card-title,
.dynamic-views .card .card-header,
.dynamic-views .card > .card-title-group {
  order: -100;
}

/* Explicit order for title-group children (DOM order is title then subtitle) */
.dynamic-views .card-title-group .card-title {
  order: 0;
}
.dynamic-views .card-title-group .card-subtitle {
  order: 1;
}

/* Property set position: top (below title/subtitle, above content) */
.dynamic-views .card .card-properties-top {
  order: -50;
}

/* Property set position: bottom (after content) */
.dynamic-views .card .card-properties-bottom {
  order: 50;
}

/* Grid mode: push bottom properties to bottom of card */
.dynamic-views
  .dynamic-views-grid
  .card
  .card-content
  ~ .card-properties-bottom,
.dynamic-views
  .dynamic-views-grid
  .card
  .card-title-group
  ~ .card-properties-bottom {
  margin-top: auto;
  padding-top: var(--size-4-2);
}

/* Grid mode: only-child pushes to bottom but needs no padding (no sibling above) */
.dynamic-views .dynamic-views-grid .card .card-properties-bottom:only-child {
  margin-top: auto;
  padding-top: 0;
}

/* Collapse empty cards (no visible content) - requires :has() (Electron 22+) */
.dynamic-views-grid
  .card:not(
    :has(
      .card-title,
      .card-header,
      .card-subtitle,
      .card-cover img,
      .card-thumbnail img,
      .card-text-preview,
      .card-properties
    )
  ) {
  align-self: start;
  height: auto;
  min-height: 0;
  padding: 0;
  line-height: 0;
}

.dynamic-views-masonry
  .card:not(
    :has(
      .card-title,
      .card-header,
      .card-subtitle,
      .card-cover img,
      .card-thumbnail img,
      .card-text-preview,
      .card-properties
    )
  ) {
  height: auto;
  min-height: 0;
  padding: 0;
  line-height: 0;
}

/* Override vanilla Bases absolute positioning - we use static flow layout */
.dynamic-views .bases-cards-group,
.dynamic-views.is-grouped .bases-cards-container > .bases-group-heading {
  position: static;
}

/* Group headings span full grid width, remove grid gap below */
.dynamic-views-grid > .bases-group-heading {
  grid-column: 1 / -1;
  margin-bottom: calc(-1 * var(--size-4-2));
}

/* Masonry group headings span full width */
.dynamic-views-masonry > .bases-group-heading {
  width: 100%;
}

/* Group header property label */
.dynamic-views .bases-group-property {
  color: var(--text-muted);
  font-size: var(--font-ui-small);
}

/* Group header value containers - match vanilla Bases structure */
.dynamic-views .bases-group-value .value-list-container {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--size-2-2);
}

.dynamic-views .bases-group-value .value-list-element {
  display: inline-flex;
}

/* Masonry groups are their own positioning context for cards.
   box-sizing: content-box ensures height calculation excludes padding,
   which is critical for masonry layout measuring card positions */
.dynamic-views-masonry > .bases-cards-group {
  position: relative;
  box-sizing: content-box;
}

/* Group containers in grid - use subgrid to maintain grid layout */
.dynamic-views-grid > .dynamic-views-group {
  display: grid;
  grid-column: 1 / -1;
  grid-template-columns: subgrid;
  row-gap: var(--size-4-2);
  padding: 0 0 var(--size-4-4) 0;
  border-color: var(--background-modifier-border);
  border-width: 0 0 1px 0;
  border-style: solid;
}

/* Card spacing setting - Bases files only */
.workspace-leaf-content[data-type="bases"]
  .dynamic-views-grid
  > .dynamic-views-group {
  gap: var(--dynamic-views-card-spacing-desktop, 8px);
}

.is-mobile
  .workspace-leaf-content[data-type="bases"]
  .dynamic-views-grid
  > .dynamic-views-group {
  gap: var(--dynamic-views-card-spacing-mobile, 6px);
}

/* Group containers in masonry - simple block layout */
.dynamic-views-masonry > .dynamic-views-group {
  padding: 0 0 var(--size-4-4) 0;
  border-color: var(--background-modifier-border);
  border-width: 0 0 1px 0;
  border-style: solid;
}

/* Last group has no border */
.dynamic-views-grid > .dynamic-views-group:last-child,
.dynamic-views-masonry > .dynamic-views-group:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.dynamic-views .card {
  position: relative;
  container-type: inline-size;
  box-sizing: border-box;
  border: none;
  border-radius: var(--dynamic-views-card-border-radius, 8px);
  overflow: hidden; /* Clip covers at rounded corners */
  padding: var(--dynamic-views-card-padding, 8px);
  margin: var(--size-4-2) 0;
  background-color: var(--background-primary-alt);
  break-inside: avoid;
  page-break-inside: avoid;
  transition:
    box-shadow var(--anim-duration-fast, 140ms) ease-in-out,
    background-color 5000ms ease;
  /* Cover inset: user setting + 1px offset for border */
  --cover-inset-computed: calc(var(--dynamic-views-cover-inset, 0px) + 1px);
}

/* Border as pseudo-element so it appears on top of covers */
.dynamic-views .card::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  box-shadow: inset 0 0 0 1px
    var(--dynamic-views-card-border-color, var(--background-modifier-border));
  pointer-events: none;
}

/* Fade-in animation for batch-appended cards */
.dynamic-views .card.card-fade-in {
  animation: cardFadeIn var(--anim-duration-fast, 140ms) ease-out;
}

@keyframes cardFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Card spacing setting - Bases files only */
.workspace-leaf-content[data-type="bases"] .dynamic-views .card {
  margin: var(--dynamic-views-card-spacing-desktop, 8px) 0;
}

.is-mobile .workspace-leaf-content[data-type="bases"] .dynamic-views .card {
  margin: var(--dynamic-views-card-spacing-mobile, 6px) 0;
}

/* Clickable card cursor */
.dynamic-views .card.clickable-card {
  cursor: pointer;
}

/* Hide card border - explicit setting */
body.dynamic-views-hide-card-border .dynamic-views .card::after {
  box-shadow: none;
}

/* When border hidden: no inset adjustment */
body.dynamic-views-hide-card-border .dynamic-views .card {
  --cover-inset-computed: var(--dynamic-views-cover-inset, 0px);
}

/* Hide border on cards WITH ambient color (dramatic mode only) */
body.dynamic-views-adaptive-text
  .dynamic-views
  .card[data-adaptive-text]::after {
  box-shadow: none;
}

/* Dramatic ambient cards have border hidden: no inset adjustment */
body.dynamic-views-adaptive-text .dynamic-views .card[data-adaptive-text] {
  --cover-inset-computed: var(--dynamic-views-cover-inset, 0px);
}

/* Focus ring - appears after hiding rules to win via cascade */
body .dynamic-views .card:focus-visible::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  box-shadow: inset 0 0 0 2px var(--background-modifier-border-focus);
  pointer-events: none;
  z-index: 10;
}

body.dynamic-views-adaptive-text .dynamic-views .card:focus-visible::after {
  box-shadow:
    inset 0 0 0 2px var(--background-modifier-border-focus),
    inset 0 0 0 4px #d4d4d4;
}

/* Masonry container */
.dynamic-views .masonry-container {
  position: relative;
  height: var(--masonry-height, auto);
  contain: layout style;
}

/* Hide cards during layout recalc - fade out with opacity transition */
/* Works for both ungrouped (.masonry-container on same element) and grouped (nested .masonry-container) */
.dynamic-views .masonry-container.masonry-resizing .card,
.dynamic-views .masonry-resizing .masonry-container .card {
  opacity: 0;
  visibility: hidden;
  transition:
    opacity var(--anim-duration-superfast, 70ms) ease,
    visibility 0s var(--anim-duration-superfast, 70ms);
}

/* Hide end indicator during resize - use display:none to fully remove from flow */
.dynamic-views:has(.masonry-resizing) .dynamic-views-end-indicator {
  display: none;
}

/* Hide cards until masonry positions them (prevents flash at 0,0) */
/* Must match positioned cards' CSS context (position + containment) for accurate height measurement */
/* height: auto overrides grid's height: 100% which causes incorrect 148px skeleton height */
.dynamic-views .masonry-container .card:not(.masonry-positioned) {
  position: absolute;
  opacity: 0;
  width: var(--masonry-width, auto);
  height: auto;
  contain: layout style paint;
}

/* Masonry positioned cards */
.dynamic-views .card.masonry-positioned {
  position: absolute;
  width: var(--masonry-width, auto);
  height: auto;
  left: var(--masonry-left, 0);
  top: var(--masonry-top, 0);
  contain: layout style paint;
  transition:
    opacity var(--anim-duration-superfast, 70ms) ease,
    box-shadow var(--anim-duration-fast, 140ms) ease-in-out,
    background-color 5000ms ease;
}

/* Global spacing between card elements (exclude cover-format cards which use flexbox gap) */
/* Exclude card-properties-bottom which uses margin-top: auto to push to bottom in grid */
.dynamic-views
  .card:not(.image-format-cover)
  > *
  + *:not(.card-properties-bottom) {
  margin-top: var(--size-4-2);
}

/* Fix spacing when title hidden: properties-top visually precedes card-content due to flexbox order,
   but the owl selector above applies margin based on DOM order, not visual order */
.dynamic-views
  .card:not(:has(.card-title)):not(:has(.card-header)):has(.card-properties-top)
  .card-content {
  margin-top: var(--size-4-2);
}

/* Remove owl-pattern margin from properties-top when it's visually first (title hidden) */
.dynamic-views
  .card:not(:has(.card-title)):not(:has(.card-header)):not(:has(.card-subtitle))
  .card-properties-top {
  margin-top: 0;
}

/* Card background options */
body.dynamic-views-card-background-transparent .dynamic-views .card {
  background-color: transparent;
}

body.dynamic-views-card-background-custom .dynamic-views .card {
  background-color: var(
    --dynamic-views-card-background-custom-color,
    var(--background-primary-alt)
  );
}

/* Card background on hover options */
body.dynamic-views-card-background-hover-tinted .dynamic-views .card:hover {
  background-color: var(--background-primary-alt);
}

body.dynamic-views-card-background-hover-transparent
  .dynamic-views
  .card:hover {
  background-color: transparent;
}

body.dynamic-views-card-background-hover-custom .dynamic-views .card:hover {
  background-color: var(
    --dynamic-views-card-background-hover-custom-color,
    var(--background-primary-alt)
  );
}

/* Ambient card background: Uses fallback matching base bg until --ambient-color is set */
body.dynamic-views-ambient-bg-subtle
  .dynamic-views
  .card.image-format-cover:has(.card-cover),
body.dynamic-views-ambient-bg-subtle
  .dynamic-views
  .card.image-format-thumbnail:has(.card-thumbnail),
body.dynamic-views-adaptive-text
  .dynamic-views
  .card.image-format-cover:has(.card-cover),
body.dynamic-views-adaptive-text
  .dynamic-views
  .card.image-format-thumbnail:has(.card-thumbnail) {
  /* Fallback matches base card bg; transitions when --ambient-color is set */
  background-color: var(--ambient-color, var(--background-primary-alt));
}

/* Text color adjustments for ambient card backgrounds (dramatic only) */
/* Excludes backdrop cards - they have separate adaptive text control */
body.dynamic-views-adaptive-text
  .dynamic-views
  .card[data-adaptive-text="light"]:not(.image-format-backdrop) {
  --text-normal: var(--dynamic-views-adaptive-text-light-normal);
  --text-muted: var(--dynamic-views-adaptive-text-light-muted);
  --text-faint: var(--dynamic-views-adaptive-text-light-faint);
}

body.dynamic-views-adaptive-text
  .dynamic-views
  .card[data-adaptive-text="dark"]:not(.image-format-backdrop) {
  --text-normal: var(--dynamic-views-adaptive-text-dark-normal);
  --text-muted: var(--dynamic-views-adaptive-text-dark-muted);
  --text-faint: var(--dynamic-views-adaptive-text-dark-faint);
}

/* Grid mode: card-content fills available space, aligns children to top */
.dynamic-views .dynamic-views-grid .card-content {
  flex-grow: 1;
  align-items: flex-start;
}

/* Grid mode: title-group should not grow - let card-content take extra space */
.dynamic-views .dynamic-views-grid .card-title-group {
  flex-grow: 0;
}

/* Grid mode: inside card-header, title-group SHOULD grow horizontally to fill space */
.dynamic-views .dynamic-views-grid .card-header .card-title-group {
  flex-grow: 1;
}

/* Thumbnail-top: column layout with thumbnail first */
.dynamic-views .card.card-thumbnail-top .card-content {
  flex-direction: column;
}

.dynamic-views .card.card-thumbnail-top .card-content .card-thumbnail {
  order: -1;
}

/* Thumbnail-bottom: column layout, content aligned to top */
.dynamic-views .card.card-thumbnail-bottom .card-content {
  flex-direction: column;
}

.dynamic-views
  .card.card-thumbnail-bottom
  .card-content
  .card-text-preview-wrapper {
  flex: 0 1 auto;
}

@media (hover: hover) {
  .dynamic-views .card:hover::after {
    box-shadow: inset 0 0 0 1px
      var(
        --dynamic-views-card-border-color-hover,
        var(--background-modifier-border-focus)
      );
  }
}

.dynamic-views .card .card-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: var(--size-4-2);
}

.dynamic-views .card-title-group {
  display: flex;
  flex-direction: column;
  flex: 1 1 0;
  min-width: 0;
}

.dynamic-views .card-title {
  font-weight: calc(var(--font-weight) + var(--bold-modifier));
  color: var(--dynamic-views-title-color, var(--text-normal));
  font-family: var(--dynamic-views-title-font, inherit);
  font-size: var(--dynamic-views-title-font-size, var(--font-ui-medium));
  max-width: 100%;
  word-break: break-word;
  text-align: left;
  margin: 0;
  line-height: var(--line-height-tight);
  display: -webkit-box;
  -webkit-line-clamp: var(--dynamic-views-title-lines, 2);
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Extension suffix element (hidden by default, shown in Extension mode) */
.dynamic-views .card-title-ext-suffix {
  display: none;
}

/* Extension mode: use max-height for JS truncation measurement */
body.dynamic-views-file-type-ext .dynamic-views .card-title {
  display: block;
  -webkit-line-clamp: unset;
  -webkit-box-orient: unset;
  max-height: calc(
    var(--dynamic-views-title-lines, 2) * 1em * var(--line-height-tight)
  );
}

/* Show extension suffix inline in Extension mode */
body.dynamic-views-file-type-ext .dynamic-views .card-title-ext-suffix {
  display: inline;
  opacity: 0.6;
  font-weight: normal;
}

/* Extension inside link - use color-mix for text, underline only on hover */
body.dynamic-views-file-type-ext
  .dynamic-views
  .card-title
  a
  .card-title-ext-suffix {
  display: inline;
  opacity: 1;
  color: color-mix(in srgb, currentColor 60%, transparent);
  font-weight: normal;
  text-decoration: none;
}

.dynamic-views .card-title-url-icon {
  flex-shrink: 0;
  /* Compensate for wrapper padding: (26px wrapper - 18px icon) / 2 = 4px */
  margin: -4px;
}

/* File type indicator styles */
.dynamic-views .card-title-ext {
  display: none;
}

.dynamic-views .card-title-icon {
  float: left;
  margin-right: var(--size-2-2);
  display: none;
}

.dynamic-views .card-title-icon svg {
  width: 1em;
  height: calc(1em * var(--line-height-tight));
  vertical-align: bottom;
  color: var(--text-normal);
  stroke-width: var(--icon-xs-stroke-width);
}

/* File type indicator: Badge (box before title) */
body.dynamic-views-file-type-badge .dynamic-views .card-title-ext {
  display: flex;
  align-items: center;
  height: calc(
    var(--dynamic-views-title-font-size, var(--font-ui-medium)) *
      var(--line-height-tight)
  );
  font-size: 0;
  pointer-events: none;
  cursor: default;
  float: left;
  margin-right: var(--size-2-2);
}

body.dynamic-views-file-type-badge .dynamic-views .card-title-ext::before {
  content: attr(data-ext);
  color: var(--text-muted);
  font-family: var(--font-interface, var(--font-text));
  font-size: var(--font-ui-smaller);
  line-height: var(--dynamic-views-title-font-size, var(--font-ui-medium));
  padding: 0 0.33em 0 0.38em; /* Extra 0.05em left to offset letter-spacing trailing space */
  border-radius: 4px;
  background-color: var(--background-modifier-border);
  font-weight: var(--nav-tag-weight);
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

/* File type indicator: Icon */
body.dynamic-views-file-type-icon .dynamic-views .card-title-ext {
  display: none;
}

body.dynamic-views-file-type-icon .dynamic-views .card-title-icon {
  display: block;
  pointer-events: none;
  cursor: default;
}

/* File type indicator: None */
body.dynamic-views-file-type-none .dynamic-views .card-title-ext,
body.dynamic-views-file-type-none .dynamic-views .card-title-icon {
  display: none;
}

.dynamic-views .card-title a,
.dynamic-views .card-title .card-title-link {
  text-decoration: none;
  color: inherit;
  font-weight: inherit;
  cursor: pointer;
}

@media (hover: hover) {
  /* Underline title on hover when open action is "press on title" */
  body.dynamic-views-open-on-title
    .dynamic-views
    .card-title
    :is(a, .card-title-link):hover {
    text-decoration: underline;
    color: var(--text-normal);
  }

  /* Extension suffix underline on hover */
  body.dynamic-views-file-type-ext
    .dynamic-views
    .card-title
    :is(a, .card-title-link):hover
    .card-title-ext-suffix {
    text-decoration: underline;
    text-decoration-color: var(--dynamic-views-title-color, var(--text-normal));
  }
}

.dynamic-views .card-subtitle {
  order: -90;
  color: var(--text-faint);
  font-family: var(--dynamic-views-subtitle-font);
  font-size: var(
    --dynamic-views-subtitle-font-size,
    var(--bases-table-font-size)
  );
  max-width: 100%;
  word-break: break-word;
  text-align: left;
  margin: 0;
  display: block;
  overflow: hidden;
  line-height: var(--line-height-tight);
}

/* Subtitle property content inherits color from subtitle */
.dynamic-views .card-subtitle .property-content,
.dynamic-views .card-subtitle .property-content * {
  color: inherit;
}

/* Subtitle alignment */
body.dynamic-views-subtitle-align-center .dynamic-views .card-subtitle {
  text-align: center;
}

body.dynamic-views-subtitle-align-right .dynamic-views .card-subtitle {
  text-align: right;
}

/* Subtitle wrap mode (default) - override property-content-wrapper's overflow */
.dynamic-views .card-subtitle .property-content-wrapper {
  overflow: hidden;
  flex-wrap: wrap;
}
/* Allow path-wrapper to wrap in subtitle */
body:not(.dynamic-views-subtitle-overflow-scroll)
  .dynamic-views
  .card-subtitle
  .path-wrapper {
  height: auto;
  white-space: normal;
  flex-wrap: wrap;
}
/* Allow path segments to word-break in subtitle */
body:not(.dynamic-views-subtitle-overflow-scroll)
  .dynamic-views
  .card-subtitle
  .path-segment {
  white-space: normal;
  overflow-wrap: break-word;
}

.dynamic-views .card-subtitle .property-content,
.dynamic-views .card-subtitle .text-wrapper,
.dynamic-views
  .card-subtitle
  .text-wrapper
  > span:not(.internal-link):not(.external-link):not(.tag) {
  display: block;
  width: 100%;
  height: auto;
  white-space: normal;
  word-break: break-word;
}

/* Disable fade gradient in wrap mode */
body:not(.dynamic-views-subtitle-overflow-scroll)
  .dynamic-views
  .card-subtitle
  .property-content-wrapper.scroll-gradient-left,
body:not(.dynamic-views-subtitle-overflow-scroll)
  .dynamic-views
  .card-subtitle
  .property-content-wrapper.scroll-gradient-right,
body:not(.dynamic-views-subtitle-overflow-scroll)
  .dynamic-views
  .card-subtitle
  .property-content-wrapper.scroll-gradient-both {
  mask-image: none !important;
  -webkit-mask-image: none !important;
}

/* Subtitle scroll mode */
body.dynamic-views-subtitle-overflow-scroll .dynamic-views .card-subtitle {
  display: block;
  -webkit-line-clamp: unset;
  -webkit-box-orient: unset;
  white-space: nowrap;
  overflow-x: auto;
  scrollbar-width: none;
}

body.dynamic-views-subtitle-overflow-scroll
  .dynamic-views
  .card-subtitle
  .property-content-wrapper {
  overflow-x: auto;
  flex-wrap: nowrap;
}

body.dynamic-views-subtitle-overflow-scroll
  .dynamic-views
  .card-subtitle
  .property-content,
body.dynamic-views-subtitle-overflow-scroll
  .dynamic-views
  .card-subtitle
  .text-wrapper,
body.dynamic-views-subtitle-overflow-scroll
  .dynamic-views
  .card-subtitle
  .text-wrapper
  > span:not(.internal-link):not(.external-link):not(.tag) {
  display: flex;
  width: max-content;
  white-space: nowrap;
}

/* Subtitle divider line (shown when class-toggle is ON) */
/* Divider on card-header when subtitle exists (URL button present) */
body.dynamic-views-subtitle-divider
  .dynamic-views
  .card-header:has(.card-subtitle) {
  padding-bottom: var(--size-4-2);
  border-bottom: 1px solid var(--hr-color);
}
/* No URL button: divider on card-title-group */
body.dynamic-views-subtitle-divider
  .dynamic-views
  .card
  > .card-title-group:has(.card-subtitle) {
  padding-bottom: var(--size-4-2);
  border-bottom: 1px solid var(--hr-color);
}

/* Subtitle above title - flip visual order with CSS order */
body.dynamic-views-subtitle-above .dynamic-views .card-title-group .card-title {
  order: 2;
}
body.dynamic-views-subtitle-above
  .dynamic-views
  .card-title-group
  .card-subtitle {
  order: 1;
}

.dynamic-views .card-content {
  display: flex;
  flex-direction: row;
  gap: var(--size-4-2);
  order: 0; /* Between properties-top (-50) and properties-bottom (50) */
}

/* When card-content only has text preview (no thumbnails), use column layout */
.dynamic-views .card-content:not(:has(.card-thumbnail)):not(:has(.card-cover)) {
  flex-direction: column;
}

/* Thumbnail left: reverse row to place thumbnail on left */
.dynamic-views .card.card-thumbnail-left .card-content {
  flex-direction: row-reverse;
}

.dynamic-views .card-text-preview-wrapper {
  flex: 1;
  min-width: 0;
}

.dynamic-views .card-text-preview {
  color: var(--dynamic-views-text-preview-color, var(--text-muted));
  font-family: var(--dynamic-views-text-preview-font, inherit);
  font-size: var(
    --dynamic-views-text-preview-font-size,
    var(--bases-table-font-size)
  );
  display: -webkit-box;
  -webkit-line-clamp: var(--dynamic-views-text-preview-lines, 5);
  -webkit-box-orient: vertical;
  overflow: hidden;
  line-height: var(--line-height-tight);
  word-break: break-word;
  overflow-wrap: break-word;
  user-select: text;
}

/* Text cursor on text preview when openFileAction is 'title' */
body.dynamic-views-open-on-title .dynamic-views .card-text-preview {
  cursor: text;
}

/* Make all card text selectable when openFileAction is 'title' */
body.dynamic-views-open-on-title .dynamic-views .card-title,
body.dynamic-views-open-on-title .dynamic-views .card-subtitle,
body.dynamic-views-open-on-title .dynamic-views .property-label,
body.dynamic-views-open-on-title .dynamic-views .property-label-inline,
body.dynamic-views-open-on-title .dynamic-views .property-content {
  user-select: text;
  cursor: text;
}

/* Title link: selectable text */
body.dynamic-views-open-on-title .dynamic-views .card-title a,
body.dynamic-views-open-on-title .dynamic-views .card-title .card-title-link {
  user-select: text;
  -webkit-user-select: text;
}

/* Filename segment in file path property: selectable when openFileAction is 'title' */
body.dynamic-views-open-on-title .dynamic-views .filename-segment {
  user-select: text;
  -webkit-user-select: text;
}

/* Path separator: selectable when openFileAction is 'title' for full path copy */
body.dynamic-views-open-on-title .dynamic-views .path-separator {
  user-select: text;
  -webkit-user-select: text;
}

.dynamic-views .card-thumbnail {
  flex-shrink: 0;
  width: var(--dynamic-views-thumbnail-size, 80px);
  height: calc(
    var(--dynamic-views-thumbnail-size, 80px) /
      var(--dynamic-views-image-aspect-ratio, 1)
  );
  overflow: hidden;
  border-radius: var(--dynamic-views-thumbnail-border-radius, 4px);
  pointer-events: none;
}

/* Hide thumbnail placeholder by default */
.dynamic-views .card-thumbnail-placeholder {
  display: none;
}

/* Show thumbnail placeholder when enabled in Style Settings */
body.dynamic-views-show-thumbnail-placeholder
  .dynamic-views
  .card-thumbnail-placeholder {
  display: block;
  flex-shrink: 0;
  width: var(--dynamic-views-thumbnail-size, 80px);
  height: calc(
    var(--dynamic-views-thumbnail-size, 80px) /
      var(--dynamic-views-image-aspect-ratio, 1)
  );
  border-radius: var(--dynamic-views-thumbnail-border-radius, 4px);
  background-color: var(--dynamic-views-image-background-plain);
}

/* Multi-image thumbnail: use drop-shadow on img for consistent look in crop/contain */
.dynamic-views .card-thumbnail.multi-image {
  overflow: visible; /* Allow drop-shadow to extend outside */
}

.dynamic-views .card-thumbnail.multi-image img {
  filter: var(--drop-shadow-l-light-mode);
  border-radius: var(--dynamic-views-thumbnail-border-radius, 4px);
}

.theme-dark .dynamic-views .card-thumbnail.multi-image img {
  filter: var(--drop-shadow-l-dark-mode);
}

.is-mobile .dynamic-views .card-thumbnail.multi-image {
  pointer-events: none;
}

.is-mobile .dynamic-views .card-thumbnail.multi-image img {
  filter: none;
}

/* Bottom spacing for phone to push view end indicator above mobile toolbar */
.is-phone
  .workspace-leaf-content[data-type="bases"]
  .dynamic-views-bases-container {
  margin-bottom: var(--view-bottom-spacing);
}

/* Hide multi-image thumbnail shadow when setting enabled */
body.dynamic-views-hide-thumbnail-shadow
  .dynamic-views
  .card-thumbnail.multi-image
  img {
  filter: none;
}

/* Placeholder still uses box-shadow (no img element) */
body.dynamic-views-show-thumbnail-placeholder
  .dynamic-views
  .card-thumbnail-placeholder.multi-image {
  box-shadow: var(--shadow-l-light-mode);
}

body.dynamic-views-show-thumbnail-placeholder.theme-dark
  .dynamic-views
  .card-thumbnail-placeholder.multi-image {
  box-shadow: var(--shadow-l-dark-mode);
}

body.dynamic-views-show-thumbnail-placeholder.is-mobile
  .dynamic-views
  .card-thumbnail-placeholder.multi-image {
  box-shadow: none;
}

body.dynamic-views-hide-thumbnail-shadow.dynamic-views-show-thumbnail-placeholder
  .dynamic-views
  .card-thumbnail-placeholder.multi-image {
  box-shadow: none;
}

.dynamic-views .card-thumbnail .dynamic-views-image-embed {
  width: 100%;
  height: 100%;
}

.dynamic-views .card-thumbnail img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center center;
  pointer-events: auto;
  border-radius: 0; /* Override theme styles; container handles border-radius */
  opacity: 0;
  transition: opacity 5000ms ease;
}

.dynamic-views .card.cover-ready .card-thumbnail img {
  opacity: 1;
}

/* Thumbnail contain mode */
.dynamic-views .card.card-thumbnail-contain .card-thumbnail img {
  object-fit: contain;
}

/* Thumbnail expand on click - Toggle mode */
body:not(.dynamic-views-image-viewer-disabled)
  .dynamic-views
  .card-thumbnail
  img {
  cursor: zoom-in;
}

body:not(.dynamic-views-image-viewer-disabled)
  .dynamic-views
  .card-thumbnail
  .dynamic-views-image-embed {
  cursor: zoom-in;
}

body:not(.dynamic-views-image-viewer-disabled)
  .dynamic-views
  .card.image-format-cover
  .card-cover
  .dynamic-views-image-embed {
  cursor: zoom-in;
}

body:not(.dynamic-views-image-viewer-disabled)
  .dynamic-views
  .dynamic-views-image-embed {
  pointer-events: auto;
}

body:not(.dynamic-views-image-viewer-disabled)
  .dynamic-views
  .dynamic-views-image-embed
  img {
  pointer-events: none;
  cursor: zoom-in;
}

/* When image viewer disabled, images inherit card cursor (overrides third-party plugins like Image Toolkit) */
body.dynamic-views-image-viewer-disabled
  .dynamic-views
  .dynamic-views-image-embed,
body.dynamic-views-image-viewer-disabled
  .dynamic-views
  .dynamic-views-image-embed
  img {
  cursor: inherit !important;
}

/* Image viewer clone (appended to body with is-zoomed class) */
body:not(.dynamic-views-image-viewer-disabled)
  > .dynamic-views-image-embed.is-zoomed {
  cursor: default;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 50; /* Below Obsidian's notice layer */
  position: fixed;
  height: 100%;
  width: 100%;
  padding: 0;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  pointer-events: auto;
}

/* Ensure drag ghost appears above image viewer overlay */
body:has(.dynamic-views-image-embed.is-zoomed) {
  --layer-dragged-item: 51;
}

/* Constrained mode: overlay styling (desktop, fullscreen toggle off) */
body:not(.dynamic-views-image-viewer-disabled):not(.is-mobile):not(
    .dynamic-views-image-viewer-fullscreen
  )
  > .dynamic-views-image-embed.is-zoomed {
  background: color-mix(
    in srgb,
    var(--background-primary) calc(var(--overlay-opacity, 0.4) * 100%),
    transparent
  );
  transition: background var(--anim-duration-fast, 140ms) ease;
}

/* Constrained mode: solid background when maximized */
body:not(.dynamic-views-image-viewer-disabled):not(.is-mobile):not(
    .dynamic-views-image-viewer-fullscreen
  )
  > .dynamic-views-image-embed.is-zoomed.is-maximized {
  background: var(--background-primary);
}

/* Hide mobile navbar when fullscreen image viewer is active (mobile is always fullscreen) */
body.is-mobile:has(.dynamic-views-image-embed.is-zoomed) .mobile-navbar {
  display: none;
}

/* Fullscreen image viewer: mobile (always) or desktop with toggle on */
body:not(.dynamic-views-image-viewer-disabled).is-mobile
  > .dynamic-views-image-embed.is-zoomed,
body:not(
    .dynamic-views-image-viewer-disabled
  ).dynamic-views-image-viewer-fullscreen:not(.is-mobile)
  > .dynamic-views-image-embed.is-zoomed {
  background: var(--background-modifier-cover);
  position: fixed;
  transition: background var(--anim-duration-fast, 140ms) ease;
}

/* Fullscreen mode: solid background when maximized */
body:not(.dynamic-views-image-viewer-disabled).is-mobile
  > .dynamic-views-image-embed.is-zoomed.is-maximized,
body:not(
    .dynamic-views-image-viewer-disabled
  ).dynamic-views-image-viewer-fullscreen:not(.is-mobile)
  > .dynamic-views-image-embed.is-zoomed.is-maximized {
  background: var(--background-primary);
}

/* Scale image when maximized with panzoom disabled (desktop fullscreen only) */
body.dynamic-views-zoom-disabled.dynamic-views-image-viewer-fullscreen:not(
    .is-mobile
  )
  > .dynamic-views-image-embed.is-zoomed.is-maximized
  img {
  max-height: 100vh;
  max-width: 100vw;
}

body:not(.dynamic-views-image-viewer-disabled)
  > .dynamic-views-image-embed.is-zoomed
  img {
  padding: 0;
  margin: 0;
  width: auto;
  height: auto;
  max-height: 100vh;
  max-width: 100vw;
  object-fit: contain;
  opacity: 1;
  border-radius: 0;
  transition:
    max-height var(--anim-duration-fast, 140ms) ease,
    max-width var(--anim-duration-fast, 140ms) ease;
}

/* Limit zoomed images to 90% viewport (desktop) / 80vh height (mobile, width inherits 100vw from base) */
body:not(.dynamic-views-image-viewer-disabled):not(.is-mobile)
  > .dynamic-views-image-embed.is-zoomed
  img {
  max-height: 90vh;
  max-width: 90vw;
}
body:not(.dynamic-views-image-viewer-disabled).is-mobile
  > .dynamic-views-image-embed.is-zoomed
  img {
  max-height: 80vh;
}

/* Constrained mode (desktop, toggle off): limit to 90% of view */
body:not(.dynamic-views-image-viewer-disabled):not(.is-mobile):not(
    .dynamic-views-image-viewer-fullscreen
  )
  > .dynamic-views-image-embed.is-zoomed
  img {
  max-height: 90%;
  max-width: 90%;
}

/* Constrained mode maximized (desktop, panzoom disabled): scale to 100% */
body.dynamic-views-zoom-disabled:not(.is-mobile):not(
    .dynamic-views-image-viewer-fullscreen
  )
  > .dynamic-views-image-embed.is-zoomed.is-maximized
  img {
  max-height: 100%;
  max-width: 100%;
}

/* Disable drag in fullscreen mode */
body.is-mobile > .dynamic-views-image-embed.is-zoomed img,
body.dynamic-views-image-viewer-fullscreen
  > .dynamic-views-image-embed.is-zoomed
  img {
  -webkit-user-drag: none;
  user-drag: none;
  user-select: none;
}

/* Thumbnail crop alignment overrides */
body.dynamic-views-thumbnail-crop-top .dynamic-views .card-thumbnail img {
  object-position: center top;
}

body.dynamic-views-thumbnail-crop-bottom .dynamic-views .card-thumbnail img {
  object-position: center bottom;
}

/* Cover crop alignment overrides */
body.dynamic-views-cover-crop-top
  .dynamic-views
  .card.image-format-cover
  .card-cover
  img {
  object-position: center top;
}

body.dynamic-views-cover-crop-bottom
  .dynamic-views
  .card.image-format-cover
  .card-cover
  img {
  object-position: center bottom;
}

/* Cover fit mode: Contain mode - images use object-fit: contain */
.dynamic-views .card.card-cover-contain.image-format-cover .card-cover img {
  object-fit: contain;
  object-position: center;
  position: relative;
  border-radius: 0; /* Override theme styles; container handles border-radius */
}

/* Cover backgrounds (all modes)
   Base is opaque to block card bg; ambient overlay via ::after */
.dynamic-views .card.image-format-cover .card-cover {
  background-color: var(--background-secondary);
}

/* Ambient overlay behind image (for contain letterbox + transparent image areas) */
.dynamic-views .card.image-format-cover .card-cover::after {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 0;
  background-color: var(--ambient-color, transparent);
  transition: background-color 5000ms ease;
  border-radius: inherit;
  pointer-events: none;
}

/* Cover background variants */
body.dynamic-views-cover-bg-plain
  .dynamic-views
  .card.image-format-cover
  .card-cover {
  background-color: var(--dynamic-views-image-background-plain);
}
body.dynamic-views-cover-bg-transparent
  .dynamic-views
  .card.image-format-cover
  .card-cover {
  background-color: transparent;
}
body.dynamic-views-cover-bg-custom
  .dynamic-views
  .card.image-format-cover
  .card-cover {
  background-color: var(
    --dynamic-views-cover-background-custom-color,
    var(--dynamic-views-image-background-plain)
  );
}

/* Hide ambient overlay for non-ambient background settings */
body.dynamic-views-cover-bg-plain
  .dynamic-views
  .card.image-format-cover
  .card-cover::after,
body.dynamic-views-cover-bg-transparent
  .dynamic-views
  .card.image-format-cover
  .card-cover::after,
body.dynamic-views-cover-bg-custom
  .dynamic-views
  .card.image-format-cover
  .card-cover::after {
  display: none;
}

/* Masonry cover height: use slider value (crop mode only) */
[data-view-type="dynamic-views-masonry"]
  .card:not(.card-cover-contain).card-cover-top.image-format-cover
  .card-cover,
[data-view-type="dynamic-views-masonry"]
  .card:not(.card-cover-contain).card-cover-bottom.image-format-cover
  .card-cover {
  padding-top: calc(
    var(--dynamic-views-image-aspect-ratio, 0.55) * 100%
  ) !important;
}

/* Masonry contain mode OFF: collapse top/bottom bars only (keep left/right) */
/* Use min(actual, slider) - shrinks only when image is wider than slider ratio */
[data-view-type="dynamic-views-masonry"]
  .card.card-cover-contain.card-cover-top.image-format-cover
  .card-cover,
[data-view-type="dynamic-views-masonry"]
  .card.card-cover-contain.card-cover-bottom.image-format-cover
  .card-cover {
  padding-top: calc(
    min(
        var(
          --actual-aspect-ratio,
          var(--dynamic-views-image-aspect-ratio, 0.55)
        ),
        var(--dynamic-views-image-aspect-ratio, 0.55)
      ) *
      100%
  );
}

/* Masonry contain mode ON: use slider value (top/bottom bars visible) */
body.dynamic-views-masonry-fixed-cover-height
  [data-view-type="dynamic-views-masonry"]
  .card.card-cover-contain.card-cover-top.image-format-cover
  .card-cover,
body.dynamic-views-masonry-fixed-cover-height
  [data-view-type="dynamic-views-masonry"]
  .card.card-cover-contain.card-cover-bottom.image-format-cover
  .card-cover {
  padding-top: calc(var(--dynamic-views-image-aspect-ratio, 0.55) * 100%);
}

/* Slideshow covers always use fixed height (ignore "Fixed cover height" setting) */
[data-view-type="dynamic-views-masonry"]
  .card.card-cover-contain.card-cover-top.image-format-cover
  .card-cover.card-cover-slideshow,
[data-view-type="dynamic-views-masonry"]
  .card.card-cover-contain.card-cover-bottom.image-format-cover
  .card-cover.card-cover-slideshow {
  padding-top: calc(
    var(--dynamic-views-image-aspect-ratio, 0.55) * 100%
  ) !important;
}

/* Masonry contain mode: hide cover until dimensions known (exclude placeholders) */
[data-view-type="dynamic-views-masonry"]
  .card.card-cover-contain:not(.cover-ready).card-cover-top
  .card-cover-wrapper:not(.card-cover-wrapper-placeholder),
[data-view-type="dynamic-views-masonry"]
  .card.card-cover-contain:not(.cover-ready).card-cover-bottom
  .card-cover-wrapper:not(.card-cover-wrapper-placeholder) {
  display: none;
}

/* Masonry contain mode ON: show immediately (no waiting) - exclude placeholders */
body.dynamic-views-masonry-fixed-cover-height
  [data-view-type="dynamic-views-masonry"]
  .card.card-cover-contain:not(.cover-ready).card-cover-top
  .card-cover-wrapper:not(.card-cover-wrapper-placeholder),
body.dynamic-views-masonry-fixed-cover-height
  [data-view-type="dynamic-views-masonry"]
  .card.card-cover-contain:not(.cover-ready).card-cover-bottom
  .card-cover-wrapper:not(.card-cover-wrapper-placeholder) {
  display: block;
}

/* Masonry contain mode ON + placeholder enabled for masonry: show placeholder */
body.dynamic-views-masonry-fixed-cover-height.dynamic-views-show-cover-placeholder-masonry
  [data-view-type="dynamic-views-masonry"]
  .card.card-cover-contain:not(.cover-ready).card-cover-top
  .card-cover-wrapper.card-cover-wrapper-placeholder,
body.dynamic-views-masonry-fixed-cover-height.dynamic-views-show-cover-placeholder-masonry
  [data-view-type="dynamic-views-masonry"]
  .card.card-cover-contain:not(.cover-ready).card-cover-bottom
  .card-cover-wrapper.card-cover-wrapper-placeholder,
body.dynamic-views-masonry-fixed-cover-height.dynamic-views-show-cover-placeholder-both
  [data-view-type="dynamic-views-masonry"]
  .card.card-cover-contain:not(.cover-ready).card-cover-top
  .card-cover-wrapper.card-cover-wrapper-placeholder,
body.dynamic-views-masonry-fixed-cover-height.dynamic-views-show-cover-placeholder-both
  [data-view-type="dynamic-views-masonry"]
  .card.card-cover-contain:not(.cover-ready).card-cover-bottom
  .card-cover-wrapper.card-cover-wrapper-placeholder {
  display: block;
}

/* ==================== CARD COVER FORMAT - FLEXBOX SYSTEM ==================== */

/* Base card setup for cover format */
.dynamic-views .card.image-format-cover {
  position: relative;
  overflow: hidden;
  padding: var(--dynamic-views-card-padding, 8px); /* Card edge padding */
  display: flex;
  flex-direction: column;
  gap: var(--size-4-2); /* Default element spacing */
}

/* Cards with actual cover (not placeholder): no flexbox gap (margins control spacing) */
.dynamic-views
  .card.image-format-cover:has(
    .card-cover-wrapper:not(.card-cover-wrapper-placeholder)
  ) {
  gap: 0;
}

/* Cards with visible placeholder: also no flexbox gap */
/* Grid view placeholders (default or explicit grid setting) */
body:not(.dynamic-views-show-cover-placeholder-masonry):not(
    .dynamic-views-show-cover-placeholder-both
  ):not(.dynamic-views-show-cover-placeholder-none)
  .dynamic-views
  .dynamic-views-grid
  .card.image-format-cover:has(.card-cover-wrapper-placeholder),
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.image-format-cover:has(.card-cover-wrapper-placeholder),
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.image-format-cover:has(.card-cover-wrapper-placeholder),
/* Masonry view placeholders (when visible) */
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.image-format-cover:has(.card-cover-wrapper-placeholder),
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.image-format-cover:has(.card-cover-wrapper-placeholder),
/* Masonry view placeholders (when hidden - grid-only or none setting) */
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-masonry
  .card.image-format-cover:has(.card-cover-wrapper-placeholder),
body.dynamic-views-show-cover-placeholder-none
  .dynamic-views
  .dynamic-views-masonry
  .card.image-format-cover:has(.card-cover-wrapper-placeholder) {
  gap: 0;
}

/* Card content flex setup */
.dynamic-views .card.image-format-cover .card-content {
  flex-direction: row;
  gap: var(--size-4-2);
}

/* Element spacing for cards with actual cover (replaces flexbox gap) */
/* Use lobotomized owl pattern: margin-top on all children after the first */
/* Exclude card-properties-bottom which uses margin-top: auto to push to bottom */
.dynamic-views
  .card.image-format-cover:has(
    .card-cover-wrapper:not(.card-cover-wrapper-placeholder)
  )
  > *
  + *:not(.card-cover-wrapper):not(.card-properties-bottom) {
  margin-top: var(--size-4-2);
}

/* Element spacing for cards with visible placeholder */
/* Grid view (default or explicit setting) */
body:not(.dynamic-views-show-cover-placeholder-masonry):not(
    .dynamic-views-show-cover-placeholder-both
  ):not(.dynamic-views-show-cover-placeholder-none)
  .dynamic-views
  .dynamic-views-grid
  .card.image-format-cover:has(.card-cover-wrapper-placeholder)
  > *
  + *:not(.card-cover-wrapper):not(.card-properties-bottom),
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.image-format-cover:has(.card-cover-wrapper-placeholder)
  > *
  + *:not(.card-cover-wrapper):not(.card-properties-bottom),
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.image-format-cover:has(.card-cover-wrapper-placeholder)
  > *
  + *:not(.card-cover-wrapper):not(.card-properties-bottom),
/* Masonry view (when visible) */
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.image-format-cover:has(.card-cover-wrapper-placeholder)
  > *
  + *:not(.card-cover-wrapper):not(.card-properties-bottom),
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.image-format-cover:has(.card-cover-wrapper-placeholder)
  > *
  + *:not(.card-cover-wrapper):not(.card-properties-bottom),
/* Masonry view (when hidden - grid-only or none setting) */
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-masonry
  .card.image-format-cover:has(.card-cover-wrapper-placeholder)
  > *
  + *:not(.card-cover-wrapper):not(.card-properties-bottom),
body.dynamic-views-show-cover-placeholder-none
  .dynamic-views
  .dynamic-views-masonry
  .card.image-format-cover:has(.card-cover-wrapper-placeholder)
  > *
  + *:not(.card-cover-wrapper):not(.card-properties-bottom) {
  margin-top: var(--size-4-2);
}

/* Title-subtitle gap override for cover cards (higher specificity than owl selectors above) */
.dynamic-views
  .card.image-format-cover:has(
    .card-cover-wrapper:not(.card-cover-wrapper-placeholder)
  )
  .card-title
  + .card-subtitle,
.dynamic-views
  .card.image-format-cover:has(
    .card-cover-wrapper:not(.card-cover-wrapper-placeholder)
  )
  .card-header
  + .card-subtitle,
/* Also apply to placeholder cards */
.dynamic-views
  .card.image-format-cover:has(.card-cover-wrapper-placeholder)
  .card-title
  + .card-subtitle,
.dynamic-views
  .card.image-format-cover:has(.card-cover-wrapper-placeholder)
  .card-header
  + .card-subtitle,
/* Masonry hidden placeholders (higher specificity to beat owl selector) */
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-masonry
  .card.image-format-cover:has(.card-cover-wrapper-placeholder)
  .card-title
  + .card-subtitle,
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-masonry
  .card.image-format-cover:has(.card-cover-wrapper-placeholder)
  .card-header
  + .card-subtitle,
body.dynamic-views-show-cover-placeholder-none
  .dynamic-views
  .dynamic-views-masonry
  .card.image-format-cover:has(.card-cover-wrapper-placeholder)
  .card-title
  + .card-subtitle,
body.dynamic-views-show-cover-placeholder-none
  .dynamic-views
  .dynamic-views-masonry
  .card.image-format-cover:has(.card-cover-wrapper-placeholder)
  .card-header
  + .card-subtitle {
  margin-top: var(--size-2-1);
}

/* ==================== COVER WRAPPER POSITIONING ==================== */

/* Cover wrapper: use cover-specific border-radius, card overflow:hidden clips at corners */
.dynamic-views .card.image-format-cover .card-cover-wrapper {
  border-radius: var(--dynamic-views-cover-border-radius, 0);
  overflow: hidden;
}

/* Cover-top: wrapper with negative margins to bleed to edges */
.dynamic-views .card.card-cover-top.image-format-cover .card-cover-wrapper {
  order: -999;
  margin: calc(
      var(--cover-inset-computed) - var(--dynamic-views-card-padding, 8px)
    )
    calc(var(--cover-inset-computed) - var(--dynamic-views-card-padding, 8px))
    var(--size-4-2)
    calc(var(--cover-inset-computed) - var(--dynamic-views-card-padding, 8px));
}

/* Cover-bottom placeholder: margin-top auto to push to bottom */
.dynamic-views
  .card.card-cover-bottom.image-format-cover
  .card-cover-wrapper.card-cover-wrapper-placeholder {
  order: 999;
  margin: auto
    calc(var(--cover-inset-computed) - var(--dynamic-views-card-padding, 8px))
    calc(var(--cover-inset-computed) - var(--dynamic-views-card-padding, 8px))
    calc(var(--cover-inset-computed) - var(--dynamic-views-card-padding, 8px));
}

/* Cover-bottom: wrapper at end with negative margins to bleed to edges */
.dynamic-views
  .card.card-cover-bottom.image-format-cover
  .card-cover-wrapper:not(.card-cover-wrapper-placeholder) {
  order: 999; /* Last */
  margin: var(--size-4-2)
    calc(var(--cover-inset-computed) - var(--dynamic-views-card-padding, 8px))
    calc(var(--cover-inset-computed) - var(--dynamic-views-card-padding, 8px))
    calc(var(--cover-inset-computed) - var(--dynamic-views-card-padding, 8px));
}

/* ==================== COVER-ONLY CARDS ==================== */
/* When cover is the only visible element, fill entire card */

/* Cover-only cards: zero padding, reset wrapper margins */
.dynamic-views
  .card.card-cover-top.image-format-cover:not(:has(.card-title)):not(
    :has(.card-header)
  ):not(:has(.card-subtitle)):not(:has(.card-content)):not(
    :has(.card-properties-top)
  ):not(:has(.card-properties-bottom)),
.dynamic-views
  .card.card-cover-bottom.image-format-cover:not(:has(.card-title)):not(
    :has(.card-header)
  ):not(:has(.card-subtitle)):not(:has(.card-content)):not(
    :has(.card-properties-top)
  ):not(:has(.card-properties-bottom)) {
  padding: 0;
}

/* Reset negative margins since padding is 0 */
.dynamic-views
  .card.card-cover-top.image-format-cover:not(:has(.card-title)):not(
    :has(.card-header)
  ):not(:has(.card-subtitle)):not(:has(.card-content)):not(
    :has(.card-properties-top)
  ):not(:has(.card-properties-bottom))
  .card-cover-wrapper,
.dynamic-views
  .card.card-cover-bottom.image-format-cover:not(:has(.card-title)):not(
    :has(.card-header)
  ):not(:has(.card-subtitle)):not(:has(.card-content)):not(
    :has(.card-properties-top)
  ):not(:has(.card-properties-bottom))
  .card-cover-wrapper {
  margin: 0;
}

/* Cover-left: wrapper positioned at edges */
.dynamic-views .card.card-cover-left.image-format-cover .card-cover-wrapper {
  position: absolute;
  top: var(--cover-inset-computed);
  left: var(--cover-inset-computed);
  bottom: var(--cover-inset-computed);
  right: auto !important;
  width: var(--dynamic-views-side-cover-width, 200px);
}

/* Cover-right: wrapper positioned at edges */
.dynamic-views .card.card-cover-right.image-format-cover .card-cover-wrapper {
  position: absolute;
  top: var(--cover-inset-computed);
  right: var(--cover-inset-computed);
  bottom: var(--cover-inset-computed);
  left: auto !important;
  width: var(--dynamic-views-side-cover-width, 200px);
}

/* ==================== COVER ELEMENT STYLING ==================== */

/* Cover-top/bottom: aspect ratio using padding-top hack */
.dynamic-views .card.card-cover-top.image-format-cover .card-cover,
.dynamic-views .card.card-cover-bottom.image-format-cover .card-cover {
  width: 100%;
  height: 0;
  padding-top: calc(var(--dynamic-views-image-aspect-ratio, 0.55) * 100%);
  position: relative;
  overflow: hidden;
}

/* All covers: border radius */
.dynamic-views .card.image-format-cover .card-cover {
  border-radius: var(--dynamic-views-cover-border-radius, 0);
}

/* Circular cover: 50% makes any shape circular */
body.dynamic-views-cover-circular
  .dynamic-views
  .card.image-format-cover
  .card-cover-wrapper,
body.dynamic-views-cover-circular
  .dynamic-views
  .card.image-format-cover
  .card-cover,
body.dynamic-views-cover-circular
  .dynamic-views
  .card.image-format-cover
  .card-cover-placeholder {
  border-radius: 50%;
}

/* Cover-left/right: full height */
.dynamic-views .card.card-cover-left.image-format-cover .card-cover,
.dynamic-views .card.card-cover-right.image-format-cover .card-cover {
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden;
}

/* Image element inside cover */
.dynamic-views .card.image-format-cover .card-cover .dynamic-views-image-embed {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.dynamic-views .card.image-format-cover .card-cover img {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
  object-fit: cover;
  object-position: center center;
  border-radius: 0; /* Override theme styles; container handles border-radius */
  opacity: 0;
  transition: opacity 5000ms ease;
}

.dynamic-views .card.image-format-cover.cover-ready .card-cover img {
  opacity: 1;
}

/* Hover zoom for cover images (only when enabled via Style Settings, desktop only) */
@media (hover: hover) {
  /* Base transition for single-image covers */
  body.dynamic-views-cover-hover-zoom-cover
    .dynamic-views
    .card.image-format-cover
    .card-cover:not(.card-cover-slideshow)
    .dynamic-views-image-embed
    img,
  body.dynamic-views-cover-hover-zoom-card
    .dynamic-views
    .card.image-format-cover
    .card-cover:not(.card-cover-slideshow)
    .dynamic-views-image-embed
    img {
    transition:
      transform var(--anim-duration-fast, 140ms) ease,
      opacity 5000ms ease;
  }

  /* Base transition for slideshow covers - use scale property to not conflict with slide animations */
  body.dynamic-views-cover-hover-zoom-cover
    .dynamic-views
    .card.image-format-cover
    .card-cover-slideshow
    .dynamic-views-image-embed
    img,
  body.dynamic-views-cover-hover-zoom-card
    .dynamic-views
    .card.image-format-cover
    .card-cover-slideshow
    .dynamic-views-image-embed
    img {
    transition:
      scale var(--anim-duration-fast, 140ms) ease,
      opacity 5000ms ease;
  }

  /* Hover over cover: zoom when hovering cover element (single image) */
  body.dynamic-views-cover-hover-zoom-cover
    .dynamic-views
    .card.image-format-cover
    .card-cover:not(.card-cover-slideshow):hover
    .dynamic-views-image-embed
    img {
    transform: scale(1.05);
  }

  /* Hover over cover: zoom when hovering cover element (slideshow - only eligible image) */
  body.dynamic-views-cover-hover-zoom-cover
    .dynamic-views
    .card.image-format-cover
    .card-cover-slideshow:hover
    .dynamic-views-image-embed
    img.hover-zoom-eligible {
    scale: 1.05;
  }

  /* Hover over card: zoom when hovering anywhere on card (single image) */
  body.dynamic-views-cover-hover-zoom-card
    .dynamic-views
    .card.image-format-cover:hover
    .card-cover:not(.card-cover-slideshow)
    .dynamic-views-image-embed
    img {
    transform: scale(1.05);
  }

  /* Hover over card: zoom when hovering anywhere on card (slideshow - only eligible image) */
  body.dynamic-views-cover-hover-zoom-card
    .dynamic-views
    .card.image-format-cover:hover
    .card-cover-slideshow
    .dynamic-views-image-embed
    img.hover-zoom-eligible {
    scale: 1.05;
  }
}

/* ==================== COVER-CONTENT BORDER ==================== */

/* Border between cover and card content (when enabled via Style Settings) */
body.dynamic-views-show-cover-border
  .dynamic-views
  .card.card-cover-top.image-format-cover
  .card-cover-wrapper {
  border-bottom: 1px solid
    var(--dynamic-views-card-border-color, var(--background-modifier-border));
}

body.dynamic-views-show-cover-border
  .dynamic-views
  .card.card-cover-bottom.image-format-cover
  .card-cover-wrapper {
  border-top: 1px solid
    var(--dynamic-views-card-border-color, var(--background-modifier-border));
}

body.dynamic-views-show-cover-border
  .dynamic-views
  .card.card-cover-left.image-format-cover
  .card-cover-wrapper {
  border-right: 1px solid
    var(--dynamic-views-card-border-color, var(--background-modifier-border));
}

body.dynamic-views-show-cover-border
  .dynamic-views
  .card.card-cover-right.image-format-cover
  .card-cover-wrapper {
  border-left: 1px solid
    var(--dynamic-views-card-border-color, var(--background-modifier-border));
}

/* ==================== COVER PLACEHOLDERS ==================== */

/* Placeholder base styles: hidden by default, with border radius */
.dynamic-views .card.image-format-cover .card-cover-placeholder {
  display: none;
  border-radius: var(--dynamic-views-cover-border-radius, 0);
}

/* Placeholder background: follows cover background setting */
/* Plain */
body.dynamic-views-cover-bg-plain
  .dynamic-views
  .card.image-format-cover
  .card-cover-placeholder {
  background-color: var(--dynamic-views-image-background-plain);
}
/* Ambient: fallback to plain since no image to extract from */
body.dynamic-views-cover-bg-ambient
  .dynamic-views
  .card.image-format-cover
  .card-cover-placeholder {
  background-color: var(--dynamic-views-image-background-plain);
}
/* Custom */
body.dynamic-views-cover-bg-custom
  .dynamic-views
  .card.image-format-cover
  .card-cover-placeholder {
  background-color: var(
    --dynamic-views-cover-background-custom-color,
    var(--dynamic-views-image-background-plain)
  );
}
/* Transparent */
body.dynamic-views-cover-bg-transparent
  .dynamic-views
  .card.image-format-cover
  .card-cover-placeholder {
  background-color: transparent;
}

/* Show placeholder in grid view by default (when no Style Settings class present) */
body:not(.dynamic-views-show-cover-placeholder-masonry):not(
    .dynamic-views-show-cover-placeholder-both
  ):not(.dynamic-views-show-cover-placeholder-none)
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-top.image-format-cover
  .card-cover-placeholder,
body:not(.dynamic-views-show-cover-placeholder-masonry):not(
    .dynamic-views-show-cover-placeholder-both
  ):not(.dynamic-views-show-cover-placeholder-none)
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-bottom.image-format-cover
  .card-cover-placeholder {
  display: block;
  width: 100%;
  height: 0;
  padding-top: calc(var(--dynamic-views-image-aspect-ratio, 0.55) * 100%);
}

body:not(.dynamic-views-show-cover-placeholder-masonry):not(
    .dynamic-views-show-cover-placeholder-both
  ):not(.dynamic-views-show-cover-placeholder-none)
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover
  .card-cover-placeholder,
body:not(.dynamic-views-show-cover-placeholder-masonry):not(
    .dynamic-views-show-cover-placeholder-both
  ):not(.dynamic-views-show-cover-placeholder-none)
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover
  .card-cover-placeholder {
  display: block;
  width: 100%;
  height: 100%;
}

/* Show placeholder for top/bottom covers in grid view */
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-top.image-format-cover
  .card-cover-placeholder,
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-bottom.image-format-cover
  .card-cover-placeholder,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-top.image-format-cover
  .card-cover-placeholder,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-bottom.image-format-cover
  .card-cover-placeholder {
  display: block;
  width: 100%;
  height: 0;
  padding-top: calc(var(--dynamic-views-image-aspect-ratio, 0.55) * 100%);
}

/* Show placeholder for top/bottom covers in masonry view */
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-top.image-format-cover
  .card-cover-placeholder,
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-bottom.image-format-cover
  .card-cover-placeholder,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-top.image-format-cover
  .card-cover-placeholder,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-bottom.image-format-cover
  .card-cover-placeholder {
  display: block;
  width: 100%;
  height: 0;
  padding-top: calc(var(--dynamic-views-image-aspect-ratio, 0.55) * 100%);
}

/* Show placeholder for left/right covers in grid view */
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover
  .card-cover-placeholder,
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover
  .card-cover-placeholder,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover
  .card-cover-placeholder,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover
  .card-cover-placeholder {
  display: block;
  width: 100%;
  height: 100%;
}

/* Show placeholder for left/right covers in masonry view */
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover
  .card-cover-placeholder,
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover
  .card-cover-placeholder,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover
  .card-cover-placeholder,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover
  .card-cover-placeholder {
  display: block;
  width: 100%;
  height: 100%;
}

/* Hide placeholder-only wrappers when placeholder shouldn't show */

/* Grid view: hide when setting is "In Masonry view" or "Don't show" */
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-grid
  .card-cover-wrapper.card-cover-wrapper-placeholder,
body.dynamic-views-show-cover-placeholder-none
  .dynamic-views
  .dynamic-views-grid
  .card-cover-wrapper.card-cover-wrapper-placeholder {
  display: none;
}

/* Masonry view: hide when setting is "In Grid view" or "Don't show" */
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-masonry
  .card-cover-wrapper.card-cover-wrapper-placeholder,
body.dynamic-views-show-cover-placeholder-none
  .dynamic-views
  .dynamic-views-masonry
  .card-cover-wrapper.card-cover-wrapper-placeholder {
  display: none;
}

/* ==================== CONDITIONAL SIDE COVER SPACING ==================== */

/* Grid view: spacing for cards with actual covers OR when placeholder should show */

/* Cover-left: content padding (use > to avoid double-constraining nested elements) */
.dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover)
  > .card-title-group,
.dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover)
  > .card-header,
.dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover)
  > .card-content,
.dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover)
  > .card-properties,
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-title-group,
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-header,
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-content,
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-properties,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-title-group,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-header,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-content,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-properties {
  max-width: calc(100% - var(--dynamic-views-side-cover-content-padding));
  margin-left: var(--dynamic-views-side-cover-content-padding);
}

/* Cover-left: minimum card height */
.dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover),
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder),
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder) {
  min-height: var(--dynamic-views-side-cover-min-height, 150px);
}

/* Cover-right: content padding (use > to avoid double-constraining nested elements) */
.dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover)
  > .card-title-group,
.dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover)
  > .card-header,
.dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover)
  > .card-content,
.dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover)
  > .card-properties,
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-title-group,
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-header,
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-content,
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-properties,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-title-group,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-header,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-content,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-properties {
  max-width: calc(100% - var(--dynamic-views-side-cover-content-padding));
}

/* Cover-right: minimum card height */
.dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover),
body.dynamic-views-show-cover-placeholder-grid
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder),
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-grid
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder) {
  min-height: var(--dynamic-views-side-cover-min-height, 150px);
}

/* Masonry view: spacing for cards with actual covers OR when placeholder should show */

/* Cover-left: content padding (use > to avoid double-constraining nested elements) */
.dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover)
  > .card-title-group,
.dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover)
  > .card-header,
.dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover)
  > .card-content,
.dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover)
  > .card-properties,
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-title-group,
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-header,
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-content,
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-properties,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-title-group,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-header,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-content,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder)
  > .card-properties {
  max-width: calc(100% - var(--dynamic-views-side-cover-content-padding));
  margin-left: var(--dynamic-views-side-cover-content-padding);
}

/* Cover-left: minimum card height */
.dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover),
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder),
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-left.image-format-cover:has(.card-cover-placeholder) {
  min-height: var(--dynamic-views-side-cover-min-height, 150px);
}

/* Cover-right: content padding (use > to avoid double-constraining nested elements) */
.dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover)
  > .card-title-group,
.dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover)
  > .card-header,
.dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover)
  > .card-content,
.dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover)
  > .card-properties,
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-title-group,
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-header,
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-content,
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-properties,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-title-group,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-header,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-content,
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder)
  > .card-properties {
  max-width: calc(100% - var(--dynamic-views-side-cover-content-padding));
}

/* Cover-right: minimum card height */
.dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover),
body.dynamic-views-show-cover-placeholder-masonry
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder),
body.dynamic-views-show-cover-placeholder-both
  .dynamic-views
  .dynamic-views-masonry
  .card.card-cover-right.image-format-cover:has(.card-cover-placeholder) {
  min-height: var(--dynamic-views-side-cover-min-height, 150px);
}

/* ==================== BACKGROUND FORMAT ==================== */

/* Background format - image fills entire card */
.dynamic-views .card.image-format-backdrop {
  position: relative;
  overflow: hidden;
  --backdrop-inset: 1px;
}

.dynamic-views .card.image-format-backdrop .card-backdrop {
  position: absolute;
  inset: calc(var(--backdrop-inset) - var(--dynamic-views-card-padding, 8px));
  z-index: 0;
  pointer-events: none;
}

/* No border = no inset */
body.dynamic-views-hide-card-border .dynamic-views .card.image-format-backdrop {
  --backdrop-inset: 0px;
}

.dynamic-views .card.image-format-backdrop .card-backdrop img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  opacity: 0;
  transition: opacity 5000ms ease;
}

.dynamic-views .card.image-format-backdrop.cover-ready .card-backdrop img {
  opacity: 1;
}

.dynamic-views
  .card.image-format-backdrop.card-cover-contain
  .card-backdrop
  img {
  object-fit: contain;
}

/* Overlay for text readability */
.dynamic-views .card.image-format-backdrop .card-backdrop::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  backdrop-filter: blur(var(--dynamic-views-backdrop-overlay-blur, 0px));
}

/* Overlay theme: Match theme (default) */
body.dynamic-views-backdrop-theme-match.theme-dark
  .dynamic-views
  .card.image-format-backdrop
  .card-backdrop::after {
  background: rgb(
    0 0 0 / calc(var(--dynamic-views-backdrop-overlay-dark, 40) * 1%)
  );
}

body.dynamic-views-backdrop-theme-match.theme-light
  .dynamic-views
  .card.image-format-backdrop
  .card-backdrop::after {
  background: rgb(
    255 255 255 / calc(var(--dynamic-views-backdrop-overlay-light, 70) * 1%)
  );
}

/* Overlay theme: Light (forced) */
body.dynamic-views-backdrop-theme-light
  .dynamic-views
  .card.image-format-backdrop
  .card-backdrop::after {
  background: rgb(
    255 255 255 / calc(var(--dynamic-views-backdrop-overlay-light, 70) * 1%)
  );
}

/* Overlay theme: Dark (forced) */
body.dynamic-views-backdrop-theme-dark
  .dynamic-views
  .card.image-format-backdrop
  .card-backdrop::after {
  background: rgb(
    0 0 0 / calc(var(--dynamic-views-backdrop-overlay-dark, 40) * 1%)
  );
}

/* Overlay theme: Disable */
body.dynamic-views-backdrop-theme-disable
  .dynamic-views
  .card.image-format-backdrop
  .card-backdrop::after {
  display: none;
}

/* Card content stacks above background image */
.dynamic-views .card.image-format-backdrop .card-content,
.dynamic-views .card.image-format-backdrop .card-title-group {
  position: relative;
  z-index: 1;
}

/* Hover reveal: hide content by default (only if card has image) */
body.dynamic-views-backdrop-hover-reveal
  .dynamic-views
  .card.image-format-backdrop:has(.card-backdrop)
  .card-title-group,
body.dynamic-views-backdrop-hover-reveal
  .dynamic-views
  .card.image-format-backdrop:has(.card-backdrop)
  .card-content,
body.dynamic-views-backdrop-hover-reveal
  .dynamic-views
  .card.image-format-backdrop:has(.card-backdrop)
  .card-properties-top,
body.dynamic-views-backdrop-hover-reveal
  .dynamic-views
  .card.image-format-backdrop:has(.card-backdrop)
  .card-properties-bottom {
  opacity: 0;
  transition: opacity var(--anim-duration-moderate, 300ms);
}

/* Hover reveal: show content on hover */
body.dynamic-views-backdrop-hover-reveal
  .dynamic-views
  .card.image-format-backdrop:has(.card-backdrop):hover
  .card-title-group,
body.dynamic-views-backdrop-hover-reveal
  .dynamic-views
  .card.image-format-backdrop:has(.card-backdrop):hover
  .card-content,
body.dynamic-views-backdrop-hover-reveal
  .dynamic-views
  .card.image-format-backdrop:has(.card-backdrop):hover
  .card-properties-top,
body.dynamic-views-backdrop-hover-reveal
  .dynamic-views
  .card.image-format-backdrop:has(.card-backdrop):hover
  .card-properties-bottom {
  opacity: 1;
}

/* Hover reveal: hide overlay by default (each theme variant) */
body.dynamic-views-backdrop-hover-reveal.dynamic-views-backdrop-theme-match.theme-dark
  .dynamic-views
  .card.image-format-backdrop
  .card-backdrop::after,
body.dynamic-views-backdrop-hover-reveal.dynamic-views-backdrop-theme-match.theme-light
  .dynamic-views
  .card.image-format-backdrop
  .card-backdrop::after,
body.dynamic-views-backdrop-hover-reveal.dynamic-views-backdrop-theme-light
  .dynamic-views
  .card.image-format-backdrop
  .card-backdrop::after,
body.dynamic-views-backdrop-hover-reveal.dynamic-views-backdrop-theme-dark
  .dynamic-views
  .card.image-format-backdrop
  .card-backdrop::after {
  background: transparent;
  backdrop-filter: blur(0px);
  transition: background var(--anim-duration-moderate, 300ms);
}

/* Hover reveal: show overlay on hover (restore configured strength) */
body.dynamic-views-backdrop-hover-reveal.dynamic-views-backdrop-theme-match.theme-dark
  .dynamic-views
  .card.image-format-backdrop:hover
  .card-backdrop::after {
  background: rgb(
    0 0 0 / calc(var(--dynamic-views-backdrop-overlay-dark, 40) * 1%)
  );
  backdrop-filter: blur(var(--dynamic-views-backdrop-overlay-blur, 0px));
}

body.dynamic-views-backdrop-hover-reveal.dynamic-views-backdrop-theme-match.theme-light
  .dynamic-views
  .card.image-format-backdrop:hover
  .card-backdrop::after {
  background: rgb(
    255 255 255 / calc(var(--dynamic-views-backdrop-overlay-light, 70) * 1%)
  );
  backdrop-filter: blur(var(--dynamic-views-backdrop-overlay-blur, 0px));
}

body.dynamic-views-backdrop-hover-reveal.dynamic-views-backdrop-theme-light
  .dynamic-views
  .card.image-format-backdrop:hover
  .card-backdrop::after {
  background: rgb(
    255 255 255 / calc(var(--dynamic-views-backdrop-overlay-light, 70) * 1%)
  );
  backdrop-filter: blur(var(--dynamic-views-backdrop-overlay-blur, 0px));
}

body.dynamic-views-backdrop-hover-reveal.dynamic-views-backdrop-theme-dark
  .dynamic-views
  .card.image-format-backdrop:hover
  .card-backdrop::after {
  background: rgb(
    0 0 0 / calc(var(--dynamic-views-backdrop-overlay-dark, 40) * 1%)
  );
  backdrop-filter: blur(var(--dynamic-views-backdrop-overlay-blur, 0px));
}

/* Backdrop sizing: image ratio mode (only cards with image) */
body.dynamic-views-backdrop-height-ratio
  .dynamic-views
  .card.image-format-backdrop:has(.card-backdrop) {
  aspect-ratio: var(--dynamic-views-image-aspect-ratio, 1);
}

/* Backdrop text color overrides (light overlay → dark text) */
/* Excludes cards with data-adaptive-text (luminance-based when overlay transparent) */
body:not(
    .dynamic-views-backdrop-no-adaptive-text
  ).dynamic-views-backdrop-theme-light
  .dynamic-views
  .card.image-format-backdrop:not([data-adaptive-text]):has(.card-backdrop),
body:not(
    .dynamic-views-backdrop-no-adaptive-text
  ).dynamic-views-backdrop-theme-match.theme-light
  .dynamic-views
  .card.image-format-backdrop:not([data-adaptive-text]):has(.card-backdrop) {
  --text-normal: var(--dynamic-views-adaptive-text-dark-normal);
  --text-muted: var(--dynamic-views-adaptive-text-dark-muted);
  --text-faint: var(--dynamic-views-adaptive-text-dark-faint);
}

/* Backdrop text color overrides (dark overlay → light text) */
/* Excludes cards with data-adaptive-text (luminance-based when overlay transparent) */
body:not(
    .dynamic-views-backdrop-no-adaptive-text
  ).dynamic-views-backdrop-theme-dark
  .dynamic-views
  .card.image-format-backdrop:not([data-adaptive-text]):has(.card-backdrop),
body:not(
    .dynamic-views-backdrop-no-adaptive-text
  ).dynamic-views-backdrop-theme-match.theme-dark
  .dynamic-views
  .card.image-format-backdrop:not([data-adaptive-text]):has(.card-backdrop) {
  --text-normal: var(--dynamic-views-adaptive-text-light-normal);
  --text-muted: var(--dynamic-views-adaptive-text-light-muted);
  --text-faint: var(--dynamic-views-adaptive-text-light-faint);
}

/* Backdrop text color overrides (luminance-based) */
/* Applies when tint disabled OR overlay transparent (data-adaptive-text set by JS) */
body:not(.dynamic-views-backdrop-no-adaptive-text)
  .dynamic-views
  .card.image-format-backdrop[data-adaptive-text="light"]:has(.card-backdrop) {
  --text-normal: var(--dynamic-views-adaptive-text-light-normal);
  --text-muted: var(--dynamic-views-adaptive-text-light-muted);
  --text-faint: var(--dynamic-views-adaptive-text-light-faint);
}

body:not(.dynamic-views-backdrop-no-adaptive-text)
  .dynamic-views
  .card.image-format-backdrop[data-adaptive-text="dark"]:has(.card-backdrop) {
  --text-normal: var(--dynamic-views-adaptive-text-dark-normal);
  --text-muted: var(--dynamic-views-adaptive-text-dark-muted);
  --text-faint: var(--dynamic-views-adaptive-text-dark-faint);
}

/* ==================== SLIDESHOW STYLES ==================== */

/* Dual stacked images for slideshow */
.dynamic-views .slideshow-img {
  position: absolute !important;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Higher specificity to override .card.image-format-cover .card-cover img z-index */
.dynamic-views .card.image-format-cover .card-cover .slideshow-img-current {
  z-index: 2 !important;
}

.dynamic-views .card.image-format-cover .card-cover .slideshow-img-next {
  z-index: 1;
}

/* Hide next image when not animating (empty src shows broken icon) */
.dynamic-views
  .slideshow-img-next:not(.slideshow-enter-left):not(.slideshow-enter-right) {
  visibility: hidden;
}

/* Slideshow animations - dual image choreography */
@keyframes slideshow-exit-left {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(-100%);
    opacity: 0;
  }
}

@keyframes slideshow-exit-right {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}

@keyframes slideshow-enter-left {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideshow-enter-right {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.dynamic-views .slideshow-exit-left {
  animation: slideshow-exit-left var(--anim-duration-moderate, 300ms) ease
    forwards;
}

.dynamic-views .slideshow-exit-right {
  animation: slideshow-exit-right var(--anim-duration-moderate, 300ms) ease
    forwards;
}

.dynamic-views .slideshow-enter-left {
  animation: slideshow-enter-left var(--anim-duration-moderate, 300ms) ease
    forwards;
}

.dynamic-views .slideshow-enter-right {
  animation: slideshow-enter-right var(--anim-duration-moderate, 300ms) ease
    forwards;
}

/* Navigation arrows */
.dynamic-views .slideshow-nav-left,
.dynamic-views .slideshow-nav-right {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 24px;
  height: 24px;
  user-select: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 3;
  opacity: 0;
  transition: opacity var(--anim-duration-moderate, 300ms) ease;
}

.dynamic-views .slideshow-nav-left {
  left: var(--size-2-2);
}

.dynamic-views .slideshow-nav-right {
  right: var(--size-2-2);
}

/* Show arrows on hover (desktop only - mobile uses swipe gestures) */
@media (hover: hover) {
  .dynamic-views .card-cover-slideshow:hover .slideshow-nav-left,
  .dynamic-views .card-cover-slideshow:hover .slideshow-nav-right {
    opacity: 1;
  }
}

/* Arrow icons */
.dynamic-views .slideshow-nav-left svg,
.dynamic-views .slideshow-nav-right svg {
  width: 24px;
  height: 24px;
  filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.6))
    drop-shadow(0 0 4px rgba(0, 0, 0, 0.4));
}

.theme-light .dynamic-views .slideshow-nav-left svg,
.theme-light .dynamic-views .slideshow-nav-right svg {
  color: white;
}

.theme-dark .dynamic-views .slideshow-nav-left svg,
.theme-dark .dynamic-views .slideshow-nav-right svg {
  color: var(--color-base-100);
}

/* Mobile: Hide nav arrows (use swipe gestures instead) */
.is-mobile .dynamic-views .slideshow-nav-left,
.is-mobile .dynamic-views .slideshow-nav-right {
  display: none;
}

/* Hide nav arrows when setting enabled */
body.dynamic-views-hide-slideshow-arrows .dynamic-views .slideshow-nav-left,
body.dynamic-views-hide-slideshow-arrows .dynamic-views .slideshow-nav-right {
  display: none;
}

/* Slideshow indicator */
.dynamic-views .slideshow-indicator {
  position: absolute;
  right: max(calc(var(--dynamic-views-card-padding, 8px) - 4px), 4px);
  bottom: max(calc(var(--dynamic-views-card-padding, 8px) - 4px), 4px);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  z-index: 3;
  pointer-events: none;
  transition: opacity var(--anim-duration-moderate, 300ms) ease;
}

/* Hide slideshow indicator when toggle is on */
body.dynamic-views-hide-slideshow-indicator
  .dynamic-views
  .slideshow-indicator {
  display: none;
}

/* Hide indicator when nav buttons appear on hover */
.dynamic-views .card-cover-slideshow:hover .slideshow-indicator {
  opacity: 0;
}

.dynamic-views .slideshow-indicator svg {
  width: 16px;
  height: 16px;
  filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.6))
    drop-shadow(0 0 4px rgba(0, 0, 0, 0.4));
}

.theme-light .dynamic-views .slideshow-indicator svg {
  color: white;
}

.theme-dark .dynamic-views .slideshow-indicator svg {
  color: var(--color-base-100);
}

/* Mobile: Larger indicator */
.is-mobile .dynamic-views .slideshow-indicator {
  width: 22px;
  height: 22px;
}

.is-mobile .dynamic-views .slideshow-indicator svg {
  width: 18px;
  height: 18px;
}

/* Base properties container styles */
.dynamic-views .card-properties {
  font-size: var(
    --dynamic-views-property-font-size,
    var(--bases-table-font-size)
  );
  color: var(--text-faint);
  line-height: var(--line-height-tight);
  white-space: nowrap;
  min-width: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  gap: var(--size-2-2);
}

/* Timestamp wrapper - flex container for icon positioning */
.dynamic-views .property-content > span:has(.timestamp-icon) {
  display: inline-flex;
  align-items: center;
  gap: 0;
}

/* Timestamp icon - visible by default with "edge" positioning */
.dynamic-views .timestamp-icon {
  display: inline-flex;
  flex-shrink: 0;
  align-self: center;
  opacity: 0.7;
  width: 1em;
  height: 1em;
  margin-right: var(--size-2-2);
}

/* Edge positioning is default: even fields show icon on right ONLY in side-by-side */
.dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .timestamp-icon {
  order: 2;
  margin-right: 0;
  margin-left: var(--size-2-2);
}

/* Hide icon when "hide" option selected */
body.dynamic-views-timestamp-icon-hide .dynamic-views .timestamp-icon {
  display: none;
}

/* When icon is on right for all fields */
body.dynamic-views-timestamp-icon-right .dynamic-views .timestamp-icon {
  order: 2;
  margin-right: 0;
  margin-left: var(--size-2-2);
}

/* Center positioning: odd fields show icon on right ONLY in side-by-side */
body.dynamic-views-timestamp-icon-center
  .dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-1,
    .property-field-3,
    .property-field-5,
    .property-field-7,
    .property-field-9,
    .property-field-11,
    .property-field-13
  )
  .timestamp-icon {
  order: 2;
  margin-right: 0;
  margin-left: var(--size-2-2);
}

/* Center positioning: even fields show icon on left ONLY in side-by-side */
body.dynamic-views-timestamp-icon-center
  .dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .timestamp-icon {
  order: 0;
  margin-right: var(--size-2-2);
  margin-left: 0;
}

/* Left positioning: even fields reset to left ONLY in side-by-side (counters edge default) */
body.dynamic-views-timestamp-icon-left
  .dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .timestamp-icon {
  order: 0;
  margin-right: var(--size-2-2);
  margin-left: 0;
}

/* Subtitle timestamp icon: center/right moves icon to right side */
body:is(
    .dynamic-views-timestamp-icon-center,
    .dynamic-views-timestamp-icon-right
  )
  .dynamic-views
  .card-subtitle
  .timestamp-icon {
  order: 2;
  margin-right: 0;
  margin-left: var(--size-2-2);
}

.dynamic-views .timestamp-icon svg {
  width: 100% !important;
  height: 100% !important;
  display: block;
}

.dynamic-views .tags-wrapper {
  display: flex;
  align-items: center;
  gap: var(--size-2-2);
  white-space: nowrap;
  flex-shrink: 0;
  min-width: 0;
  min-height: 20px;
}

.dynamic-views .path-wrapper {
  display: inline-flex;
  align-items: center;
  white-space: nowrap;
  flex-shrink: 0;
  height: 20px;
}

.dynamic-views .text-wrapper {
  display: inline-flex;
  align-items: center;
  white-space: nowrap;
  flex-shrink: 0;
  height: 20px;
}

/* Preserve whitespace in text spans within flex containers */
.dynamic-views
  .text-wrapper
  > span:not(.internal-link):not(.external-link):not(.tag) {
  white-space: pre;
}

/* Path segment wrappers - inline-block needed for drag support on filename */
.dynamic-views .path-wrapper > span,
.dynamic-views .path-segment-wrapper {
  display: inline-block;
}

/* Tag style: Outline (default) - reset all theme styles, apply only plugin styles */
body:not(.dynamic-views-tag-style-theme) .dynamic-views .card-properties .tag,
body:not(.dynamic-views-tag-style-theme) .dynamic-views .card-subtitle .tag,
body:not(.dynamic-views-tag-style-theme) .dynamic-views .list-properties .tag {
  all: unset;
  border-radius: var(--pill-radius);
  border: 1px solid color-mix(in srgb, currentColor 40%, transparent);
  color: var(--tag-text-color);
  font-size: 0.875em;
  line-height: 1;
  padding: calc(0.25em - 1px) calc(0.65em - 1px);
  cursor: pointer;
}

body:not(.dynamic-views-tag-style-theme):not(.dynamic-views-tag-style-fill)
  .dynamic-views
  .card-properties
  .tag:hover,
body:not(.dynamic-views-tag-style-theme):not(.dynamic-views-tag-style-fill)
  .dynamic-views
  .card-subtitle
  .tag:hover,
body:not(.dynamic-views-tag-style-theme):not(.dynamic-views-tag-style-fill)
  .dynamic-views
  .list-properties
  .tag:hover {
  color: color-mix(in hsl, var(--tag-text-color), white 15%);
}

/* Tag style: Fill - colored background based on text color */
body.dynamic-views-tag-style-fill .dynamic-views .card-properties .tag,
body.dynamic-views-tag-style-fill .dynamic-views .card-subtitle .tag,
body.dynamic-views-tag-style-fill .dynamic-views .list-properties .tag {
  border: none;
  padding: 0.25em 0.65em;
  background-color: color-mix(in srgb, var(--tag-text-color) 10%, transparent);
  color: var(--tag-text-color);
}

body.dynamic-views-tag-style-fill .dynamic-views .card-properties .tag:hover,
body.dynamic-views-tag-style-fill .dynamic-views .card-subtitle .tag:hover,
body.dynamic-views-tag-style-fill .dynamic-views .list-properties .tag:hover {
  background-color: color-mix(in srgb, var(--tag-text-color) 20%, transparent);
}

/* Tag style: Theme style - no overrides, inherits Obsidian's a.tag styles */

/* Tag style: Plaintext */
body.dynamic-views-tag-style-plaintext .dynamic-views .card-properties .tag,
body.dynamic-views-tag-style-plaintext .dynamic-views .card-subtitle .tag,
body.dynamic-views-tag-style-plaintext .dynamic-views .list-properties .tag {
  background-color: transparent;
  border: none;
  padding: 0;
  border-radius: 0;
  font-size: inherit;
}

body.dynamic-views-tag-style-plaintext
  .dynamic-views
  .card-properties
  .tag:hover,
body.dynamic-views-tag-style-plaintext .dynamic-views .card-subtitle .tag:hover,
body.dynamic-views-tag-style-plaintext
  .dynamic-views
  .list-properties
  .tag:hover {
  text-decoration: underline;
}

/* Tag color presets - semantic colors applied at element level for ambient compatibility */
body.dynamic-views-tag-color-faint:not(.dynamic-views-tag-style-theme)
  .dynamic-views
  :is(.card-properties, .card-subtitle, .list-properties)
  .tag {
  --tag-text-color: var(--text-faint);
}
body.dynamic-views-tag-color-muted:not(.dynamic-views-tag-style-theme)
  .dynamic-views
  :is(.card-properties, .card-subtitle, .list-properties)
  .tag {
  --tag-text-color: var(--text-muted);
}
body.dynamic-views-tag-color-normal:not(.dynamic-views-tag-style-theme)
  .dynamic-views
  :is(.card-properties, .card-subtitle, .list-properties)
  .tag {
  --tag-text-color: var(--text-normal);
}

body.dynamic-views-tag-color-accent {
  --dynamic-views-tag-color-value: var(--text-accent);
}
body.dynamic-views-tag-color-red {
  --dynamic-views-tag-color-value: var(--color-red);
}
body.dynamic-views-tag-color-orange {
  --dynamic-views-tag-color-value: var(--color-orange);
}
body.dynamic-views-tag-color-yellow {
  --dynamic-views-tag-color-value: var(--color-yellow);
}
body.dynamic-views-tag-color-green {
  --dynamic-views-tag-color-value: var(--color-green);
}
body.dynamic-views-tag-color-cyan {
  --dynamic-views-tag-color-value: var(--color-cyan);
}
body.dynamic-views-tag-color-blue {
  --dynamic-views-tag-color-value: var(--color-blue);
}
body.dynamic-views-tag-color-purple {
  --dynamic-views-tag-color-value: var(--color-purple);
}
body.dynamic-views-tag-color-pink {
  --dynamic-views-tag-color-value: var(--color-pink);
}
body.dynamic-views-tag-color-custom {
  --dynamic-views-tag-color-value: var(
    --dynamic-views-tag-color-custom,
    var(--text-faint)
  );
}
/* Custom fallback with ambient compatibility */
body.dynamic-views-tag-color-custom:not(.dynamic-views-tag-style-theme)
  .dynamic-views
  :is(.card-properties, .card-subtitle, .list-properties)
  .tag {
  --tag-text-color: var(--dynamic-views-tag-color-custom, var(--text-faint));
}

/* Tag color application (skip when using theme styling) */
body:not(.dynamic-views-tag-style-theme) .dynamic-views .card-properties .tag,
body:not(.dynamic-views-tag-style-theme) .dynamic-views .card-subtitle .tag,
body:not(.dynamic-views-tag-style-theme) .dynamic-views .list-properties .tag {
  --tag-text-color: var(--dynamic-views-tag-color-value, var(--text-faint));
}

.dynamic-views .folder-segment,
.dynamic-views .filename-segment {
  color: inherit;
  white-space: nowrap;
  cursor: pointer;
}

.dynamic-views .folder-segment:hover,
.dynamic-views .filename-segment:hover {
  text-decoration: underline;
}

.dynamic-views .path-separator {
  color: inherit;
  margin: 0 2px;
  user-select: none;
  opacity: 0.5;
}

.dynamic-views .bases-group-heading .path-separator {
  color: var(--text-faint);
  opacity: 1;
}

/* ============================================
   PROPERTY ROW SYSTEM
   ============================================ */

.dynamic-views .property-set {
  display: flex;
  flex-direction: column;
  gap: var(--size-2-2);
  width: 100%;
  min-width: 0;
}

.dynamic-views .property-set.property-set-sidebyside {
  flex-direction: row;
  gap: var(--size-4-2);
}

/* Compact mode: stack side-by-side properties on narrow cards */
.dynamic-views .card.compact-mode .property-set.property-set-sidebyside {
  flex-direction: column;
}

.dynamic-views
  .card.compact-mode
  .property-set.property-set-sidebyside
  .property-field,
.dynamic-views
  .card.compact-mode
  .property-set.property-set-sidebyside.property-measured
  .property-field {
  max-width: 100% !important;
  flex: none;
  width: 100% !important;
}

/* Compact mode: left-align right-side properties when stacked */
.dynamic-views
  .card.compact-mode
  .property-set.property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .property-content-wrapper {
  justify-content: flex-start;
}

.dynamic-views
  .card.compact-mode
  .property-set.property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .property-content {
  justify-content: flex-start;
  order: 0;
}

.dynamic-views
  .card.compact-mode
  .property-set.property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .property-label {
  text-align: left;
}

/* Compact mode: reset inline label order (label before content) */
.dynamic-views
  .card.compact-mode
  .property-set.property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .property-label-inline {
  order: 0;
}

/* Compact mode: reset timestamp icon to left for even fields (edge mode only) */
body:not(.dynamic-views-timestamp-icon-center):not(
    .dynamic-views-timestamp-icon-right
  )
  .dynamic-views
  .card.compact-mode
  .property-set.property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .timestamp-icon {
  order: 0;
  margin-right: var(--size-2-2);
  margin-left: 0;
}

/* Compact mode: reset timestamp icon to right for even fields (center and right modes) */
body:is(
    .dynamic-views-timestamp-icon-center,
    .dynamic-views-timestamp-icon-right
  )
  .dynamic-views
  .card.compact-mode
  .property-set.property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .timestamp-icon {
  order: 2;
  margin-right: 0;
  margin-left: var(--size-2-2);
}

/* Right alignment for full-row properties with inline labels - value only */
body.dynamic-views-full-row-align-right
  .dynamic-views
  .property-set:not(.property-set-sidebyside)
  .property-field:has(.property-label-inline)
  .property-content-wrapper {
  flex: 0 1 auto;
  margin-left: auto;
}

/* Meta-field: scrollable container */
.dynamic-views .property-field {
  display: flex;
  align-items: center;
  min-width: 0;
  overflow-x: visible; /* Field doesn't scroll, wrapper does */
  scrollbar-width: none;
  position: relative;
  direction: ltr;
  color: var(--text-faint);
  font-family: var(--dynamic-views-property-font, inherit);
}

/* Collapsed field: hidden entirely */
.dynamic-views .property-field.property-field-collapsed {
  display: none;
}

/* Gap between inline property label and content */
.dynamic-views .property-field:has(.property-label-inline) {
  gap: var(--size-2-2);
}

/* Vertical layout when property labels are on top */
.dynamic-views .property-field:has(.property-label) {
  flex-direction: column;
  align-items: stretch;
  overflow-x: visible; /* Override overflow - labels should not scroll */
}

/* Property labels should never scroll */
.dynamic-views .property-field:has(.property-label) .property-label {
  flex-shrink: 0;
  overflow: visible;
}

/* Property content wrapper - handles scrolling and masking */
.dynamic-views .property-content-wrapper {
  display: flex;
  min-width: 0;
  overflow-x: auto;
  scrollbar-width: none;
  position: relative;
}

.dynamic-views .property-content-wrapper::-webkit-scrollbar {
  display: none;
}

/* For inline labels: wrapper takes remaining space after label */
.dynamic-views
  .property-field:has(.property-label-inline)
  .property-content-wrapper {
  flex: 1 1 0;
  min-width: 0;
}

/* For property labels above or no property labels: wrapper takes full width */
.dynamic-views .property-field:has(.property-label) .property-content-wrapper,
.dynamic-views
  .property-field:not(:has(.property-label)):not(:has(.property-label-inline))
  .property-content-wrapper {
  width: 100%;
}

/* During measurement: wrapper shouldn't constrain content */
.dynamic-views
  .property-set.property-set-sidebyside.property-measuring
  .property-content-wrapper {
  width: auto !important;
  max-width: none !important;
  overflow-x: visible !important;
  flex: 0 1 auto !important; /* Override flex: 1 1 0 from inline label mode to allow natural sizing */
}

.dynamic-views
  .property-set.property-set-sidebyside.property-measuring
  .property-content {
  width: max-content !important;
  max-width: none !important;
}

/* During measurement: fields shouldn't constrain content */
.dynamic-views
  .property-set.property-set-sidebyside.property-measuring
  .property-field {
  width: auto !important;
  max-width: none !important;
  flex: 0 0 auto !important; /* Override flex: 1 1 0 to prevent equal distribution */
}

/* During measurement: remove min-width to allow natural sizing */
.dynamic-views
  .property-set.property-set-sidebyside.property-measuring
  .property-content {
  min-width: 0 !important;
}

/* Default state: fields split space equally with 50% max */
.dynamic-views .property-set.property-set-sidebyside .property-field {
  flex: 1 1 0;
  max-width: 50%;
}

/* Measured state: use calculated widths from CSS variables, remove 50% cap */
/* Odd fields (left side) use --field1-width */
.dynamic-views
  .property-set.property-set-sidebyside.property-measured
  :is(
    .property-field-1,
    .property-field-3,
    .property-field-5,
    .property-field-7,
    .property-field-9,
    .property-field-11,
    .property-field-13
  ) {
  width: var(--field1-width);
  flex: 0 0 auto;
  max-width: none;
}

/* Even fields (right side) use --field2-width */
.dynamic-views
  .property-set.property-set-sidebyside.property-measured
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  ) {
  width: var(--field2-width);
  flex: 0 0 auto;
  max-width: none;
}

/* Measured state: wrapper fills calculated field width */
.dynamic-views
  .property-set.property-set-sidebyside.property-measured
  .property-content-wrapper {
  flex: 1 1 auto;
  min-width: 0;
}

/* Property label (above mode) */
.dynamic-views .property-label {
  font-size: var(
    --dynamic-views-property-label-font-size,
    var(--font-ui-smaller)
  );
  font-family: var(--dynamic-views-property-label-font, inherit);
  color: var(--text-faint);
  margin-bottom: var(--size-2-1);
  white-space: nowrap;
  text-overflow: ellipsis;
}

/* Property label inline - as sibling of property-content */
.dynamic-views .property-label-inline {
  font-size: var(
    --dynamic-views-property-label-font-size,
    var(--font-ui-smaller)
  );
  font-family: var(--dynamic-views-property-label-font, inherit);
  color: var(--text-faint);
  white-space: nowrap;
  flex-shrink: 0;
  z-index: 2;
  background: inherit;
  min-height: var(--dynamic-views-property-content-height, 20px);
  display: flex;
  align-items: center;
}

/* Property label case transformations */
body.dynamic-views-property-label-case-lowercase .dynamic-views .property-label,
body.dynamic-views-property-label-case-lowercase
  .dynamic-views
  .property-label-inline {
  text-transform: lowercase;
}

body.dynamic-views-property-label-case-uppercase .dynamic-views .property-label,
body.dynamic-views-property-label-case-uppercase
  .dynamic-views
  .property-label-inline {
  text-transform: uppercase;
}

/* Property label bold */
body.dynamic-views-property-label-bold .dynamic-views .property-label,
body.dynamic-views-property-label-bold .dynamic-views .property-label-inline {
  font-weight: var(--font-semibold);
}

/* Property label small caps */
body.dynamic-views-property-label-small-caps .dynamic-views .property-label,
body.dynamic-views-property-label-small-caps
  .dynamic-views
  .property-label-inline {
  font-variant: small-caps;
}

/* Property label color presets - semantic colors applied at element level for ambient compatibility */
body.dynamic-views-property-label-color-faint
  .dynamic-views
  :is(.property-label, .property-label-inline) {
  color: var(--text-faint);
}
body.dynamic-views-property-label-color-muted
  .dynamic-views
  :is(.property-label, .property-label-inline) {
  color: var(--text-muted);
}
body.dynamic-views-property-label-color-normal
  .dynamic-views
  :is(.property-label, .property-label-inline) {
  color: var(--text-normal);
}

body.dynamic-views-property-label-color-accent {
  --dynamic-views-property-label-color-value: var(--text-accent);
}
body.dynamic-views-property-label-color-red {
  --dynamic-views-property-label-color-value: var(--color-red);
}
body.dynamic-views-property-label-color-orange {
  --dynamic-views-property-label-color-value: var(--color-orange);
}
body.dynamic-views-property-label-color-yellow {
  --dynamic-views-property-label-color-value: var(--color-yellow);
}
body.dynamic-views-property-label-color-green {
  --dynamic-views-property-label-color-value: var(--color-green);
}
body.dynamic-views-property-label-color-cyan {
  --dynamic-views-property-label-color-value: var(--color-cyan);
}
body.dynamic-views-property-label-color-blue {
  --dynamic-views-property-label-color-value: var(--color-blue);
}
body.dynamic-views-property-label-color-purple {
  --dynamic-views-property-label-color-value: var(--color-purple);
}
body.dynamic-views-property-label-color-pink {
  --dynamic-views-property-label-color-value: var(--color-pink);
}
body.dynamic-views-property-label-color-custom {
  --dynamic-views-property-label-color-value: var(
    --dynamic-views-property-label-color-custom,
    var(--text-faint)
  );
}
/* Custom fallback with ambient compatibility */
body.dynamic-views-property-label-color-custom
  .dynamic-views
  :is(.property-label, .property-label-inline) {
  color: var(--dynamic-views-property-label-color-custom, var(--text-faint));
}

/* Property label color application */
.dynamic-views :is(.property-label, .property-label-inline) {
  color: var(--dynamic-views-property-label-color-value, var(--text-faint));
}

/* Property text color presets - with labels - semantic colors for ambient compatibility */
body.dynamic-views-property-color-with-labels-faint
  .dynamic-views
  .property-field:has(:is(.property-label, .property-label-inline)) {
  color: var(--text-faint);
}
body.dynamic-views-property-color-with-labels-muted
  .dynamic-views
  .property-field:has(:is(.property-label, .property-label-inline)) {
  color: var(--text-muted);
}
body.dynamic-views-property-color-with-labels-normal
  .dynamic-views
  .property-field:has(:is(.property-label, .property-label-inline)) {
  color: var(--text-normal);
}

body.dynamic-views-property-color-with-labels-accent {
  --dynamic-views-property-with-label-color-value: var(--text-accent);
}
body.dynamic-views-property-color-with-labels-red {
  --dynamic-views-property-with-label-color-value: var(--color-red);
}
body.dynamic-views-property-color-with-labels-orange {
  --dynamic-views-property-with-label-color-value: var(--color-orange);
}
body.dynamic-views-property-color-with-labels-yellow {
  --dynamic-views-property-with-label-color-value: var(--color-yellow);
}
body.dynamic-views-property-color-with-labels-green {
  --dynamic-views-property-with-label-color-value: var(--color-green);
}
body.dynamic-views-property-color-with-labels-cyan {
  --dynamic-views-property-with-label-color-value: var(--color-cyan);
}
body.dynamic-views-property-color-with-labels-blue {
  --dynamic-views-property-with-label-color-value: var(--color-blue);
}
body.dynamic-views-property-color-with-labels-purple {
  --dynamic-views-property-with-label-color-value: var(--color-purple);
}
body.dynamic-views-property-color-with-labels-pink {
  --dynamic-views-property-with-label-color-value: var(--color-pink);
}
body.dynamic-views-property-color-with-labels-custom {
  --dynamic-views-property-with-label-color-value: var(
    --dynamic-views-property-color-with-labels-custom,
    var(--text-faint)
  );
}
/* Custom fallback with ambient compatibility */
body.dynamic-views-property-color-with-labels-custom
  .dynamic-views
  .property-field:has(:is(.property-label, .property-label-inline)) {
  color: var(
    --dynamic-views-property-color-with-labels-custom,
    var(--text-faint)
  );
}

/* Property text color application - with labels */
.dynamic-views
  .property-field:has(:is(.property-label, .property-label-inline)) {
  color: var(
    --dynamic-views-property-with-label-color-value,
    var(--text-muted)
  );
}

/* Property text color presets - without labels - semantic colors for ambient compatibility */
body.dynamic-views-property-color-without-labels-faint
  .dynamic-views
  .property-field:not(:has(:is(.property-label, .property-label-inline))) {
  color: var(--text-faint);
}
body.dynamic-views-property-color-without-labels-muted
  .dynamic-views
  .property-field:not(:has(:is(.property-label, .property-label-inline))) {
  color: var(--text-muted);
}
body.dynamic-views-property-color-without-labels-normal
  .dynamic-views
  .property-field:not(:has(:is(.property-label, .property-label-inline))) {
  color: var(--text-normal);
}

body.dynamic-views-property-color-without-labels-accent {
  --dynamic-views-property-no-label-color-value: var(--text-accent);
}
body.dynamic-views-property-color-without-labels-red {
  --dynamic-views-property-no-label-color-value: var(--color-red);
}
body.dynamic-views-property-color-without-labels-orange {
  --dynamic-views-property-no-label-color-value: var(--color-orange);
}
body.dynamic-views-property-color-without-labels-yellow {
  --dynamic-views-property-no-label-color-value: var(--color-yellow);
}
body.dynamic-views-property-color-without-labels-green {
  --dynamic-views-property-no-label-color-value: var(--color-green);
}
body.dynamic-views-property-color-without-labels-cyan {
  --dynamic-views-property-no-label-color-value: var(--color-cyan);
}
body.dynamic-views-property-color-without-labels-blue {
  --dynamic-views-property-no-label-color-value: var(--color-blue);
}
body.dynamic-views-property-color-without-labels-purple {
  --dynamic-views-property-no-label-color-value: var(--color-purple);
}
body.dynamic-views-property-color-without-labels-pink {
  --dynamic-views-property-no-label-color-value: var(--color-pink);
}
body.dynamic-views-property-color-without-labels-custom {
  --dynamic-views-property-no-label-color-value: var(
    --dynamic-views-property-color-without-labels-custom,
    var(--text-faint)
  );
}
/* Custom fallback with ambient compatibility */
body.dynamic-views-property-color-without-labels-custom
  .dynamic-views
  .property-field:not(:has(:is(.property-label, .property-label-inline))) {
  color: var(
    --dynamic-views-property-color-without-labels-custom,
    var(--text-faint)
  );
}

/* Property text color application - without labels */
.dynamic-views
  .property-field:not(:has(:is(.property-label, .property-label-inline))) {
  color: var(--dynamic-views-property-no-label-color-value, var(--text-faint));
}

/* Links in properties use Obsidian default colors (not property text color) */
.dynamic-views .property-field a.internal-link {
  color: var(--link-color);
}
.dynamic-views .property-field a.internal-link:hover {
  color: var(--link-color-hover);
}
.dynamic-views .property-field a.external-link {
  color: var(--link-external-color);
}
.dynamic-views .property-field a.external-link:hover {
  color: var(--link-external-color-hover);
}

/* Subtitle color presets - semantic colors applied at element level for ambient compatibility */
body.dynamic-views-subtitle-color-faint .dynamic-views .card-subtitle {
  color: var(--text-faint);
}
body.dynamic-views-subtitle-color-muted .dynamic-views .card-subtitle {
  color: var(--text-muted);
}
body.dynamic-views-subtitle-color-normal .dynamic-views .card-subtitle {
  color: var(--text-normal);
}

body.dynamic-views-subtitle-color-accent {
  --dynamic-views-subtitle-color-value: var(--text-accent);
}
body.dynamic-views-subtitle-color-red {
  --dynamic-views-subtitle-color-value: var(--color-red);
}
body.dynamic-views-subtitle-color-orange {
  --dynamic-views-subtitle-color-value: var(--color-orange);
}
body.dynamic-views-subtitle-color-yellow {
  --dynamic-views-subtitle-color-value: var(--color-yellow);
}
body.dynamic-views-subtitle-color-green {
  --dynamic-views-subtitle-color-value: var(--color-green);
}
body.dynamic-views-subtitle-color-cyan {
  --dynamic-views-subtitle-color-value: var(--color-cyan);
}
body.dynamic-views-subtitle-color-blue {
  --dynamic-views-subtitle-color-value: var(--color-blue);
}
body.dynamic-views-subtitle-color-purple {
  --dynamic-views-subtitle-color-value: var(--color-purple);
}
body.dynamic-views-subtitle-color-pink {
  --dynamic-views-subtitle-color-value: var(--color-pink);
}
body.dynamic-views-subtitle-color-custom {
  --dynamic-views-subtitle-color-value: var(
    --dynamic-views-subtitle-color-custom,
    var(--text-faint)
  );
}
/* Custom fallback with ambient compatibility */
body.dynamic-views-subtitle-color-custom .dynamic-views .card-subtitle {
  color: var(--dynamic-views-subtitle-color-custom, var(--text-faint));
}

/* Subtitle color application */
.dynamic-views .card-subtitle {
  color: var(--dynamic-views-subtitle-color-value, var(--text-faint));
}

/* Text preview color presets - semantic colors applied at element level for ambient compatibility */
body.dynamic-views-text-preview-color-faint .dynamic-views .card-text-preview {
  color: var(--text-faint);
}
body.dynamic-views-text-preview-color-muted .dynamic-views .card-text-preview {
  color: var(--text-muted);
}
body.dynamic-views-text-preview-color-normal .dynamic-views .card-text-preview {
  color: var(--text-normal);
}

body.dynamic-views-text-preview-color-accent {
  --dynamic-views-text-preview-color-value: var(--text-accent);
}
body.dynamic-views-text-preview-color-red {
  --dynamic-views-text-preview-color-value: var(--color-red);
}
body.dynamic-views-text-preview-color-orange {
  --dynamic-views-text-preview-color-value: var(--color-orange);
}
body.dynamic-views-text-preview-color-yellow {
  --dynamic-views-text-preview-color-value: var(--color-yellow);
}
body.dynamic-views-text-preview-color-green {
  --dynamic-views-text-preview-color-value: var(--color-green);
}
body.dynamic-views-text-preview-color-cyan {
  --dynamic-views-text-preview-color-value: var(--color-cyan);
}
body.dynamic-views-text-preview-color-blue {
  --dynamic-views-text-preview-color-value: var(--color-blue);
}
body.dynamic-views-text-preview-color-purple {
  --dynamic-views-text-preview-color-value: var(--color-purple);
}
body.dynamic-views-text-preview-color-pink {
  --dynamic-views-text-preview-color-value: var(--color-pink);
}
body.dynamic-views-text-preview-color-custom {
  --dynamic-views-text-preview-color-value: var(
    --dynamic-views-text-preview-color-custom,
    var(--text-muted)
  );
}
/* Custom fallback with ambient compatibility */
body.dynamic-views-text-preview-color-custom .dynamic-views .card-text-preview {
  color: var(--dynamic-views-text-preview-color-custom, var(--text-muted));
}

/* Text preview color application */
.dynamic-views .card-text-preview {
  --dynamic-views-text-preview-color: var(
    --dynamic-views-text-preview-color-value,
    var(--text-muted)
  );
}

/* Title color presets - semantic colors applied at element level for ambient compatibility */
body.dynamic-views-title-color-faint .dynamic-views .card-title {
  --dynamic-views-title-color: var(--text-faint);
}
body.dynamic-views-title-color-muted .dynamic-views .card-title {
  --dynamic-views-title-color: var(--text-muted);
}
body.dynamic-views-title-color-normal .dynamic-views .card-title {
  --dynamic-views-title-color: var(--text-normal);
}

body.dynamic-views-title-color-accent {
  --dynamic-views-title-color-value: var(--text-accent);
}
body.dynamic-views-title-color-red {
  --dynamic-views-title-color-value: var(--color-red);
}
body.dynamic-views-title-color-orange {
  --dynamic-views-title-color-value: var(--color-orange);
}
body.dynamic-views-title-color-yellow {
  --dynamic-views-title-color-value: var(--color-yellow);
}
body.dynamic-views-title-color-green {
  --dynamic-views-title-color-value: var(--color-green);
}
body.dynamic-views-title-color-cyan {
  --dynamic-views-title-color-value: var(--color-cyan);
}
body.dynamic-views-title-color-blue {
  --dynamic-views-title-color-value: var(--color-blue);
}
body.dynamic-views-title-color-purple {
  --dynamic-views-title-color-value: var(--color-purple);
}
body.dynamic-views-title-color-pink {
  --dynamic-views-title-color-value: var(--color-pink);
}
body.dynamic-views-title-color-custom {
  --dynamic-views-title-color-value: var(
    --dynamic-views-title-color-custom,
    var(--text-normal)
  );
}
/* Custom fallback with ambient compatibility */
body.dynamic-views-title-color-custom .dynamic-views .card-title {
  --dynamic-views-title-color: var(
    --dynamic-views-title-color-custom,
    var(--text-normal)
  );
}

/* Title color application */
.dynamic-views .card-title {
  --dynamic-views-title-color: var(
    --dynamic-views-title-color-value,
    var(--text-normal)
  );
}

/* ============================================
   HOVER COLOR RULES FOR CLICKABLE ELEMENTS
   ============================================ */

@media (hover: hover) {
  /* Title hover colors (when open-on-title enabled) */
  body.dynamic-views-open-on-title.dynamic-views-title-color-faint
    .dynamic-views
    .card-title
    :is(a, .card-title-link):hover {
    color: var(--text-muted);
  }
  body.dynamic-views-open-on-title.dynamic-views-title-color-muted
    .dynamic-views
    .card-title
    :is(a, .card-title-link):hover {
    color: var(--text-normal);
  }
  /* Normal - no hover color change */
  body.dynamic-views-open-on-title.dynamic-views-title-color-accent
    .dynamic-views
    .card-title
    :is(a, .card-title-link):hover {
    color: var(--text-accent-hover);
  }
  /* Title color variants (red-pink, custom): 15% white mix using --dynamic-views-title-color-value */
  body.dynamic-views-open-on-title:is(
      .dynamic-views-title-color-red,
      .dynamic-views-title-color-orange,
      .dynamic-views-title-color-yellow,
      .dynamic-views-title-color-green,
      .dynamic-views-title-color-cyan,
      .dynamic-views-title-color-blue,
      .dynamic-views-title-color-purple,
      .dynamic-views-title-color-pink,
      .dynamic-views-title-color-custom
    )
    .dynamic-views
    .card-title
    :is(a, .card-title-link):hover {
    color: color-mix(in hsl, var(--dynamic-views-title-color-value), white 15%);
  }

  /* Subtitle hover colors (when clickable) */
  body.dynamic-views-subtitle-color-faint
    .dynamic-views
    .card-subtitle
    :is(a, .folder-segment, .filename-segment):hover {
    color: var(--text-muted);
  }
  body.dynamic-views-subtitle-color-muted
    .dynamic-views
    .card-subtitle
    :is(a, .folder-segment, .filename-segment):hover {
    color: var(--text-normal);
  }
  /* Normal - no hover color change */
  body.dynamic-views-subtitle-color-accent
    .dynamic-views
    .card-subtitle
    :is(a, .folder-segment, .filename-segment):hover {
    color: var(--text-accent-hover);
  }
  /* Subtitle color variants: 15% white mix using --dynamic-views-subtitle-color-value */
  body:is(
      .dynamic-views-subtitle-color-red,
      .dynamic-views-subtitle-color-orange,
      .dynamic-views-subtitle-color-yellow,
      .dynamic-views-subtitle-color-green,
      .dynamic-views-subtitle-color-cyan,
      .dynamic-views-subtitle-color-blue,
      .dynamic-views-subtitle-color-purple,
      .dynamic-views-subtitle-color-pink,
      .dynamic-views-subtitle-color-custom
    )
    .dynamic-views
    .card-subtitle
    :is(a, .folder-segment, .filename-segment):hover {
    color: color-mix(
      in hsl,
      var(--dynamic-views-subtitle-color-value),
      white 15%
    );
  }

  /* Property hover colors - with labels */
  body.dynamic-views-property-color-with-labels-faint
    .dynamic-views
    .property-field:has(:is(.property-label, .property-label-inline))
    .property-content
    :is(
      a:not(.tag):not(.internal-link):not(.external-link),
      .folder-segment,
      .filename-segment
    ):hover {
    color: var(--text-muted);
  }
  body.dynamic-views-property-color-with-labels-muted
    .dynamic-views
    .property-field:has(:is(.property-label, .property-label-inline))
    .property-content
    :is(
      a:not(.tag):not(.internal-link):not(.external-link),
      .folder-segment,
      .filename-segment
    ):hover {
    color: var(--text-normal);
  }
  /* Normal - no hover color change */
  body.dynamic-views-property-color-with-labels-accent
    .dynamic-views
    .property-field:has(:is(.property-label, .property-label-inline))
    .property-content
    :is(
      a:not(.tag):not(.internal-link):not(.external-link),
      .folder-segment,
      .filename-segment
    ):hover {
    color: var(--text-accent-hover);
  }
  /* Property with labels color variants: 15% white mix using --dynamic-views-property-with-label-color-value */
  body:is(
      .dynamic-views-property-color-with-labels-red,
      .dynamic-views-property-color-with-labels-orange,
      .dynamic-views-property-color-with-labels-yellow,
      .dynamic-views-property-color-with-labels-green,
      .dynamic-views-property-color-with-labels-cyan,
      .dynamic-views-property-color-with-labels-blue,
      .dynamic-views-property-color-with-labels-purple,
      .dynamic-views-property-color-with-labels-pink
    )
    .dynamic-views
    .property-field:has(:is(.property-label, .property-label-inline))
    .property-content
    :is(
      a:not(.tag):not(.internal-link):not(.external-link),
      .folder-segment,
      .filename-segment
    ):hover {
    color: color-mix(
      in hsl,
      var(--dynamic-views-property-with-label-color-value),
      white 15%
    );
  }
  /* Custom uses pre-computed hover variable */
  body.dynamic-views-property-color-with-labels-custom
    .dynamic-views
    .property-field:has(:is(.property-label, .property-label-inline))
    .property-content
    :is(
      a:not(.tag):not(.internal-link):not(.external-link),
      .folder-segment,
      .filename-segment
    ):hover {
    color: var(
      --dynamic-views-property-color-with-labels-custom-hover,
      var(--text-muted)
    );
  }

  /* Property hover colors - without labels */
  body.dynamic-views-property-color-without-labels-faint
    .dynamic-views
    .property-field:not(:has(:is(.property-label, .property-label-inline)))
    .property-content
    :is(
      a:not(.tag):not(.internal-link):not(.external-link),
      .folder-segment,
      .filename-segment
    ):hover {
    color: var(--text-muted);
  }
  body.dynamic-views-property-color-without-labels-muted
    .dynamic-views
    .property-field:not(:has(:is(.property-label, .property-label-inline)))
    .property-content
    :is(
      a:not(.tag):not(.internal-link):not(.external-link),
      .folder-segment,
      .filename-segment
    ):hover {
    color: var(--text-normal);
  }
  /* Normal - no hover color change */
  body.dynamic-views-property-color-without-labels-accent
    .dynamic-views
    .property-field:not(:has(:is(.property-label, .property-label-inline)))
    .property-content
    :is(
      a:not(.tag):not(.internal-link):not(.external-link),
      .folder-segment,
      .filename-segment
    ):hover {
    color: var(--text-accent-hover);
  }
  /* Property without labels color variants: 15% white mix using --dynamic-views-property-no-label-color-value */
  body:is(
      .dynamic-views-property-color-without-labels-red,
      .dynamic-views-property-color-without-labels-orange,
      .dynamic-views-property-color-without-labels-yellow,
      .dynamic-views-property-color-without-labels-green,
      .dynamic-views-property-color-without-labels-cyan,
      .dynamic-views-property-color-without-labels-blue,
      .dynamic-views-property-color-without-labels-purple,
      .dynamic-views-property-color-without-labels-pink
    )
    .dynamic-views
    .property-field:not(:has(:is(.property-label, .property-label-inline)))
    .property-content
    :is(
      a:not(.tag):not(.internal-link):not(.external-link),
      .folder-segment,
      .filename-segment
    ):hover {
    color: color-mix(
      in hsl,
      var(--dynamic-views-property-no-label-color-value),
      white 15%
    );
  }
  /* Custom uses pre-computed hover variable */
  body.dynamic-views-property-color-without-labels-custom
    .dynamic-views
    .property-field:not(:has(:is(.property-label, .property-label-inline)))
    .property-content
    :is(
      a:not(.tag):not(.internal-link):not(.external-link),
      .folder-segment,
      .filename-segment
    ):hover {
    color: var(
      --dynamic-views-property-color-without-labels-custom-hover,
      var(--text-muted)
    );
  }
}

/* Even fields (right side) - label after content */
.dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .property-label-inline {
  order: 2;
}

/* Even fields (right side) - content before label */
.dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .property-content {
  order: 1;
}

/* Odd fields (left side) - left-aligned labels */
.dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-1,
    .property-field-3,
    .property-field-5,
    .property-field-7,
    .property-field-9,
    .property-field-11,
    .property-field-13
  )
  .property-label {
  text-align: left;
}

/* Even fields (right side) - right-aligned labels */
.dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .property-label {
  text-align: right;
}

/* Universal property-content wrapper */
.dynamic-views .property-content {
  display: flex;
  align-items: center;
  gap: var(--size-2-2);
  flex-shrink: 0;
  white-space: nowrap;
  min-height: var(--dynamic-views-property-content-height, 20px);
  color: inherit;
  min-width: 0;
  flex: 0 0 auto;
  width: max-content;
}

/* Empty value marker styling - 0.6 opacity of property value color */
.dynamic-views .property-content > span.empty-value-marker {
  color: inherit;
  opacity: 0.6;
}

/* Checkbox property - remove extra padding */
.dynamic-views .property-content > .metadata-input-checkbox {
  margin: 0;
  padding: 0;
}

/* Even fields (right side) - content should fill wrapper width for proper alignment */
.dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .property-content {
  min-width: 100%;
  width: max-content;
  justify-content: flex-end;
}

/* Array list wrapper - ensure items display inline */
.dynamic-views .property-content .list-wrapper {
  display: inline;
}

.dynamic-views .property-content .list-wrapper > span {
  display: inline;
}

.dynamic-views .property-content .list-item {
  display: inline;
}

.dynamic-views .property-content .list-separator {
  display: inline;
}

/* List separator styling - 0.6 opacity of property value color */
.dynamic-views .list-separator {
  color: inherit;
  opacity: 0.6;
}

/* Alignment via justify-content on property-content wrapper */
/* Odd fields (left side) */
.dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-1,
    .property-field-3,
    .property-field-5,
    .property-field-7,
    .property-field-9,
    .property-field-11,
    .property-field-13
  )
  .property-content {
  justify-content: flex-start;
}

/* Even fields (right side) - align content right when not scrollable */
.dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  ):not(.is-scrollable)
  .property-content-wrapper {
  justify-content: flex-end;
}

/* Even fields (right side) - align content left when scrollable */
.dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  ).is-scrollable
  .property-content-wrapper {
  justify-content: flex-start;
}

/* Left alignment for right-side properties */
body.dynamic-views-paired-property-align-left
  .dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .property-content-wrapper {
  justify-content: flex-start;
}

body.dynamic-views-paired-property-align-left
  .dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .property-content {
  justify-content: flex-start;
  order: 0;
}

body.dynamic-views-paired-property-align-left
  .dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .property-label {
  text-align: left;
}

/* Reset inline property label order to place label before content */
body.dynamic-views-paired-property-align-left
  .dynamic-views
  .property-set-sidebyside
  :is(
    .property-field-2,
    .property-field-4,
    .property-field-6,
    .property-field-8,
    .property-field-10,
    .property-field-12,
    .property-field-14
  )
  .property-label-inline {
  order: 0;
}

/* Stacked layout */
.dynamic-views .property-set:not(.property-set-sidebyside) .property-content {
  justify-content: flex-start;
}

/* Hide scrollbar for side-by-side fields */
.dynamic-views .property-set-sidebyside .property-field::-webkit-scrollbar {
  display: none;
}

/* Gradient masks for scrollable content (ON by default) */
.dynamic-views .property-content-wrapper.scroll-gradient-left,
.dynamic-views .card-subtitle.scroll-gradient-left,
.dynamic-views .card-title.scroll-gradient-left {
  mask-image: linear-gradient(
    to right,
    rgba(0, 0, 0, 0) 0,
    rgba(0, 0, 0, 0.3) 4px,
    black 28px,
    black 100%
  );
  -webkit-mask-image: linear-gradient(
    to right,
    rgba(0, 0, 0, 0) 0,
    rgba(0, 0, 0, 0.3) 4px,
    black 28px,
    black 100%
  );
}

.dynamic-views .property-content-wrapper.scroll-gradient-right,
.dynamic-views .card-subtitle.scroll-gradient-right,
.dynamic-views .card-title.scroll-gradient-right {
  mask-image: linear-gradient(
    to right,
    black 0,
    black calc(100% - 28px),
    rgba(0, 0, 0, 0.3) calc(100% - 4px),
    rgba(0, 0, 0, 0) 100%
  );
  -webkit-mask-image: linear-gradient(
    to right,
    black 0,
    black calc(100% - 28px),
    rgba(0, 0, 0, 0.3) calc(100% - 4px),
    rgba(0, 0, 0, 0) 100%
  );
}

.dynamic-views .property-content-wrapper.scroll-gradient-both,
.dynamic-views .card-subtitle.scroll-gradient-both,
.dynamic-views .card-title.scroll-gradient-both {
  mask-image: linear-gradient(
    to right,
    rgba(0, 0, 0, 0) 0,
    rgba(0, 0, 0, 0.3) 4px,
    black 28px,
    black calc(100% - 28px),
    rgba(0, 0, 0, 0.3) calc(100% - 4px),
    rgba(0, 0, 0, 0) 100%
  );
  -webkit-mask-image: linear-gradient(
    to right,
    rgba(0, 0, 0, 0) 0,
    rgba(0, 0, 0, 0.3) 4px,
    black 28px,
    black calc(100% - 28px),
    rgba(0, 0, 0, 0.3) calc(100% - 4px),
    rgba(0, 0, 0, 0) 100%
  );
}

/* Remove gradient masks when toggle ON */
body.dynamic-views-no-fade-truncated-text
  .dynamic-views
  .property-content-wrapper.scroll-gradient-left,
body.dynamic-views-no-fade-truncated-text
  .dynamic-views
  .property-content-wrapper.scroll-gradient-right,
body.dynamic-views-no-fade-truncated-text
  .dynamic-views
  .property-content-wrapper.scroll-gradient-both,
body.dynamic-views-no-fade-truncated-text
  .dynamic-views
  .card-subtitle.scroll-gradient-left,
body.dynamic-views-no-fade-truncated-text
  .dynamic-views
  .card-subtitle.scroll-gradient-right,
body.dynamic-views-no-fade-truncated-text
  .dynamic-views
  .card-subtitle.scroll-gradient-both,
body.dynamic-views-no-fade-truncated-text
  .dynamic-views
  .card-title.scroll-gradient-left,
body.dynamic-views-no-fade-truncated-text
  .dynamic-views
  .card-title.scroll-gradient-right,
body.dynamic-views-no-fade-truncated-text
  .dynamic-views
  .card-title.scroll-gradient-both {
  mask-image: none;
  -webkit-mask-image: none;
}

/* Hide empty fields */
.dynamic-views .property-field:empty {
  display: none;
}

/* ============================================
   MASONRY VIEW
   ============================================ */

.dynamic-views .dynamic-views-masonry {
  position: relative;
  width: 100%;
  max-width: 100%;
  overflow: hidden;
}

/* Reset Bases' mobile margin - applied to parent instead to include end indicator */
.is-phone
  .workspace-leaf-content[data-type="bases"]
  .dynamic-views-masonry.bases-cards-container {
  margin-bottom: 0;
}

.dynamic-views .dynamic-views-masonry .card,
.workspace-leaf-content[data-type="bases"]
  .dynamic-views
  .dynamic-views-masonry
  .card {
  position: absolute;
  /* Width set explicitly via --masonry-width, no max-width needed */
  margin: 0;
  display: flex;
  flex-direction: column;
}

.dynamic-views .dynamic-views-masonry .card .card-content {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
}

.dynamic-views .dynamic-views-masonry .card.card-thumbnail-right .card-content {
  flex-direction: row;
}

.dynamic-views .dynamic-views-masonry .card.card-thumbnail-left .card-content {
  flex-direction: row-reverse;
}

/* Override flex-direction for cover formats in Masonry - text should be side-by-side */
.dynamic-views .dynamic-views-masonry .card.card-cover-right .card-content,
.dynamic-views .dynamic-views-masonry .card.card-cover-left .card-content,
.dynamic-views .dynamic-views-masonry .card.card-cover-top .card-content,
.dynamic-views .dynamic-views-masonry .card.card-cover-bottom .card-content {
  flex-direction: row;
}

/* Override flex-direction for no-image cards in Masonry */
.dynamic-views
  .dynamic-views-masonry
  .card:not([class*="card-thumbnail-"]):not([class*="card-cover-"])
  .card-content {
  flex-direction: row;
}

/* Masonry: Thumbnail top/bottom positioning */
.dynamic-views .dynamic-views-masonry .card.card-thumbnail-top .card-thumbnail {
  margin-top: var(--size-4-2);
  margin-bottom: var(--size-4-2);
}

.dynamic-views
  .dynamic-views-masonry
  .card.card-thumbnail-bottom
  .card-thumbnail {
  margin-top: var(--size-4-2);
  margin-bottom: var(--size-4-2);
}

.dynamic-views .dynamic-views-masonry .card .card-text-preview {
  flex: 1 1 0;
  min-width: 0;
}

/* Masonry: push bottom properties to bottom of card */
.dynamic-views
  .dynamic-views-masonry
  .card
  .card-content
  ~ .card-properties-bottom,
.dynamic-views
  .dynamic-views-masonry
  .card
  .card-title-group
  ~ .card-properties-bottom {
  margin-top: auto;
  padding-top: var(--size-4-2);
}

/* Masonry: only-child pushes to bottom but needs no padding (no sibling above) */
.dynamic-views .dynamic-views-masonry .card .card-properties-bottom:only-child {
  margin-top: auto;
  padding-top: 0;
}
/* ============================================
   VIEW-SPECIFIC STYLES: LIST VIEW
   ============================================ */

.dynamic-views .list-view {
  margin: 0;
  padding-left: 0;
}

.dynamic-views .list-view.marker-bullet {
  list-style-type: disc !important;
  list-style-position: outside;
  padding-left: 20px;
}

.dynamic-views .list-view.marker-bullet .list-item {
  display: list-item !important;
}

.dynamic-views .list-view.marker-number {
  list-style-type: decimal !important;
  list-style-position: outside;
  padding-left: 20px;
}

.dynamic-views .list-view.marker-number .list-item {
  display: list-item !important;
}

.dynamic-views .list-view.marker-none {
  list-style-type: none !important;
  padding-left: 0 !important;
}

.dynamic-views .list-view.marker-none .list-item {
  display: list-item !important;
}

.dynamic-views .list-item {
  margin-bottom: 8px;
  line-height: 1.6;
}

.dynamic-views .list-link {
  color: var(--link-color);
  text-decoration: none;
}

.list-link:hover {
  color: var(--link-color-hover);
}

.dynamic-views .list-properties {
  display: inline-flex;
  gap: var(--size-2-2);
  align-items: center;
  flex-wrap: wrap;
  font-size: 0.9em;
  margin-left: var(--size-4-2);
}

.dynamic-views .list-properties.list-path {
  color: var(--text-faint);
}

/* ============================================
   RESPONSIVE STYLES - COMPACT VIEWPORT
   ============================================ */

/* Compact viewport - search below toolbar */
.search-controls-compact {
  display: none;
}

.compact-bottom-row {
  display: none;
}

.results-count-wrapper-compact {
  display: none;
}

.create-note-button-compact {
  display: none;
}

/* Hide grid during 0-width tab transitions (prevents single-column flash) */
@container (max-width: 50px) {
  .dynamic-views-grid,
  .dynamic-views-masonry {
    visibility: hidden;
  }
}

@container (max-width: 700px) and (min-width: 51px) {
  .dynamic-views .controls-wrapper {
    padding: 3px 0 8px;
  }

  .dynamic-views .width-toggle-btn {
    display: none;
  }

  .dynamic-views.wide,
  .dynamic-views.max {
    width: 100%;
    max-width: 100%;
    margin-left: 0;
    margin-right: 0;
  }

  .search-controls-compact {
    display: block;
    width: 100%;
    padding: 0;
    margin-top: 8px;
  }

  .search-controls-compact .search-input-container {
    width: 100%;
    max-width: 100%;
    padding: 0;
    margin-bottom: 8px;
  }

  .search-controls-compact .desktop-search {
    width: 100%;
  }

  .compact-bottom-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
  }

  .dynamic-views .results-count-wrapper-compact {
    display: flex;
  }

  .dynamic-views .create-note-button-compact {
    display: flex;
  }

  .dynamic-views .search-controls {
    display: none !important;
  }

  .dynamic-views .results-count-wrapper {
    display: none !important;
  }

  .dynamic-views .create-note-button {
    display: none !important;
  }

  .dynamic-views .settings-panel {
    max-width: 100%;
  }

  /* Switch to single column at narrow widths (Datacore only - bases uses CSS grid) */
  .datacore-wide .dynamic-views .dynamic-views-grid,
  .datacore-max .dynamic-views .dynamic-views-grid {
    display: flex;
    flex-direction: column;
  }

  /* Stack properties on narrow cards */
  .dynamic-views .card-properties,
  .dynamic-views .tags-wrapper,
  .dynamic-views .path-wrapper,
  .bases-view .tags-wrapper,
  .bases-view .path-wrapper {
    justify-content: flex-start !important;
    flex-wrap: wrap;
  }
  /* Exception: preserve nowrap in subtitle scroll mode */
  body.dynamic-views-subtitle-overflow-scroll
    .dynamic-views
    .card-subtitle
    .path-wrapper,
  body.dynamic-views-subtitle-overflow-scroll
    .bases-view
    .card-subtitle
    .path-wrapper {
    flex-wrap: nowrap;
  }

  /* Compact breakpoint: move thumbnails below text previews (only for stacked thumbnails) */
  .dynamic-views .card.thumbnail-stack .card-content,
  .bases-view .card.thumbnail-stack .card-content {
    flex-direction: column;
  }

  /* Thumbnail order for stacked layout - left goes above text, right stays below */
  /* Only applies inside card-content; DOM manipulation handles position when moved outside */
  .dynamic-views
    .card.thumbnail-stack.card-thumbnail-left
    .card-content
    .card-thumbnail,
  .bases-view
    .card.thumbnail-stack.card-thumbnail-left
    .card-content
    .card-thumbnail {
    order: -1;
  }

  /* Settings panel responsive */
  .dynamic-views .setting-item-text {
    flex-direction: column !important;
    gap: var(--size-2-2);
  }

  .dynamic-views .setting-item-text .setting-item-info {
    min-width: 0;
  }

  .dynamic-views .setting-text-input,
  .dynamic-views .dropdown {
    width: 100%;
  }
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

@media (hover: hover) {
  .markdown-source-view.mod-cm6
    .cm-embed-block:not(.cm-table-widget, .cm-lang-base):has(
      .dynamic-views
    ):hover {
    box-shadow: none;
  }
  .markdown-source-view.mod-cm6
    .cm-embed-block:not(.cm-table-widget, .cm-lang-base):has(
      .dynamic-views
    ):hover
    .edit-block-button {
    display: none;
  }
}

/* Hidden utility class */
.dynamic-views-hidden {
  display: none;
}

/* Indented sub-settings */
.setting-sub-items {
  margin-inline-start: 20px;
  padding-left: 1em;
  position: relative;
}

.setting-sub-items::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 1px;
  background-color: var(--background-modifier-border);
}

/* Add padding only when visible and not last.
   Currently inactive as sub-items is last child; retained for future structure changes. */
.setting-sub-items:not(.dynamic-views-hidden):has(+ .setting-item) {
  padding-bottom: var(--size-4-4, 16px);
}

.setting-sub-items:not(.dynamic-views-hidden):has(+ .setting-item)::before {
  bottom: var(--size-4-4, 16px);
}

/* Remove bottom padding from setting when sub-items hidden and last in group */
.setting-items
  > .setting-item:has(+ .setting-sub-items.dynamic-views-hidden:last-child) {
  padding-bottom: 0;
}

/* Feedback button */
.dynamic-views-feedback-container {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  margin-top: 20px;
  margin-bottom: 0;
  padding: var(--size-2-2) 0;
  overflow: visible;
}

.dynamic-views-feedback-button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--size-4-2);
  line-height: 1;
}

/* Hide scrollbar during scroll restoration (prevents distracting flicker) */
.dynamic-views-restoring-scroll {
  scrollbar-width: none !important;
}
.dynamic-views-restoring-scroll::-webkit-scrollbar {
  display: none !important;
}

/* End of content indicator */
.dynamic-views-end-indicator {
  width: 100%;
  margin-top: var(--size-4-4);
  border-top: 1px solid var(--background-modifier-border);
}

body:not(.is-mobile) .dynamic-views-end-indicator {
  height: 31px;
}

body.dynamic-views-hide-end-indicator .dynamic-views-end-indicator {
  display: none;
}
